# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO



**Sistema de Gesti√≥n de Tickets de Soporte TI** - Plataforma web empresarial para FARMASHAIO



[![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)](https://github.com/Julian-Enable/sgts-farmashaio)**Sistema de Gesti√≥n de Tickets de Soporte TI**

[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

[![Node](https://img.shields.io/badge/node-18.x-brightgreen.svg)](https://nodejs.org)

[![React](https://img.shields.io/badge/react-18.2.0-61dafb.svg)](https://reactjs.org)

Plataforma empresarial integral para la gesti√≥n y seguimiento de solicitudes de soporte t√©cnico en FARMASHAIO.## Sistema de Gesti√≥n de Tickets de Soporte TI

---



## üìã Descripci√≥n

---

SGTS FARMASHAIO es una aplicaci√≥n web full-stack dise√±ada para centralizar y gestionar eficientemente las solicitudes de soporte t√©cnico en FARMASHAIO. El sistema permite a los empleados reportar incidencias tecnol√≥gicas, al personal t√©cnico resolver problemas de manera organizada, y a los administradores supervisar toda la operaci√≥n de TI.



### Problem√°tica que Resuelve

## Descripci√≥n[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)## Sistema de Gesti√≥n de Tickets de Soporte TI

- **Desorganizaci√≥n**: Solicitudes de soporte dispersas en emails, WhatsApp o llamadas telef√≥nicas

- **P√©rdida de informaci√≥n**: Sin registro centralizado de incidencias y soluciones

- **Falta de seguimiento**: Dificultad para monitorear el estado de tickets en tiempo real

- **Ineficiencia**: Asignaci√≥n manual y no optimizada de t√©cnicosSGTS FARMASHAIO es una soluci√≥n completa para la administraci√≥n centralizada de tickets de soporte t√©cnico, dise√±ada para optimizar la comunicaci√≥n entre empleados y el departamento de TI. El sistema proporciona un flujo de trabajo estructurado desde la creaci√≥n hasta la resoluci√≥n de incidencias, con seguimiento detallado y notificaciones en tiempo real.[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- **Falta de m√©tricas**: Ausencia de datos para mejorar tiempos de respuesta y calidad del servicio



### Soluci√≥n Implementada

---[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)

Sistema web completo con arquitectura moderna que proporciona:



- ‚úÖ **Panel unificado** para crear, asignar y resolver tickets

- ‚úÖ **Notificaciones en tiempo real** mediante WebSockets## Caracter√≠sticas Principales[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)

- ‚úÖ **Dashboard analytics** con m√©tricas visuales de rendimiento

- ‚úÖ **Sistema de roles y permisos** (Empleado, T√©cnico, Administrador)

- ‚úÖ **Gesti√≥n de usuarios** con control de acceso

- ‚úÖ **Historial completo** de cada ticket con comentarios y cambios de estado### Gesti√≥n de Tickets[![Status](https://img.shields.io/badge/Status-Production-success?style=flat-square)]()[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)### Sistema de Gesti√≥n de Tickets de Soporte TI### Sistema de Gesti√≥n de Tickets de Soporte TI

- ‚úÖ **Notificaciones por email** autom√°ticas

- ‚úÖ **Interfaz responsive** para uso en desktop, tablet y m√≥vil- **Creaci√≥n r√°pida** de solicitudes con formularios intuitivos



---- **Numeraci√≥n autom√°tica** con formato #TKT-YYYY-NNNNNN



## üéØ Funcionalidades Principales- **Categorizaci√≥n** por tipo de problema (Hardware, Software, Red, etc.)



### Para Empleados- **Priorizaci√≥n** en 5 niveles (Muy Baja, Baja, Media, Alta, Cr√≠tica)Sistema empresarial de gesti√≥n de tickets de soporte t√©cnico para FARMASHAIO. Arquitectura de 3 capas con autenticaci√≥n JWT, gesti√≥n de roles y notificaciones en tiempo real.[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)

- Crear tickets de soporte con t√≠tulo, descripci√≥n, categor√≠a y prioridad

- Ver todos sus tickets creados con filtros por estado y prioridad- **Estados del ciclo de vida** (Nuevo, Asignado, En Progreso, Resuelto, Cerrado)

- Agregar comentarios y seguimiento a sus tickets

- Recibir notificaciones cuando un t√©cnico es asignado o el ticket cambia de estado- **Asignaci√≥n inteligente** a t√©cnicos especializados

- Visualizar estad√≠sticas personales de tickets

- **Historial completo** de cambios y acciones

### Para T√©cnicos

- Visualizar todos los tickets asignados en un dashboard organizado**Aplicaci√≥n:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- Aceptar, trabajar y resolver tickets

- Cambiar estados de tickets: Nuevo ‚Üí Asignado ‚Üí En Progreso ‚Üí Resuelto ‚Üí Cerrado### Sistema de Autenticaci√≥n

- Agregar comentarios internos y p√∫blicos

- Ver hist√≥rico completo de cada ticket- **Autenticaci√≥n segura** con JSON Web Tokens (JWT)

- Recibir notificaciones en tiempo real cuando se les asigna un nuevo ticket

- **Encriptaci√≥n de contrase√±as** con bcrypt (12 rounds)

### Para Administradores

- Dashboard con m√©tricas avanzadas y gr√°ficos:- **Sesiones persistentes** con renovaci√≥n autom√°tica---[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)

  - Distribuci√≥n de tickets por estado (Pie Chart)

  - Tickets por prioridad (Bar Chart)- **Cierre de sesi√≥n** seguro en todos los dispositivos

  - Tickets por categor√≠a (Bar Chart)

  - L√≠nea de tiempo de creaci√≥n de tickets (Line Chart)

- Gesti√≥n completa de usuarios (crear, editar, desactivar)

- Asignar y reasignar tickets a t√©cnicos### Control de Acceso por Roles

- Ver todas las operaciones del sistema

- Gestionar categor√≠as, prioridades y estados de tickets- **Empleado**: Crear tickets y ver sus propias solicitudes## Descripci√≥n[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)

- Exportar reportes y m√©tricas

- **T√©cnico**: Gestionar tickets asignados y actualizar estados

### Funcionalidades Transversales

- **Perfil de usuario**: Editar informaci√≥n personal, cambiar contrase√±a, ver estad√≠sticas- **Administrador**: Control total del sistema y gesti√≥n de usuarios

- **Notificaciones**: Panel centralizado con notificaciones en tiempo real y persistencia en base de datos

- **Sistema de comentarios**: Comunicaci√≥n fluida entre empleados y t√©cnicos

- **Historial de cambios**: Auditor√≠a completa de todas las modificaciones de cada ticket

- **B√∫squeda y filtrado**: B√∫squeda por texto, filtros por estado, prioridad, categor√≠a y t√©cnico asignado### NotificacionesSGTS FARMASHAIO es una soluci√≥n integral para la gesti√≥n de tickets de soporte t√©cnico interno, dise√±ada espec√≠ficamente para optimizar la comunicaci√≥n entre empleados y el departamento de TI de FARMASHAIO.



---- **Notificaciones en tiempo real** v√≠a WebSocket (Socket.IO)



## üèóÔ∏è Arquitectura del Sistema- **Alertas por email** en eventos importantes



### Stack Tecnol√≥gico- **Badge con contador** de notificaciones sin leer



#### Frontend- **Panel de notificaciones** con historial completo### Caracter√≠sticas PrincipalesSistema integral de gesti√≥n de tickets de soporte t√©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaci√≥n JWT, gesti√≥n de roles y notificaciones en tiempo real.[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)

- **React 18.2** - Framework principal con Hooks y Context API

- **Material-UI 5.14** - Librer√≠a de componentes UI con dise√±o Material Design

- **Vite 4.4** - Build tool ultrarr√°pido para desarrollo y producci√≥n

- **React Router DOM 6.14** - Navegaci√≥n y enrutamiento SPA### Dashboard y Reportes

- **Axios** - Cliente HTTP para comunicaci√≥n con API REST

- **Socket.IO Client 4.8** - WebSocket para notificaciones en tiempo real- **Gr√°ficos interactivos** con Recharts:

- **Recharts 3.2** - Librer√≠a de gr√°ficos para visualizaciones anal√≠ticas

- **React Hook Form 7.45** - Manejo eficiente de formularios con validaci√≥n  - Distribuci√≥n de tickets por estado (gr√°fico de dona)**Gesti√≥n de Tickets**

- **Yup** - Esquemas de validaci√≥n declarativos

- **date-fns** - Utilidades para formateo de fechas  - Tickets por prioridad (gr√°fico de barras)



#### Backend  - Evoluci√≥n en los √∫ltimos 7 d√≠as (gr√°fico de l√≠nea)- Sistema de ticketing con numeraci√≥n autom√°tica

- **Node.js 18.x** - Runtime JavaScript del lado del servidor

- **Express 4.18** - Framework web minimalista y robusto  - Tickets por categor√≠a (gr√°fico de barras)

- **PostgreSQL 14.x** - Base de datos relacional principal

- **Socket.IO 4.8** - Servidor WebSocket para comunicaci√≥n bidireccional en tiempo real- **Estad√≠sticas en tiempo real** del sistema- Categorizaci√≥n y priorizaci√≥n de solicitudes**Production:** [https://sgts-farmashaio.vercel.app](https://sgts-farmashaio.vercel.app)  [![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- **JWT (jsonwebtoken 9.0)** - Autenticaci√≥n stateless basada en tokens

- **bcryptjs** - Hashing seguro de contrase√±as (12 rounds)- **M√©tricas de desempe√±o** por t√©cnico

- **Nodemailer 6.9** - Env√≠o de notificaciones por email

- **express-validator 7.0** - Validaci√≥n y sanitizaci√≥n de datos de entrada- Estados configurables del ciclo de vida

- **express-rate-limit 6.8** - Protecci√≥n contra ataques de fuerza bruta

- **Helmet** - Headers HTTP de seguridad### Gesti√≥n de Usuarios

- **Morgan** - Logger de peticiones HTTP

- **Compression** - Compresi√≥n gzip de respuestas- **CRUD completo** de usuarios (solo administradores)- Asignaci√≥n inteligente a t√©cnicos**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)



#### Infraestructura y Deployment- **Perfiles personalizables** con avatar e informaci√≥n de contacto

- **Render** - Hosting de backend API (Web Service) y base de datos PostgreSQL

- **Vercel** - Hosting de frontend con CDN global- **Gesti√≥n de departamentos** y asignaciones- Historial completo de cambios con auditor√≠a

- **GitHub** - Control de versiones con Git

- **GitHub Actions** - CI/CD (opcional, no configurado actualmente)- **Activaci√≥n/desactivaci√≥n** de cuentas



### Arquitectura de 3 Capas- **Cambio de contrase√±a** con validaci√≥n segura[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)



```

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ                         FRONTEND (Vercel)                       ‚îÇ### B√∫squeda y Filtrado**Control de Acceso**

‚îÇ  https://farmatickets.vercel.app                                ‚îÇ

‚îÇ                                                                 ‚îÇ- **B√∫squeda** por t√≠tulo, n√∫mero o descripci√≥n

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ

‚îÇ  ‚îÇ   Pages      ‚îÇ  ‚îÇ  Components  ‚îÇ  ‚îÇ   Context    ‚îÇ        ‚îÇ- **Filtros avanzados** por estado, categor√≠a, prioridad- Autenticaci√≥n segura con JWT---

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - Dashboard  ‚îÇ  ‚îÇ - Layout     ‚îÇ  ‚îÇ - AuthContext‚îÇ        ‚îÇ- **Ordenamiento** personalizable

‚îÇ  ‚îÇ - Tickets    ‚îÇ  ‚îÇ - TicketCard ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - Users      ‚îÇ  ‚îÇ - NotifPanel ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ- **Paginaci√≥n** eficiente- Tres niveles de usuario: Empleado, T√©cnico, Administrador

‚îÇ  ‚îÇ - Profile    ‚îÇ  ‚îÇ - Logo       ‚îÇ                          ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ

‚îÇ                                                                 ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ---- Protecci√≥n de rutas basada en roles[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)

‚îÇ  ‚îÇ  Services    ‚îÇ  ‚îÇ    Hooks     ‚îÇ  ‚îÇ    Utils     ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - api.js     ‚îÇ  ‚îÇ - useNotifs  ‚îÇ  ‚îÇ - constants  ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - authSvc    ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - formatters ‚îÇ        ‚îÇ## Arquitectura del Sistema- Sesiones persistentes

‚îÇ  ‚îÇ - ticketSvc  ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - theme      ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - socketSvc  ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò### Stack Tecnol√≥gico## Tabla de Contenidos

                              ‚Üï HTTPS + WebSocket

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ                     BACKEND API (Render)                        ‚îÇ

‚îÇ  https://sgts-farmashaio-api.onrender.com                      ‚îÇ**Frontend****Sistema de Comunicaci√≥n**

‚îÇ                                                                 ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ- React 18.2 con Vite 4.4

‚îÇ  ‚îÇ   Routes     ‚îÇ  ‚îÇ Controllers  ‚îÇ  ‚îÇ  Middleware  ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ- Material-UI 5.14 para dise√±o responsivo- Comentarios p√∫blicos e internos

‚îÇ  ‚îÇ - /api/auth  ‚îÇ  ‚îÇ - auth       ‚îÇ  ‚îÇ - auth       ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - /api/users ‚îÇ  ‚îÇ - users      ‚îÇ  ‚îÇ - error      ‚îÇ        ‚îÇ- React Router 6 para navegaci√≥n

‚îÇ  ‚îÇ - /api/...   ‚îÇ  ‚îÇ - tickets    ‚îÇ  ‚îÇ - validator  ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - notifs     ‚îÇ  ‚îÇ - rateLimiter‚îÇ        ‚îÇ- Recharts para visualizaciones- Notificaciones autom√°ticas por email

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ

‚îÇ                                                                 ‚îÇ- Socket.IO Client para WebSocket

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ

‚îÇ  ‚îÇ   Models     ‚îÇ  ‚îÇ    Utils     ‚îÇ  ‚îÇ  WebSocket   ‚îÇ        ‚îÇ- Axios para comunicaci√≥n HTTP- Notificaciones en tiempo real en la aplicaci√≥n- [Arquitectura del Sistema](#arquitectura-del-sistema)

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - User       ‚îÇ  ‚îÇ - database   ‚îÇ  ‚îÇ - Socket.IO  ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - Ticket     ‚îÇ  ‚îÇ - email      ‚îÇ  ‚îÇ - emitToUser ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - emitToRole ‚îÇ        ‚îÇ**Backend**- Historial de interacciones

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò- Node.js 18.x con Express 4.18

                              ‚Üï SQL

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê- PostgreSQL 14.x como base de datos- [Caracter√≠sticas Principales](#caracter√≠sticas-principales)Sistema integral de gesti√≥n de tickets de soporte t√©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaci√≥n JWT, gesti√≥n de roles y notificaciones en tiempo real.Sistema integral de gesti√≥n de tickets de soporte t√©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaci√≥n JWT, gesti√≥n de roles y notificaciones en tiempo real.

‚îÇ                   BASE DE DATOS (Render PostgreSQL)             ‚îÇ

‚îÇ                                                                 ‚îÇ- Socket.IO para notificaciones en tiempo real

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ

‚îÇ  ‚îÇ    users     ‚îÇ  ‚îÇ   tickets    ‚îÇ  ‚îÇ categories   ‚îÇ        ‚îÇ- JWT para autenticaci√≥n**Panel de Administraci√≥n**

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - id (UUID)  ‚îÇ  ‚îÇ - id (UUID)  ‚îÇ  ‚îÇ - id (UUID)  ‚îÇ        ‚îÇ- bcrypt para encriptaci√≥n

‚îÇ  ‚îÇ - username   ‚îÇ  ‚îÇ - title      ‚îÇ  ‚îÇ - name       ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - email      ‚îÇ  ‚îÇ - description‚îÇ  ‚îÇ - description‚îÇ        ‚îÇ- Nodemailer para emails- Gesti√≥n completa de usuarios- [Tecnolog√≠as Utilizadas](#tecnolog√≠as-utilizadas)

‚îÇ  ‚îÇ - password   ‚îÇ  ‚îÇ - requester  ‚îÇ  ‚îÇ - color      ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - role       ‚îÇ  ‚îÇ - assigned   ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - department ‚îÇ  ‚îÇ - category   ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ - priority   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ**Infraestructura**- Reportes y estad√≠sticas

‚îÇ                    ‚îÇ - status     ‚îÇ                           ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ - created_at ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ- Frontend: Vercel (Edge Network)

‚îÇ  ‚îÇ priorities   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   statuses   ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ              ‚îÇ                    ‚îÇ              ‚îÇ        ‚îÇ- Backend: Render (Web Service)- Configuraci√≥n de categor√≠as y prioridades- [Instalaci√≥n Local](#instalaci√≥n-local)

‚îÇ  ‚îÇ - id         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ - id         ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - name       ‚îÇ  ‚îÇnotifications ‚îÇ  ‚îÇ - name       ‚îÇ        ‚îÇ- Base de Datos: Render PostgreSQL

‚îÇ  ‚îÇ - level      ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - color      ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - color      ‚îÇ  ‚îÇ - user_id    ‚îÇ  ‚îÇ - is_final   ‚îÇ        ‚îÇ- SSL/TLS para comunicaci√≥n segura- Monitoreo del sistema

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ - ticket_id  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ

‚îÇ                    ‚îÇ - type       ‚îÇ                           ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ - message    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ

‚îÇ  ‚îÇ   comments   ‚îÇ  ‚îÇ - is_read    ‚îÇ  ‚îÇ   history    ‚îÇ        ‚îÇ### Arquitectura de 3 Capas- [Deployment en Producci√≥n](#deployment-en-producci√≥n)

‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ - created_at ‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - ticket_id  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ - ticket_id  ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - user_id    ‚îÇ                    ‚îÇ - user_id    ‚îÇ        ‚îÇ

‚îÇ  ‚îÇ - content    ‚îÇ                    ‚îÇ - field      ‚îÇ        ‚îÇ```---

‚îÇ  ‚îÇ - created_at ‚îÇ                    ‚îÇ - old_value  ‚îÇ        ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ - new_value  ‚îÇ        ‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ                                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ                     CAPA DE PRESENTACI√ìN                    ‚îÇ- [API Reference](#api-reference)**Production:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)  **Production:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)  

```

‚îÇ                     React + Material-UI                     ‚îÇ

### Flujo de Datos

‚îÇ                  https://farmatickets.vercel.app            ‚îÇ## Arquitectura T√©cnica

#### 1. Autenticaci√≥n

1. Usuario ingresa credenciales en `/login`‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2. Frontend env√≠a `POST /api/auth/login` con email y password

3. Backend valida credenciales contra `users` table                            ‚Üï HTTPS- [Estructura del Proyecto](#estructura-del-proyecto)

4. Si es v√°lido, backend genera JWT token con bcrypt hash

5. Frontend almacena token en localStorage‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

6. Todas las peticiones subsecuentes incluyen token en header `Authorization: Bearer <token>`

‚îÇ                      CAPA DE NEGOCIO                        ‚îÇ### Stack Tecnol√≥gico

#### 2. Creaci√≥n de Ticket

1. Empleado completa formulario en `/tickets/new`‚îÇ                    Node.js + Express API                    ‚îÇ

2. Frontend env√≠a `POST /api/tickets` con datos validados

3. Backend crea registro en tabla `tickets` con estado "Nuevo"‚îÇ            https://sgts-farmashaio-api.onrender.com         ‚îÇ- [Base de Datos](#base-de-datos)**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)

4. Backend crea entrada en `ticket_history` 

5. Backend emite evento WebSocket a todos los administradores‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

6. Backend env√≠a email de notificaci√≥n a administradores

7. Frontend recibe respuesta y redirige a `/tickets/:id`                            ‚Üï SQL| Capa | Tecnolog√≠a | Versi√≥n |



#### 3. Notificaciones en Tiempo Real‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

1. Frontend se conecta a WebSocket al hacer login: `socketService.connect(userId)`

2. Backend registra socket en sala: `socket.join('user_${userId}')`‚îÇ                      CAPA DE DATOS                          ‚îÇ|------|-----------|---------|- [Seguridad](#seguridad)

3. Cuando ocurre evento (asignaci√≥n, cambio estado, comentario):

   - Backend guarda notificaci√≥n en tabla `notifications`‚îÇ                   PostgreSQL Database                       ‚îÇ

   - Backend emite evento WebSocket: `emitToUser(userId, 'ticket:assigned', data)`

4. Frontend recibe evento en `useNotifications` hook‚îÇ                    Render PostgreSQL                        ‚îÇ| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 |

5. Frontend muestra notificaci√≥n en badge del icono de campana

6. Frontend puede mostrar browser notification nativa‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò



---```| **Backend** | Node.js + Express | 18.x / 4.18 |- [Troubleshooting](#troubleshooting)



## üóÑÔ∏è Modelo de Datos



### Entidades Principales---| **Database** | PostgreSQL | 14.x |



#### users

Usuario del sistema con roles diferenciados

```sql## Modelo de Datos| **Auth** | JWT + bcrypt | - |- [Roadmap](#roadmap)

id              UUID PRIMARY KEY

username        VARCHAR(50) UNIQUE

email           VARCHAR(100) UNIQUE

password_hash   VARCHAR(255)### Entidades Principales| **Email** | NodeMailer | 6.9 |

first_name      VARCHAR(50)

last_name       VARCHAR(50)

role            ENUM('empleado', 'tecnico', 'administrador')

department      VARCHAR(100)**users**- [Licencia](#licencia)------

is_active       BOOLEAN

created_at      TIMESTAMP- Informaci√≥n de empleados y t√©cnicos

updated_at      TIMESTAMP

last_login      TIMESTAMP- Roles y permisos### Diagrama de Arquitectura

```

- Credenciales encriptadas

#### tickets

Ticket de soporte con informaci√≥n completa

```sql

id              UUID PRIMARY KEY**tickets**

title           VARCHAR(200)

description     TEXT- Solicitudes de soporte```

ticket_number   VARCHAR(20) UNIQUE (formato: TKT-YYYY-NNNNNN)

requester_id    UUID ‚Üí users(id)- Estado y seguimiento

assigned_to     UUID ‚Üí users(id) NULLABLE

category_id     UUID ‚Üí categories(id)- Asignaciones y fechas‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê---

priority_id     UUID ‚Üí priorities(id)

status_id       UUID ‚Üí ticket_statuses(id)

created_at      TIMESTAMP

updated_at      TIMESTAMP**categories**‚îÇ          PRESENTATION LAYER                     ‚îÇ

resolved_at     TIMESTAMP NULLABLE

due_date        TIMESTAMP NULLABLE- Clasificaci√≥n de problemas

estimated_hours DECIMAL(5,2)

actual_hours    DECIMAL(5,2)- Colores identificadores‚îÇ  React 18 + Material-UI + Vite                 ‚îÇ

```



#### categories

Categor√≠as predefinidas de tickets**priorities**‚îÇ  Vercel Edge Network                           ‚îÇ

```sql

id              UUID PRIMARY KEY- Niveles de urgencia (1-5)

name            VARCHAR(100) UNIQUE

description     TEXT- Tiempos de respuesta sugeridos‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò## Arquitectura del Sistema## Tabla de Contenidos## Tabla de Contenidos

color           VARCHAR(7) (hex color)

is_active       BOOLEAN

created_at      TIMESTAMP

**ticket_statuses**                   ‚îÇ REST API (HTTPS)

Valores: Hardware, Software, Red, Acceso, Email, Impresoras, Tel√©fonos, Otros

```- Estados del flujo de trabajo



#### priorities- Configuraci√≥n de orden‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

Niveles de prioridad del 1 al 5

```sql

id              UUID PRIMARY KEY

name            VARCHAR(50) UNIQUE**notifications**‚îÇ          APPLICATION LAYER                      ‚îÇ

level           INTEGER (1-5)

color           VARCHAR(7)- Historial de notificaciones

description     TEXT

is_active       BOOLEAN- Estado de lectura‚îÇ  Node.js + Express.js                          ‚îÇ### Stack Completo



Valores: Muy Baja(1), Baja(2), Media(3), Alta(4), Cr√≠tica(5)

```

**ticket_comments**‚îÇ  Render Cloud Platform                         ‚îÇ

#### ticket_statuses

Estados del ciclo de vida de un ticket- Comunicaci√≥n del ticket

```sql

id              UUID PRIMARY KEY- Visibilidad p√∫blica/interna‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

name            VARCHAR(50) UNIQUE

description     TEXT

color           VARCHAR(7)

is_final        BOOLEAN---                   ‚îÇ SQL Queries

order_index     INTEGER

is_active       BOOLEAN



Valores: Nuevo, Asignado, En Progreso, Esperando Usuario, Resuelto, Cerrado, Cancelado## Seguridad‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê| Capa | Tecnolog√≠a | Versi√≥n | Hosting |- [Arquitectura del Sistema](#arquitectura-del-sistema)- [Arquitectura del Sistema](#arquitectura-del-sistema)

```



#### notifications

Notificaciones persistentes del sistema### Medidas Implementadas‚îÇ          DATA LAYER                             ‚îÇ

```sql

id              UUID PRIMARY KEY

user_id         UUID ‚Üí users(id)

ticket_id       UUID ‚Üí tickets(id) NULLABLE- **HTTPS obligatorio** en todas las comunicaciones‚îÇ  PostgreSQL 14.x                               ‚îÇ|------|-----------|---------|---------|

type            VARCHAR(50)

title           VARCHAR(200)- **Tokens JWT** con expiraci√≥n de 24 horas

message         TEXT

is_read         BOOLEAN- **Passwords hasheados** con bcrypt (12 rounds)‚îÇ  Render Managed Database                       ‚îÇ

sent_via_email  BOOLEAN

email_sent_at   TIMESTAMP- **Consultas parametrizadas** para prevenir SQL injection

created_at      TIMESTAMP

```- **Validaci√≥n de entrada** en frontend y backend‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel |- [Caracter√≠sticas Principales](#caracter√≠sticas-principales)- [Caracter√≠sticas Principales](#caracter√≠sticas-principales)



#### ticket_comments- **CORS configurado** con whitelist de or√≠genes

Comentarios en tickets

```sql- **Rate limiting** (5000 req/15min por IP)```

id              UUID PRIMARY KEY

ticket_id       UUID ‚Üí tickets(id)- **Helmet.js** para headers de seguridad HTTP

user_id         UUID ‚Üí users(id)

content         TEXT- **Sanitizaci√≥n** de datos del usuario| **Backend** | Node.js + Express | 18.x / 4.18 | Render |

is_internal     BOOLEAN (comentarios solo para t√©cnicos)

created_at      TIMESTAMP- **Control de acceso** basado en roles (RBAC)

updated_at      TIMESTAMP

```---



#### ticket_history---

Historial completo de cambios

```sql| **Database** | PostgreSQL | 14.x | Render |- [Tecnolog√≠as Utilizadas](#tecnolog√≠as-utilizadas)- [Tecnolog√≠as Utilizadas](#tecnolog√≠as-utilizadas)

id              UUID PRIMARY KEY

ticket_id       UUID ‚Üí tickets(id)## Funcionalidades por Rol

user_id         UUID ‚Üí users(id)

field_name      VARCHAR(50)## Seguridad

old_value       TEXT

new_value       TEXT### Empleado

change_type     ENUM('created', 'updated', 'assigned', 'status_change', 'comment')

created_at      TIMESTAMP- ‚úì Crear tickets de soporte| **Auth** | JWT + bcrypt | - | - |

```

- ‚úì Ver sus propios tickets

### Relaciones

- ‚úì Agregar comentarios### Medidas Implementadas

- Un **user** puede crear muchos **tickets** (1:N - requester)

- Un **user** puede ser asignado a muchos **tickets** (1:N - assigned_to)- ‚úì Recibir notificaciones de actualizaciones

- Un **ticket** tiene una **category**, **priority**, y **status** (N:1)

- Un **ticket** puede tener muchos **comments** (1:N)- ‚úì Editar perfil personal| **Email** | NodeMailer | 6.9 | - |- [Instalaci√≥n Local](#instalaci√≥n-local)- [Instalaci√≥n Local](#instalaci√≥n-local)

- Un **ticket** puede tener muchas entradas de **history** (1:N)

- Un **user** puede tener muchas **notifications** (1:N)



---### T√©cnico**Autenticaci√≥n y Autorizaci√≥n**



## üîê Seguridad- ‚úì Ver tickets asignados



### Autenticaci√≥n y Autorizaci√≥n- ‚úì Actualizar estado de tickets- Tokens JWT con expiraci√≥n configurable

- **JWT Tokens**: Tokens firmados con secret key, expiraci√≥n configurable

- **Bcrypt**: Hashing de passwords con 12 rounds (factor de costo)- ‚úì Agregar comentarios (p√∫blicos e internos)

- **Middleware de autenticaci√≥n**: Valida token en cada petici√≥n protegida

- **Control de roles**: Endpoints restringidos seg√∫n rol del usuario- ‚úì Cambiar prioridad- Contrase√±as hasheadas con bcrypt (12 rounds)

- **Refresh token**: Sistema de renovaci√≥n autom√°tica de tokens (opcional, no implementado a√∫n)

- ‚úì Resolver y cerrar tickets

### Protecciones Implementadas

- **Rate Limiting**: 5000 requests por IP cada 15 minutos (configurable)- ‚úì Ver dashboard de estad√≠sticas- Control de acceso basado en roles (RBAC)### Arquitectura de 3 Capas- [Deployment en Producci√≥n](#deployment-en-producci√≥n)- [Deployment en Producci√≥n](#deployment-en-producci√≥n)

- **Helmet**: Headers HTTP de seguridad (CSP, HSTS, XSS Protection)

- **CORS**: Configurado para permitir solo or√≠genes autorizados

- **SQL Injection**: Prevenci√≥n mediante prepared statements (pg library)

- **XSS**: Sanitizaci√≥n de inputs con express-validator### Administrador- Protecci√≥n de rutas en frontend y backend

- **Validaci√≥n de datos**: Esquemas Yup en frontend y express-validator en backend

- **HTTPS**: Comunicaci√≥n cifrada en producci√≥n- ‚úì Todas las funciones de T√©cnico



### Variables de Entorno Sensibles- ‚úì Ver todos los tickets del sistema

```bash

# Backend- ‚úì Asignar tickets a t√©cnicos

JWT_SECRET              # Secret key para firmar tokens JWT

DATABASE_URL            # Connection string de PostgreSQL- ‚úì Gestionar usuarios (crear, editar, eliminar)**Protecci√≥n de Datos**

EMAIL_USER              # Usuario de cuenta de email

EMAIL_PASS              # Contrase√±a de cuenta de email- ‚úì Gestionar categor√≠as y prioridades

CORS_ORIGINS            # Dominios autorizados para CORS

- ‚úì Acceso a reportes completos- Validaci√≥n y sanitizaci√≥n de inputs```- [API Reference](#api-reference)- [API Reference](#api-reference)

# Frontend

VITE_API_URL            # URL de backend API- ‚úì Configuraci√≥n del sistema

```

- Prevenci√≥n de SQL injection mediante consultas parametrizadas

---

---

## üë• Roles y Permisos

- Prevenci√≥n de XSS (Cross-Site Scripting)‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

### Empleado (Role: 'empleado')

**Permisos:**## Flujo de Trabajo

- ‚úÖ Crear tickets de soporte

- ‚úÖ Ver sus propios tickets- CORS configurado con whitelist de or√≠genes

- ‚úÖ Agregar comentarios a sus tickets

- ‚úÖ Ver dashboard personal con estad√≠sticas1. **Creaci√≥n**: Empleado crea ticket describiendo el problema

- ‚úÖ Editar su perfil y cambiar contrase√±a

- ‚úÖ Recibir notificaciones2. **Notificaci√≥n**: Admin y t√©cnicos reciben notificaci√≥n en tiempo real‚îÇ                    PRESENTATION LAYER                        ‚îÇ- [Estructura del Proyecto](#estructura-del-proyecto)- [Estructura del Proyecto](#estructura-del-proyecto)



**Restricciones:**3. **Asignaci√≥n**: Admin o t√©cnico asigna el ticket

- ‚ùå No puede ver tickets de otros empleados

- ‚ùå No puede asignar o cambiar estados de tickets4. **Trabajo**: T√©cnico trabaja en la soluci√≥n**Comunicaci√≥n Segura**

- ‚ùå No puede acceder al panel de usuarios

- ‚ùå No puede ver tickets no relacionados con √©l5. **Actualizaci√≥n**: T√©cnico actualiza el estado y agrega comentarios



### T√©cnico (Role: 'tecnico')6. **Resoluci√≥n**: T√©cnico marca como resuelto- HTTPS enforced en producci√≥n‚îÇ  React 18 + Material-UI + Vite                              ‚îÇ

**Permisos:**

- ‚úÖ Ver todos los tickets asignados a √©l7. **Validaci√≥n**: Empleado valida la soluci√≥n

- ‚úÖ Cambiar estados de tickets asignados

- ‚úÖ Agregar comentarios p√∫blicos e internos8. **Cierre**: Ticket se cierra autom√°ticamente o manualmente- Headers de seguridad HTTP

- ‚úÖ Ver historial completo de tickets

- ‚úÖ Dashboard con m√©tricas de sus tickets

- ‚úÖ Recibir notificaciones de asignaciones

---- Encriptaci√≥n de datos en tr√°nsito‚îÇ  https://sgts-farmashaio-3pj5.vercel.app/                         ‚îÇ- [Base de Datos](#base-de-datos)- [Seguridad](#seguridad)

**Restricciones:**

- ‚ùå No puede crear tickets (solo resuelven)

- ‚ùå No puede asignarse tickets a s√≠ mismo

- ‚ùå No puede acceder al panel de usuarios## URLs del Sistema

- ‚ùå No puede modificar categor√≠as, prioridades o estados del sistema



### Administrador (Role: 'administrador')

**Permisos:****Producci√≥n****Base de Datos**‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

- ‚úÖ Acceso completo a todos los tickets

- ‚úÖ Crear, editar y eliminar usuarios- Frontend: https://farmatickets.vercel.app

- ‚úÖ Asignar y reasignar tickets a t√©cnicos

- ‚úÖ Cambiar cualquier estado de ticket- API: https://sgts-farmashaio-api.onrender.com- Backups autom√°ticos diarios

- ‚úÖ Ver dashboard avanzado con gr√°ficos anal√≠ticos

- ‚úÖ Gestionar categor√≠as, prioridades y estados- Base de Datos: Render PostgreSQL (privada)

- ‚úÖ Exportar reportes (futuro)

- ‚úÖ Ver logs de auditor√≠a completos- √çndices optimizados para performance                       ‚îÇ REST API (HTTPS)- [Seguridad](#seguridad)- [Licencia](#licencia)



**Sin restricciones** dentro del sistema.---



---- Foreign keys con integridad referencial



## üîÑ Flujo de Trabajo T√≠pico## Desarrollado por



### Escenario: Computadora no enciende‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê



#### 1. Empleado reporta problema**Julian Mench√©n**  

- Mar√≠a Garc√≠a (Empleado, Depto. Farmacia) accede a https://farmatickets.vercel.app

- Navega a "Crear Ticket" y completa:Desarrollador Full Stack  ---

  - **T√≠tulo**: "Computadora de caja 3 no enciende"

  - **Descripci√≥n**: "Al llegar esta ma√±ana, la computadora de la caja 3 no enciende. La luz del monitor est√° encendida pero la CPU no responde"2025

  - **Categor√≠a**: Hardware

  - **Prioridad**: Alta‚îÇ                    APPLICATION LAYER                         ‚îÇ- [Troubleshooting](#troubleshooting)

  - **Fecha l√≠mite**: 2024-10-16 14:00

- Hace clic en "Crear Ticket"---

- Sistema genera ticket **TKT-2024-000142**

## Estructura del Sistema

#### 2. Administrador recibe notificaci√≥n

- Juan P√©rez (Administrador TI) recibe:## Licencia

  - Notificaci√≥n en tiempo real (badge rojo en icono de campana)

  - Email autom√°tico: "Nuevo ticket creado - TKT-2024-000142"‚îÇ  Node.js + Express.js                                       ‚îÇ

- Abre el dashboard y ve el ticket en estado "Nuevo"

- Revisa prioridad y disponibilidad de t√©cnicosSistema propietario de FARMASHAIO.  



#### 3. Asignaci√≥n de t√©cnicoTodos los derechos reservados.### Base de Datos

- Juan asigna ticket a Carlos L√≥pez (T√©cnico)

- Sistema autom√°ticamente:

  - Cambia estado a "Asignado"‚îÇ  https://sgts-farmashaio-api.onrender.com                  ‚îÇ- [Roadmap](#roadmap)---

  - Registra cambio en `ticket_history`

  - Env√≠a notificaci√≥n WebSocket a Carlos**Tablas Principales:**

  - Env√≠a email a Carlos

  - Env√≠a notificaci√≥n a Mar√≠a informando asignaci√≥n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò



#### 4. T√©cnico trabaja en el ticket| Tabla | Funci√≥n |

- Carlos recibe notificaci√≥n y abre ticket

- Cambia estado a "En Progreso"|-------|---------|                       ‚îÇ SQL Queries- [Licencia](#licencia)

- Agrega comentario: "Revisando hardware en sitio, verificando conexiones"

- 30 minutos despu√©s agrega: "Problema identificado: cable de poder defectuoso. Reemplazando cable"| `users` | Usuarios del sistema con roles |

- Mar√≠a recibe notificaciones de cada actualizaci√≥n

| `tickets` | Tickets de soporte con estados |‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

#### 5. Resoluci√≥n

- Carlos cambia estado a "Resuelto"| `ticket_comments` | Comunicaci√≥n en tickets |

- Agrega comentario final: "Cable de poder reemplazado. Computadora funcionando correctamente. Favor confirmar"

- Sistema env√≠a notificaci√≥n a Mar√≠a| `ticket_history` | Auditor√≠a de cambios |‚îÇ                    DATA LAYER                                ‚îÇ## Arquitectura del Sistema

- Mar√≠a verifica, agrega comentario: "Confirmado, funciona perfectamente. Gracias!"

| `categories` | Categor√≠as de tickets |

#### 6. Cierre

- Juan o Carlos cambia estado a "Cerrado"| `priorities` | Niveles de prioridad |‚îÇ  PostgreSQL 14.x                                            ‚îÇ

- Sistema registra:

  - `resolved_at`: Timestamp de resoluci√≥n| `ticket_statuses` | Estados del workflow |

  - `actual_hours`: 1.5 horas

- Ticket cerrado y archivado| `notifications` | Notificaciones del usuario |‚îÇ  Render Managed Database                                    ‚îÇ---

- M√©tricas actualizadas en dashboard



#### 7. Analytics

- Dashboard de administrador muestra:### API Endpoints‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

  - Tiempo de resoluci√≥n: 1.5 horas

  - Estado: Cerrado ‚úÖ

  - Gr√°fico de prioridad actualizado

  - Categor√≠a Hardware incrementada en stats**Autenticaci√≥n**```### Stack Completo



---```



## üåê URLs del SistemaPOST   /api/auth/login              # Login de usuario



### Producci√≥nGET    /api/auth/profile            # Perfil actual

- **Frontend**: https://farmatickets.vercel.app

- **Backend API**: https://sgts-farmashaio-api.onrender.comPOST   /api/auth/change-password    # Cambio de contrase√±a---## Arquitectura del Sistema

- **Database**: Render PostgreSQL (interno)

```

### Endpoints Principales del API



#### Autenticaci√≥n

```**Gesti√≥n de Tickets**

POST   /api/auth/login              # Iniciar sesi√≥n

GET    /api/auth/profile            # Obtener perfil actual```## Caracter√≠sticas Principales| Capa | Tecnolog√≠a | Versi√≥n | Hosting |

PUT    /api/auth/change-password    # Cambiar contrase√±a

POST   /api/auth/logout             # Cerrar sesi√≥nGET    /api/tickets                 # Listar tickets

GET    /api/auth/verify-token       # Verificar validez de token

```POST   /api/tickets                 # Crear ticket



#### UsuariosGET    /api/tickets/:id             # Detalle de ticket

```

GET    /api/users                   # Listar usuarios (admin)PUT    /api/tickets/:id             # Actualizar ticket### Autenticaci√≥n y Autorizaci√≥n### Stack Completo|------|-----------|---------|---------|

POST   /api/users                   # Crear usuario (admin)

GET    /api/users/:id               # Obtener usuario espec√≠ficoPOST   /api/tickets/:id/assign      # Asignar t√©cnico

PUT    /api/users/:id               # Actualizar usuario (admin)

DELETE /api/users/:id               # Eliminar usuario (admin)POST   /api/tickets/:id/comments    # Agregar comentario- Login seguro con JWT (JSON Web Tokens)

GET    /api/users/technicians       # Listar t√©cnicos

GET    /api/users/stats             # Estad√≠sticas de usuario actual```

```

- Hash de contrase√±as con bcrypt (12 rounds)| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel |

#### Tickets

```**Administraci√≥n** (Solo Admin)

GET    /api/tickets                 # Listar tickets (filtrado por rol)

POST   /api/tickets                 # Crear ticket```- Gesti√≥n de roles: **Empleado**, **T√©cnico**, **Administrador**

GET    /api/tickets/:id             # Obtener ticket espec√≠fico

PUT    /api/tickets/:id             # Actualizar ticketGET    /api/users                   # Listar usuarios

DELETE /api/tickets/:id             # Eliminar ticket (admin)

PUT    /api/tickets/:id/assign      # Asignar t√©cnicoPOST   /api/users                   # Crear usuario- Protecci√≥n de rutas basada en roles| Capa | Tecnolog√≠a | Versi√≥n | Hosting || **Backend** | Node.js + Express | 18.x / 4.18 | Render |

PUT    /api/tickets/:id/status      # Cambiar estado

GET    /api/tickets/stats           # Estad√≠sticas globalesPUT    /api/users/:id               # Actualizar usuario

POST   /api/tickets/:id/comments    # Agregar comentario

```DELETE /api/users/:id               # Eliminar usuario- Sesiones persistentes con refresh tokens



#### Notificaciones```

```

GET    /api/notifications           # Listar notificaciones|------|-----------|---------|---------|| **Database** | PostgreSQL | 14.x | Render |

GET    /api/notifications/unread-count  # Contador no le√≠das

PUT    /api/notifications/:id/read  # Marcar como le√≠da---

PUT    /api/notifications/mark-all-read # Marcar todas le√≠das

DELETE /api/notifications/:id       # Eliminar notificaci√≥n### Gesti√≥n de Tickets

```

## Roles y Permisos

#### Cat√°logos

```- Creaci√≥n y asignaci√≥n autom√°tica de n√∫meros de ticket| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel || **Auth** | JWT + bcrypt | - | - |

GET    /api/categories              # Listar categor√≠as

GET    /api/priorities              # Listar prioridades### Empleado

GET    /api/ticket-statuses         # Listar estados

```- Sistema de categor√≠as configurables



### Health Check**Capacidades:**

```

GET    /health                      # Estado del servidor- Crear nuevos tickets de soporte- Niveles de prioridad (Baja, Media, Alta, Cr√≠tica)| **Backend** | Node.js + Express | 18.x / 4.18 | Render || **Email** | NodeMailer | 6.9 | - |

GET    /debug/users                 # Debug endpoint (solo desarrollo)

```- Ver y gestionar sus propios tickets



---- Agregar comentarios a sus tickets- Estados personalizables del ciclo de vida



## üìä Caracter√≠sticas T√©cnicas Destacadas- Recibir notificaciones de actualizaciones



### Dashboard con Gr√°ficos Anal√≠ticos- Asignaci√≥n inteligente a t√©cnicos| **Database** | PostgreSQL | 14.x | Render |

El dashboard de administrador incluye visualizaciones interactivas con **Recharts**:

**Limitaciones:**

1. **Pie Chart - Estado de Tickets**

   - Distribuci√≥n de tickets por estado (Nuevo, Asignado, En Progreso, etc.)- No puede ver tickets de otros empleados- Sistema de comentarios p√∫blicos e internos

   - Colores diferenciados por estado

   - Tooltip con cantidad y porcentaje- No puede cambiar estados de tickets



2. **Bar Chart - Tickets por Prioridad**- Sin acceso a panel de administraci√≥n- Historial completo de cambios con auditor√≠a| **Auth** | JWT + bcrypt | - | - |### Arquitectura de 3 Capas

   - Barras horizontales mostrando cantidad por prioridad

   - Colores seg√∫n criticidad (verde a rojo)

   - Hover con detalles

### T√©cnico

3. **Bar Chart - Tickets por Categor√≠a**

   - Comparaci√≥n de volumen entre categor√≠as

   - Identificaci√≥n r√°pida de √°reas m√°s problem√°ticas

**Capacidades:**### Gesti√≥n de Usuarios| **Email** | NodeMailer | 6.9 | - |

4. **Line Chart - L√≠nea de Tiempo**

   - Evoluci√≥n de tickets creados en √∫ltimos 7 d√≠as- Ver todos los tickets del sistema

   - Identificaci√≥n de picos de demanda

   - Ayuda a planificar recursos- Recibir asignaciones autom√°ticas- CRUD completo de usuarios (Solo administradores)



### Sistema de Notificaciones H√≠brido- Cambiar estados de tickets asignados



**Persistencia + Tiempo Real**:- Agregar comentarios p√∫blicos e internos- Gesti√≥n avanzada de roles y permisos```

- Notificaciones guardadas en PostgreSQL para historial

- WebSocket (Socket.IO) para entrega instant√°nea- Registrar tiempo y soluciones

- Al conectarse, se cargan notificaciones existentes de DB

- Nuevas notificaciones llegan via WebSocket sin refresh- Activaci√≥n y desactivaci√≥n de cuentas

- Badge num√©rico se actualiza autom√°ticamente

- Click en notificaci√≥n navega directamente al ticket**Limitaciones:**



**Tipos de Notificaciones**:- No puede gestionar usuarios- Perfiles personalizables### Arquitectura de 3 Capas‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

- `ticket:created` - Nuevo ticket creado

- `ticket:assigned` - Ticket asignado a t√©cnico- No puede eliminar tickets

- `ticket:updated` - Cambio en ticket

- `ticket:status_changed` - Cambio de estado- Sin acceso a configuraci√≥n global- Cambio de contrase√±a con validaci√≥n

- `ticket:commented` - Nuevo comentario



### Perfil de Usuario Completo

P√°gina de perfil incluye:### Administrador‚îÇ                    PRESENTATION LAYER                        ‚îÇ

- Avatar con iniciales generadas autom√°ticamente

- Informaci√≥n personal editable

- Dropdown de departamento con 15 opciones predefinidas

- Cambio de contrase√±a con validaci√≥n de seguridad**Capacidades:**### Sistema de Notificaciones

- Estad√≠sticas personalizadas:

  - Total de tickets creados- Acceso completo al sistema

  - Tickets resueltos

  - Tickets pendientes- Gesti√≥n de usuarios y roles- Notificaciones autom√°ticas por email```‚îÇ  React 18 + Material-UI + Vite                              ‚îÇ

  - Gr√°ficos de actividad

- Asignaci√≥n manual de tickets

### Responsive Design

- Layout adaptativo con Material-UI Grid y Flexbox- Configuraci√≥n de categor√≠as y prioridades- Notificaciones en tiempo real en la aplicaci√≥n

- Drawer lateral colapsable en m√≥vil

- Tablas con scroll horizontal en pantallas peque√±as- Acceso a reportes y estad√≠sticas

- Formularios optimizados para touch

- Media queries para tablet y mobile- Configuraci√≥n del sistema- Plantillas de email HTML profesionales‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ  https://sgts-farmashaio.vercel.app                         ‚îÇ



---



## üìà M√©tricas y KPIs**Sin restricciones**- Configuraci√≥n de preferencias de notificaci√≥n



El sistema calcula autom√°ticamente:



### M√©tricas de Tickets---- Historial de notificaciones enviadas‚îÇ                    PRESENTATION LAYER                        ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

- Tiempo promedio de primera respuesta

- Tiempo promedio de resoluci√≥n

- Tickets creados vs resueltos (por periodo)

- Distribuci√≥n por prioridad## Componentes del Frontend

- Distribuci√≥n por categor√≠a

- Distribuci√≥n por estado

- Tasa de resoluci√≥n (%)

### P√°ginas Principales---‚îÇ  React 18 + Material-UI + Vite                              ‚îÇ                       ‚îÇ REST API (HTTPS)

### M√©tricas de Usuarios

- Tickets creados por usuario

- Tickets asignados por t√©cnico

- Tickets resueltos por t√©cnico- **Dashboard** - Vista general con estad√≠sticas

- Tickets activos por t√©cnico

- Carga de trabajo actual- **Tickets** - Lista y filtrado de tickets



### M√©tricas del Sistema- **Detalle de Ticket** - Informaci√≥n completa y comentarios## Tecnolog√≠as Utilizadas‚îÇ  https://sgts-farmashaio.vercel.app                         ‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

- Total de usuarios activos

- Total de tickets en sistema- **Crear Ticket** - Formulario de nueva solicitud

- Tickets creados √∫ltimos 7 d√≠as

- Tickets por departamento- **Usuarios** - Gesti√≥n de usuarios (Admin)

- Categor√≠as m√°s frecuentes

- **Notificaciones** - Centro de notificaciones

---

- **Perfil** - Configuraci√≥n del usuario### Frontend‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ                    APPLICATION LAYER                         ‚îÇ

## üöÄ Estado del Proyecto



**Versi√≥n Actual**: 1.0.0 (MVP Completo)  

**Estado**: ‚úÖ Producci√≥n - Desplegado y funcional  ### Tecnolog√≠as Frontend- **React 18.2** - Librer√≠a UI con hooks

**√öltima Actualizaci√≥n**: Octubre 2024



### Completado ‚úÖ

- [x] Autenticaci√≥n JWT con roles- **React 18.2** - Hooks y Context API- **Vite 4.4** - Build tool de √∫ltima generaci√≥n                       ‚îÇ REST API (HTTPS)‚îÇ  Node.js + Express.js                                       ‚îÇ

- [x] CRUD completo de usuarios (admin)

- [x] CRUD completo de tickets- **Material-UI 5.14** - Design system

- [x] Sistema de comentarios

- [x] Asignaci√≥n de tickets a t√©cnicos- **React Router 6** - Navegaci√≥n SPA- **Material-UI 5.14** - Componentes UI

- [x] Cambio de estados con workflow

- [x] Notificaciones en tiempo real (WebSocket)- **Axios** - Cliente HTTP

- [x] Notificaciones por email

- [x] Dashboard con gr√°ficos anal√≠ticos- **Vite** - Build tool optimizado- **React Router 6** - Navegaci√≥n SPA‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ  https://sgts-farmashaio-api.onrender.com                  ‚îÇ

- [x] Perfil de usuario con estad√≠sticas

- [x] Sistema de roles y permisos

- [x] Historial de cambios completo

- [x] Filtros y b√∫squeda avanzada---- **Axios** - Cliente HTTP

- [x] Responsive design

- [x] Rate limiting y seguridad

- [x] Deploy en Render + Vercel

- [x] Base de datos PostgreSQL en producci√≥n## Informaci√≥n T√©cnica- **Context API** - State management‚îÇ                    APPLICATION LAYER                         ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò



### Roadmap Futuro üîÆ

- [ ] Adjuntar archivos a tickets

- [ ] Exportaci√≥n de reportes en PDF/Excel### Performance

- [ ] Sistema de SLA (Service Level Agreement)

- [ ] Integraci√≥n con Active Directory/LDAP

- [ ] API p√∫blica con documentaci√≥n Swagger

- [ ] Aplicaci√≥n m√≥vil nativa (React Native)- **Frontend:** Edge deployment en Vercel### Backend‚îÇ  Node.js + Express.js                                       ‚îÇ                       ‚îÇ SQL Queries

- [ ] Chatbot de soporte con IA

- [ ] Panel de m√©tricas avanzadas (BI)- **Backend:** Auto-scaling en Render

- [ ] Sistema de encuestas de satisfacci√≥n

- [ ] Integraci√≥n con Microsoft Teams/Slack- **Database:** Connection pooling optimizado- **Node.js 18.x** - Runtime JavaScript



---- **Cache:** Estrategias de cache en m√∫ltiples capas



## üë®‚Äçüíª Informaci√≥n del Desarrollador- **Express 4.18** - Framework web‚îÇ  https://sgts-farmashaio-api.onrender.com                  ‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê



**Proyecto desarrollado para**: FARMASHAIO  ### Monitoreo

**Desarrollado por**: Julian-Enable  

**Repositorio**: https://github.com/Julian-Enable/sgts-farmashaio  - **PostgreSQL 14.x** - Base de datos relacional

**Licencia**: MIT  

**A√±o**: 2024- Logs centralizados en Render



---- Error tracking en tiempo real- **JWT** - Autenticaci√≥n stateless‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ                    DATA LAYER                                ‚îÇ



## üìû Soporte- M√©tricas de performance



Para soporte t√©cnico o consultas sobre el sistema:- Uptime monitoring- **bcrypt** - Hash de contrase√±as



- **Email**: admin@farmashaio.com

- **Sistema**: Crear ticket dentro de la plataforma

- **Documentaci√≥n**: Este README### Mantenimiento- **NodeMailer** - Env√≠o de emails                       ‚îÇ SQL Queries‚îÇ  PostgreSQL 14.x                                            ‚îÇ



---



## üìÑ Licencia- Auto-deploy desde GitHub- **Winston** - Logging system



Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.- Backups diarios autom√°ticos



---- Migraciones de base de datos versionadas‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ  Render Managed Database                                    ‚îÇ



**SGTS FARMASHAIO** - *Transformando el soporte t√©cnico en FARMASHAIO* üöÄ- Pruebas automatizadas


### DevOps & Deployment

---

- **Git & GitHub** - Control de versiones‚îÇ                    DATA LAYER                                ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

## Soporte y Contacto

- **Vercel** - Hosting frontend

**Departamento de TI - FARMASHAIO**

- **Render** - Hosting backend y database‚îÇ  PostgreSQL 14.x                                            ‚îÇ```

Para soporte t√©cnico o consultas sobre el sistema, contactar al departamento de TI interno.

- **ESLint** - Linter JavaScript

**Repositorio:** [https://github.com/Julian-Enable/sgts-farmashaio](https://github.com/Julian-Enable/sgts-farmashaio)

- **Prettier** - Code formatter‚îÇ  Render Managed Database                                    ‚îÇ

---



## Tecnolog√≠as y Herramientas

---‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò---

**Lenguajes:**

- JavaScript (ES6+)

- SQL (PostgreSQL)

- HTML5 / CSS3## Instalaci√≥n Local```



**Frameworks y Librer√≠as:**

- React 18

- Express.js### Prerrequisitos## Caracter√≠sticas Principales

- Material-UI



**Base de Datos:**

- PostgreSQL 14.x```bash---

- Migrations con scripts SQL

node --version  # >= 18.0.0

**DevOps:**

- Git & GitHubnpm --version   # >= 9.0.0### Autenticaci√≥n y Autorizaci√≥n

- Vercel (Frontend hosting)

- Render (Backend & Database hosting)psql --version  # >= 12.0

- ESLint + Prettier (Code quality)

```## Caracter√≠sticas Principales- Login seguro con JWT (JSON Web Tokens)

**Seguridad:**

- JWT (JSON Web Tokens)

- bcrypt (Password hashing)

- Helmet.js (HTTP headers)### 1. Clonar Repositorio- Hash de contrase√±as con bcrypt (12 rounds)

- CORS configuration



---

```bash### Autenticaci√≥n y Autorizaci√≥n- Gesti√≥n de roles: **Empleado**, **T√©cnico**, **Administrador**

## Licencia

git clone https://github.com/Julian-Enable/sgts-farmashaio.git

MIT License - Copyright (c) 2025 FARMASHAIO

cd sgts-farmashaio- Login seguro con JWT (JSON Web Tokens)- Protecci√≥n de rutas basada en roles

---

```

<div align="center">

- Hash de contrase√±as con bcrypt (12 rounds)- Sesiones persistentes con refresh tokens

**SGTS FARMASHAIO v1.0.0**

### 2. Configurar Base de Datos

Sistema de Gesti√≥n de Tickets de Soporte TI

- Gesti√≥n de roles: **Empleado**, **T√©cnico**, **Administrador**

Desarrollado por **Julian Merch√°n**

```bash

*Enterprise Solution - Built with React, Node.js & PostgreSQL*

# Crear base de datos PostgreSQL- Protecci√≥n de rutas basada en roles### Gesti√≥n de Tickets

</div>

createdb sgts_farmashaio

- Sesiones persistentes con refresh tokens- Creaci√≥n y asignaci√≥n autom√°tica de n√∫meros de ticket

# Ejecutar schema

psql sgts_farmashaio < database/schema.sql- Sistema de categor√≠as configurables



# Cargar datos iniciales### Gesti√≥n de Tickets- Niveles de prioridad (Baja, Media, Alta, Cr√≠tica)

psql sgts_farmashaio < database/seed.sql

```- Creaci√≥n y asignaci√≥n autom√°tica de n√∫meros de ticket- Estados personalizables del ciclo de vida



### 3. Configurar Backend- Sistema de categor√≠as configurables- Asignaci√≥n inteligente a t√©cnicos



```bash- Niveles de prioridad (Baja, Media, Alta, Cr√≠tica)- Sistema de comentarios p√∫blicos e internos

cd backend

npm install- Estados personalizables del ciclo de vida- Historial completo de cambios con auditor√≠a



# Crear archivo .env- Asignaci√≥n inteligente a t√©cnicos

cat > .env << EOF

NODE_ENV=development- Sistema de comentarios p√∫blicos e internos### Gesti√≥n de Usuarios

PORT=5000

DATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaio- Historial completo de cambios con auditor√≠a- CRUD completo de usuarios (Solo administradores)

JWT_SECRET=your-secret-key-min-32-characters

CORS_ORIGINS=http://localhost:5173- Gesti√≥n avanzada de roles y permisos

EOF

### Gesti√≥n de Usuarios- Activaci√≥n y desactivaci√≥n de cuentas

# Iniciar servidor de desarrollo

npm run dev- CRUD completo de usuarios (Solo administradores)- Perfiles personalizables

```

- Gesti√≥n avanzada de roles y permisos- Cambio de contrase√±a con validaci√≥n

El servidor estar√° disponible en `http://localhost:5000`

- Activaci√≥n y desactivaci√≥n de cuentas

### 4. Configurar Frontend

- Perfiles personalizables### Sistema de Notificaciones

```bash

cd frontend- Cambio de contrase√±a con validaci√≥n- Notificaciones autom√°ticas por email

npm install

- Notificaciones en tiempo real en la aplicaci√≥n

# Crear archivo .env

cat > .env << EOF### Sistema de Notificaciones- Plantillas de email HTML profesionales

VITE_API_BASE_URL=http://localhost:5000/api

EOF- Notificaciones autom√°ticas por email- Configuraci√≥n de preferencias de notificaci√≥n



# Iniciar servidor de desarrollo- Notificaciones en tiempo real en la aplicaci√≥n- Historial de notificaciones enviadas

npm run dev

```- Plantillas de email HTML profesionales



El frontend estar√° disponible en `http://localhost:5173`- Configuraci√≥n de preferencias de notificaci√≥n---



### 5. Credenciales de Prueba- Historial de notificaciones enviadas



| Rol | Email | Contrase√±a | Descripci√≥n |## Tecnolog√≠as Utilizadas

|-----|-------|-----------|-------------|

| **Admin** | admin@farmashaio.com | admin123 | Acceso completo al sistema |---

| **T√©cnico** | tecnico1@farmashaio.com | tecnico123 | Gesti√≥n de tickets |

| **Empleado** | empleado1@farmashaio.com | empleado123 | Creaci√≥n de tickets |### Frontend



---## Tecnolog√≠as Utilizadas- **React 18.2** - Librer√≠a UI con hooks



## Deployment en Producci√≥n- **Vite 4.4** - Build tool de √∫ltima generaci√≥n



### Stack de Hosting Gratuito### Frontend- **Material-UI 5.14** - Componentes UI



| Servicio | Proveedor | Plan | Recursos |- **React 18.2** - Librer√≠a UI con hooks- **React Router 6** - Navegaci√≥n SPA

|----------|-----------|------|----------|

| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |- **Vite 4.4** - Build tool de √∫ltima generaci√≥n- **Axios** - Cliente HTTP

| **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |

| **Frontend** | Vercel | Free | Edge Network Global |- **Material-UI 5.14** - Componentes UI- **Context API** - State management



**Costo total:** $0/mes- **React Router 6** - Navegaci√≥n SPA



### Gu√≠a de Deployment- **Axios** - Cliente HTTP### Backend



#### 1. Preparar Repositorio- **Context API** - State management- **Node.js 18.x** - Runtime JavaScript



```bash- **Express 4.18** - Framework web

# Verificar que todo est√° commiteado

git status### Backend- **PostgreSQL 14.x** - Base de datos relacional



# Push a GitHub- **Node.js 18.x** - Runtime JavaScript- **JWT** - Autenticaci√≥n stateless

git push origin main

```- **Express 4.18** - Framework web- **bcrypt** - Hash de contrase√±as



#### 2. PostgreSQL Database en Render- **PostgreSQL 14.x** - Base de datos relacional- **NodeMailer** - Env√≠o de emails



**a) Crear cuenta y conectar GitHub**- **JWT** - Autenticaci√≥n stateless- **Winston** - Logging system

- Visitar [render.com](https://render.com)

- Sign up with GitHub- **bcrypt** - Hash de contrase√±as

- Autorizar acceso al repositorio

- **NodeMailer** - Env√≠o de emails### DevOps & Deployment

**b) Crear PostgreSQL Database**

```- **Winston** - Logging system- **Git & GitHub** - Control de versiones

Dashboard ‚Üí New ‚Üí PostgreSQL

Name: sgts-farmashaio-db- **Vercel** - Hosting frontend

Database: sgts_farmashaio

User: sgts_user### DevOps & Deployment- **Render** - Hosting backend y database

Region: Oregon (US West)

Plan: Free- **Git & GitHub** - Control de versiones- **ESLint** - Linter JavaScript

```

- **Vercel** - Hosting frontend- **Prettier** - Code formatter

**c) Ejecutar Schema**

- Copiar contenido de `database/schema.sql`- **Render** - Hosting backend y database

- Dashboard ‚Üí Connect ‚Üí PSQL Command

- Pegar y ejecutar- **ESLint** - Linter JavaScript---

- Repetir con `database/seed.sql`

- **Prettier** - Code formatter

**d) Guardar DATABASE_URL**

```## Instalaci√≥n Local

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio

```---



#### 3. Backend API en Render### Prerrequisitos



**a) Crear Web Service**## Instalaci√≥n Local

```

Dashboard ‚Üí New ‚Üí Web Service```bash

Repository: Julian-Enable/sgts-farmashaio

Name: sgts-farmashaio-api### Prerrequisitosnode --version  # >= 18.0.0

Region: Oregon (US West)

Branch: mainnpm --version   # >= 9.0.0

Root Directory: backend

Runtime: Node```bashpsql --version  # >= 12.0

Build Command: npm install

Start Command: npm startnode --version  # >= 18.0.0```

Plan: Free

```npm --version   # >= 9.0.0



**b) Configurar Variables de Entorno**psql --version  # >= 12.0### 1. Clonar Repositorio

```env

NODE_ENV=production```

DATABASE_URL=<Copiar Internal Database URL>

JWT_SECRET=<Generar string aleatorio de 32+ caracteres>```bash

CORS_ORIGINS=https://sgts-farmashaio-3pj5.vercel.app/

PORT=10000### 1. Clonar Repositoriogit clone https://github.com/Julian-Enable/sgts-farmashaio.git

```

cd sgts-farmashaio

**c) Conectar Database**

- En el Web Service: Environment ‚Üí Add Environment Group```bash```

- Seleccionar la base de datos creada

git clone https://github.com/Julian-Enable/sgts-farmashaio.git

**d) Deploy**

- Click "Create Web Service"cd sgts-farmashaio### 2. Configurar Base de Datos

- Esperar ~5 minutos para el primer deploy

- Verificar: `https://sgts-farmashaio-api.onrender.com/health````



#### 4. Frontend en Vercel```bash



**a) Importar Proyecto**### 2. Configurar Base de Datos# Crear base de datos PostgreSQL

```

Dashboard ‚Üí Add New ‚Üí Projectcreatedb sgts_farmashaio

Import Git Repository: Julian-Enable/sgts-farmashaio

Framework Preset: Vite```bash

Root Directory: frontend

Build Command: npm run build# Crear base de datos PostgreSQL# Ejecutar schema

Output Directory: dist

Install Command: npm installcreatedb sgts_farmashaiopsql sgts_farmashaio < database/schema.sql

```



**b) Configurar Variables de Entorno**

```env# Ejecutar schema# Cargar datos iniciales

VITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api

```psql sgts_farmashaio < database/schema.sqlpsql sgts_farmashaio < database/seed.sql



**c) Deploy**```

- Click "Deploy"

- Esperar ~2 minutos# Cargar datos iniciales

- Verificar: `https://sgts-farmashaio-3pj5.vercel.app/`

psql sgts_farmashaio < database/seed.sql### 3. Configurar Backend

#### 5. Verificaci√≥n Post-Deployment

```

**Checklist de Validaci√≥n:**

```bash

- [ ] Database responde correctamente

  ```bash### 3. Configurar Backendcd backend

  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"

  ```npm install



- [ ] Backend API funcional```bash

  ```bash

  curl https://sgts-farmashaio-api.onrender.com/healthcd backend# Crear archivo .env

  # Expected: {"status": "ok"}

  ```npm installcat > .env << EOF



- [ ] Frontend accesibleNODE_ENV=development

  - Abrir `https://sgts-farmashaio-3pj5.vercel.app/`

  - Verificar que carga sin errores# Crear archivo .envPORT=5000



- [ ] Login funcionalcat > .env << EOFDATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaio

  - Email: `admin@farmashaio.com`

  - Password: `admin123`NODE_ENV=developmentJWT_SECRET=your-secret-key-min-32-characters

  - Verificar acceso al dashboard

PORT=5000CORS_ORIGINS=http://localhost:5173

- [ ] CORS configurado

  - Verificar que las llamadas API funcionanDATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaioEOF

  - Revisar Network tab (sin errores CORS)

JWT_SECRET=your-secret-key-min-32-characters

### Actualizaci√≥n Continua

CORS_ORIGINS=http://localhost:5173# Iniciar servidor de desarrollo

Ambos servicios est√°n configurados con **auto-deploy**:

EOFnpm run dev

```bash

git add .```

git commit -m "feat: nueva funcionalidad"

git push origin main# Iniciar servidor de desarrollo

```

npm run devEl servidor estar√° disponible en `http://localhost:5000`

- **Vercel**: Deploy autom√°tico en ~2 minutos

- **Render**: Deploy autom√°tico en ~5 minutos```



---### 4. Configurar Frontend



## API ReferenceEl servidor estar√° disponible en `http://localhost:5000`



### Base URL```bash

```

Development: http://localhost:5000/api### 4. Configurar Frontendcd frontend

Production:  https://sgts-farmashaio-api.onrender.com/api

```npm install



### Autenticaci√≥n```bash



Todos los endpoints (excepto `/auth/login`) requieren token JWT en el header:cd frontend# Crear archivo .env

```http

Authorization: Bearer <token>npm installcat > .env << EOF

```

VITE_API_BASE_URL=http://localhost:5000/api

#### Endpoints de Autenticaci√≥n

# Crear archivo .envEOF

```http

POST   /api/auth/logincat > .env << EOF

POST   /api/auth/logout

GET    /api/auth/profileVITE_API_BASE_URL=http://localhost:5000/api# Iniciar servidor de desarrollo

PUT    /api/auth/profile

POST   /api/auth/change-passwordEOFnpm run dev

```

```

**Ejemplo: Login**

```bash# Iniciar servidor de desarrollo

curl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \

  -H "Content-Type: application/json" \npm run devEl frontend estar√° disponible en `http://localhost:5173`

  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'

``````



### Gesti√≥n de Usuarios### 5. Credenciales de Prueba



```httpEl frontend estar√° disponible en `http://localhost:5173`

GET    /api/users              # Listar todos los usuarios

POST   /api/users              # Crear nuevo usuario| Rol | Email | Contrase√±a | Descripci√≥n |

GET    /api/users/:id          # Obtener usuario espec√≠fico

PUT    /api/users/:id          # Actualizar usuario### 5. Credenciales de Prueba|-----|-------|-----------|-------------|

DELETE /api/users/:id          # Eliminar usuario

GET    /api/users/technicians  # Listar solo t√©cnicos| **Admin** | `admin@farmashaio.com` | `admin123` | Acceso completo al sistema |

```

| Rol | Email | Contrase√±a | Descripci√≥n || **T√©cnico** | `tecnico1@farmashaio.com` | `tecnico123` | Gesti√≥n de tickets |

### Gesti√≥n de Tickets

|-----|-------|-----------|-------------|| **Empleado** | `empleado1@farmashaio.com` | `empleado123` | Creaci√≥n de tickets |

```http

GET    /api/tickets                  # Listar tickets (con filtros)| **Admin** | `admin@farmashaio.com` | `admin123` | Acceso completo al sistema |

POST   /api/tickets                  # Crear nuevo ticket

GET    /api/tickets/:id              # Obtener ticket espec√≠fico| **T√©cnico** | `tecnico1@farmashaio.com` | `tecnico123` | Gesti√≥n de tickets |---

PUT    /api/tickets/:id              # Actualizar ticket

DELETE /api/tickets/:id              # Eliminar ticket| **Empleado** | `empleado1@farmashaio.com` | `empleado123` | Creaci√≥n de tickets |

POST   /api/tickets/:id/assign       # Asignar t√©cnico

PATCH  /api/tickets/:id/status       # Cambiar estado## Deployment en Producci√≥n

POST   /api/tickets/:id/comments     # Agregar comentario

GET    /api/tickets/:id/history      # Obtener historial---

```

### Stack de Hosting Gratuito

**Ejemplo: Crear Ticket**

```bash## Deployment en Producci√≥n

curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \

  -H "Authorization: Bearer <token>" \| Servicio | Proveedor | Plan | Recursos |

  -H "Content-Type: application/json" \

  -d '{### Stack de Hosting Gratuito|----------|-----------|------|----------|

    "title": "Error en sistema de inventario",

    "description": "El sistema no permite actualizar existencias",| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |

    "category_id": 1,

    "priority_id": 3| Servicio | Proveedor | Plan | Recursos || **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |

  }'

```|----------|-----------|------|----------|| **Frontend** | Vercel | Free | Edge Network Global |



### Notificaciones| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |



```http| **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |**Costo total:** $0/mes

GET    /api/notifications           # Listar notificaciones del usuario

PUT    /api/notifications/:id/read  # Marcar como le√≠da| **Frontend** | Vercel | Free | Edge Network Global |

DELETE /api/notifications/:id       # Eliminar notificaci√≥n

```### Gu√≠a de Deployment



### Cat√°logos**Costo total:** $0/mes



```http#### 1. Preparar Repositorio

GET    /api/categories              # Listar categor√≠as

GET    /api/priorities              # Listar prioridades### Gu√≠a de Deployment

GET    /api/statuses                # Listar estados

``````bash



### C√≥digos de Respuesta#### 1. Preparar Repositorio# Verificar que todo est√° commiteado



| C√≥digo | Descripci√≥n |git status

|--------|-------------|

| `200` | OK - Solicitud exitosa |```bash

| `201` | Created - Recurso creado |

| `400` | Bad Request - Datos inv√°lidos |# Verificar que todo est√° commiteado# Push a GitHub

| `401` | Unauthorized - Token inv√°lido o faltante |

| `403` | Forbidden - Sin permisos |git statusgit push origin main

| `404` | Not Found - Recurso no encontrado |

| `500` | Internal Server Error - Error del servidor |```



---# Push a GitHub



## Estructura del Proyectogit push origin main#### 2. PostgreSQL Database en Render



``````

sgts-farmashaio/

‚îú‚îÄ‚îÄ frontend/**a) Crear cuenta y conectar GitHub**

‚îÇ   ‚îú‚îÄ‚îÄ src/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/              # Im√°genes y recursos est√°ticos#### 2. PostgreSQL Database en Render- Visitar [render.com](https://render.com)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Componentes reutilizables

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Componentes de autenticaci√≥n- Sign up with GitHub

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/         # Componentes compartidos

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tickets/        # Componentes de tickets**a) Crear cuenta y conectar GitHub**- Autorizar acceso al repositorio

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/          # Componentes de usuarios

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/            # Context API (AuthContext)- Visitar [render.com](https://render.com)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # P√°ginas de la aplicaci√≥n

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # Servicios API (axios)- Sign up with GitHub**b) Crear PostgreSQL Database**

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme/              # Configuraci√≥n Material-UI

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Funciones de utilidad- Autorizar acceso al repositorio```

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx             # Componente ra√≠z

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.jsx            # Entry pointDashboard ‚Üí New ‚Üí PostgreSQL

‚îÇ   ‚îú‚îÄ‚îÄ public/                 # Archivos p√∫blicos

‚îÇ   ‚îú‚îÄ‚îÄ index.html              # HTML template**b) Crear PostgreSQL Database**Name: sgts-farmashaio-db

‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js          # Configuraci√≥n Vite

‚îÇ   ‚îî‚îÄ‚îÄ package.json```Database: sgts_farmashaio

‚îÇ

‚îú‚îÄ‚îÄ backend/Dashboard ‚Üí New ‚Üí PostgreSQLUser: sgts_user

‚îÇ   ‚îú‚îÄ‚îÄ src/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/             # Configuraci√≥n (database, jwt)Name: sgts-farmashaio-dbRegion: Oregon (US West)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Controladores de rutas

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware (auth, validation)Database: sgts_farmashaioPlan: Free

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de datos

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/             # Definici√≥n de rutasUser: sgts_user```

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # L√≥gica de negocio

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utilidades (logger, email)Region: Oregon (US West)

‚îÇ   ‚îú‚îÄ‚îÄ scripts/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate.js          # Script de migraci√≥n DBPlan: Free**c) Ejecutar Schema**

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js             # Script de datos iniciales

‚îÇ   ‚îú‚îÄ‚îÄ server.js               # Entry point del servidor```- Copiar contenido de `database/schema.sql`

‚îÇ   ‚îî‚îÄ‚îÄ package.json

‚îÇ- Dashboard ‚Üí Connect ‚Üí PSQL Command

‚îú‚îÄ‚îÄ database/

‚îÇ   ‚îú‚îÄ‚îÄ schema.sql              # Schema de PostgreSQL**c) Ejecutar Schema**- Pegar y ejecutar

‚îÇ   ‚îî‚îÄ‚îÄ seed.sql                # Datos iniciales

‚îÇ- Copiar contenido de `database/schema.sql`- Repetir con `database/seed.sql`

‚îú‚îÄ‚îÄ .github/

‚îÇ   ‚îî‚îÄ‚îÄ copilot-instructions.md # Instrucciones del proyecto- Dashboard ‚Üí Connect ‚Üí PSQL Command

‚îÇ

‚îú‚îÄ‚îÄ render.yaml                 # Configuraci√≥n Render- Pegar y ejecutar**d) Guardar DATABASE_URL**

‚îú‚îÄ‚îÄ vercel.json                 # Configuraci√≥n Vercel

‚îî‚îÄ‚îÄ README.md- Repetir con `database/seed.sql````

```

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio

---

**d) Guardar DATABASE_URL**```

## Base de Datos

```

### Schema Principal

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio#### 3. Backend API en Render

**Tablas del Sistema:**

```

| Tabla | Descripci√≥n | Campos Principales |

|-------|-------------|-------------------|**a) Crear Web Service**

| `users` | Usuarios del sistema | id, username, email, password_hash, role_id |

| `roles` | Roles de usuario | id, name (Empleado, T√©cnico, Admin) |#### 3. Backend API en Render```

| `tickets` | Tickets de soporte | id, ticket_number, title, description, status_id |

| `ticket_comments` | Comentarios | id, ticket_id, user_id, comment, is_internal |Dashboard ‚Üí New ‚Üí Web Service

| `ticket_history` | Auditor√≠a de cambios | id, ticket_id, changed_by, field_changed, old_value, new_value |

| `categories` | Categor√≠as de tickets | id, name (Hardware, Software, Red, etc.) |**a) Crear Web Service**Repository: Julian-Enable/sgts-farmashaio

| `priorities` | Niveles de prioridad | id, name (Baja, Media, Alta, Cr√≠tica) |

| `ticket_statuses` | Estados del ticket | id, name (Abierto, En Proceso, Resuelto, Cerrado) |```Name: sgts-farmashaio-api

| `notifications` | Notificaciones | id, user_id, type, message, is_read |

Dashboard ‚Üí New ‚Üí Web ServiceRegion: Oregon (US West)

### Diagrama de Relaciones

Repository: Julian-Enable/sgts-farmashaioBranch: main

```

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îêName: sgts-farmashaio-apiRoot Directory: backend

‚îÇ    roles    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ    users     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ tickets     ‚îÇ

‚îÇ             ‚îÇ 1:N  ‚îÇ              ‚îÇ 1:N  ‚îÇ             ‚îÇRegion: Oregon (US West)Runtime: Node

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                            ‚îÇ                      ‚îÇBranch: mainBuild Command: npm install

                            ‚îÇ 1:N                  ‚îÇ N:1

                            ‚îÇ                      ‚îÇRoot Directory: backendStart Command: npm start

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

                     ‚îÇnotifications  ‚îÇ      ‚îÇcategories  ‚îÇRuntime: NodePlan: Free

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                                                   ‚îÇBuild Command: npm install```

                                                   ‚îÇ N:1

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îêStart Command: npm start

‚îÇpriorities   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   tickets    ‚îÇ      ‚îÇ statuses   ‚îÇ

‚îÇ             ‚îÇ N:1  ‚îÇ              ‚îÇ      ‚îÇ            ‚îÇPlan: Free**b) Configurar Variables de Entorno**

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                            ‚îÇ``````env

                            ‚îÇ 1:N

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îêNODE_ENV=production

                     ‚îÇticket_comments ‚îÇ

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò**b) Configurar Variables de Entorno**DATABASE_URL=<Copiar Internal Database URL>

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

                     ‚îÇticket_history  ‚îÇ```envJWT_SECRET=<Generar string aleatorio de 32+ caracteres>

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

```NODE_ENV=productionCORS_ORIGINS=https://sgts-farmashaio-3pj5.vercel.app/



### √çndices y Optimizaci√≥nDATABASE_URL=<Copiar Internal Database URL>PORT=10000



- Primary keys en todas las tablasJWT_SECRET=<Generar string aleatorio de 32+ caracteres>```

- Foreign keys con `ON DELETE CASCADE`

- √çndices en campos de b√∫squeda frecuenteCORS_ORIGINS=https://sgts-farmashaio.vercel.app

- Timestamps autom√°ticos (`created_at`, `updated_at`)

PORT=10000**c) Conectar Database**

---

```- En el Web Service: Environment ‚Üí Add Environment Group

## Seguridad

- Seleccionar la base de datos creada

### Implementaciones de Seguridad

**c) Conectar Database**

**Autenticaci√≥n**

- Tokens JWT con expiraci√≥n configurable- En el Web Service: Environment ‚Üí Add Environment Group**d) Deploy**

- Refresh tokens para sesiones prolongadas

- Hashing de contrase√±as con bcrypt (12 rounds)- Seleccionar la base de datos creada- Click "Create Web Service"

- Validaci√≥n de fuerza de contrase√±a

- Esperar ~5 minutos para el primer deploy

**Autorizaci√≥n**

- Control de acceso basado en roles (RBAC)**d) Deploy**- Verificar: `https://sgts-farmashaio-api.onrender.com/health`

- Middleware de verificaci√≥n de permisos

- Protecci√≥n de endpoints seg√∫n rol de usuario- Click "Create Web Service"



**Validaci√≥n de Datos**- Esperar ~5 minutos para el primer deploy#### 4. Frontend en Vercel

- Sanitizaci√≥n de inputs del usuario

- Validaci√≥n de tipos de datos- Verificar: `https://sgts-farmashaio-api.onrender.com/health`

- Prevenci√≥n de SQL injection

- Prevenci√≥n de XSS (Cross-Site Scripting)**a) Importar Proyecto**



**Comunicaci√≥n**#### 4. Frontend en Vercel```

- HTTPS enforced en producci√≥n

- CORS configurado con whitelist de or√≠genesDashboard ‚Üí Add New ‚Üí Project

- Headers de seguridad HTTP

**a) Importar Proyecto**Import Git Repository: Julian-Enable/sgts-farmashaio

**Base de Datos**

- Consultas parametrizadas (prepared statements)```Framework Preset: Vite

- √çndices en campos sensibles

- Backups autom√°ticos diarios (Render)Dashboard ‚Üí Add New ‚Üí ProjectRoot Directory: frontend



### Variables de Entorno SensiblesImport Git Repository: Julian-Enable/sgts-farmashaioBuild Command: npm run build



**Backend (.env)**Framework Preset: ViteOutput Directory: dist

```env

JWT_SECRET=         # M√≠nimo 32 caracteres aleatoriosRoot Directory: frontendInstall Command: npm install

DATABASE_URL=       # Nunca compartir en p√∫blico

EMAIL_PASSWORD=     # App password de emailBuild Command: npm run build```

```

Output Directory: dist

**Frontend (.env)**

```envInstall Command: npm install**b) Configurar Variables de Entorno**

VITE_API_BASE_URL=  # URL p√∫blica del backend

`````````env



**Importante:** Los archivos `.env` est√°n en `.gitignore` y nunca se suben al repositorio.VITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api



---**b) Configurar Variables de Entorno**```



## Scripts Disponibles```env



### BackendVITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api**c) Deploy**



```bash```- Click "Deploy"

npm start          # Iniciar servidor de producci√≥n

npm run dev        # Servidor de desarrollo con nodemon- Esperar ~2 minutos

npm run migrate    # Ejecutar migraciones de base de datos

npm run seed       # Cargar datos iniciales**c) Deploy**- Verificar: `https://sgts-farmashaio.vercel.app`

npm test           # Ejecutar suite de tests

npm run lint       # Ejecutar ESLint- Click "Deploy"

```

- Esperar ~2 minutos#### 5. Verificaci√≥n Post-Deployment

### Frontend

- Verificar: `https://sgts-farmashaio.vercel.app`

```bash

npm run dev        # Servidor de desarrollo (puerto 5173)**Checklist de Validaci√≥n:**

npm run build      # Build de producci√≥n (carpeta dist/)

npm run preview    # Preview del build de producci√≥n#### 5. Verificaci√≥n Post-Deployment

npm run lint       # Ejecutar ESLint

npm run format     # Formatear c√≥digo con Prettier- [ ] Database responde correctamente

```

**Checklist de Validaci√≥n:**  ```bash

---

  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"

## Funcionalidades por Rol

- [ ] Database responde correctamente  ```

### Empleado (User)

  ```bash

**Permisos:**

- Crear tickets de soporte  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"- [ ] Backend API funcional

- Ver y gestionar sus propios tickets

- Agregar comentarios a sus tickets  ```  ```bash

- Actualizar su perfil personal

- Recibir notificaciones de cambios  curl https://sgts-farmashaio-api.onrender.com/health



**Restricciones:**- [ ] Backend API funcional  # Expected: {"status": "ok"}

- No puede ver tickets de otros usuarios

- No puede cambiar estados de tickets  ```bash  ```

- No puede acceder al panel de administraci√≥n

  curl https://sgts-farmashaio-api.onrender.com/health

### T√©cnico (Technician)

  # Expected: {"status": "ok"}- [ ] Frontend accesible

**Permisos:**

- Ver todos los tickets del sistema  ```  - Abrir `https://sgts-farmashaio.vercel.app`

- Recibir asignaciones autom√°ticas

- Cambiar estados de tickets asignados  - Verificar que carga sin errores

- Agregar comentarios p√∫blicos e internos

- Registrar tiempo trabajado- [ ] Frontend accesible

- Actualizar detalles t√©cnicos

  - Abrir `https://sgts-farmashaio.vercel.app`- [ ] Login funcional

**Restricciones:**

- No puede gestionar usuarios  - Verificar que carga sin errores  - Email: `admin@farmashaio.com`

- No puede acceder a configuraci√≥n del sistema

- No puede eliminar tickets  - Password: `admin123`



### Administrador (Admin)- [ ] Login funcional  - Verificar acceso al dashboard



**Permisos:**  - Email: `admin@farmashaio.com`

- Acceso completo al sistema

- CRUD de usuarios y roles  - Password: `admin123`- [ ] CORS configurado

- Asignaci√≥n manual de tickets

- Ver reportes y estad√≠sticas  - Verificar acceso al dashboard  - Verificar que las llamadas API funcionan

- Configuraci√≥n del sistema

- Gesti√≥n de categor√≠as y prioridades  - Revisar Network tab (sin errores CORS)

- Acceso a logs del sistema

- [ ] CORS configurado

**Sin restricciones**

  - Verificar que las llamadas API funcionan### Actualizaci√≥n Continua

---

  - Revisar Network tab (sin errores CORS)

## Troubleshooting

Ambos servicios est√°n configurados con **auto-deploy**:

### Problemas Comunes

### Actualizaci√≥n Continua

#### 1. Error de Conexi√≥n a Base de Datos

```bash

**S√≠ntoma:** `Error: connect ECONNREFUSED` o `Database connection failed`

Ambos servicios est√°n configurados con **auto-deploy**:git add .

**Soluci√≥n:**

```bashgit commit -m "feat: nueva funcionalidad"

# Verificar que PostgreSQL est√° corriendo

pg_isready```bashgit push origin main



# Verificar variables de entornogit add .```

echo $DATABASE_URL

git commit -m "feat: nueva funcionalidad"

# Probar conexi√≥n manual

psql $DATABASE_URL -c "SELECT version();"git push origin main- **Vercel**: Deploy autom√°tico en ~2 minutos

```

```- **Render**: Deploy autom√°tico en ~5 minutos

#### 2. Error de CORS



**S√≠ntoma:** `Access to fetch blocked by CORS policy`

- **Vercel**: Deploy autom√°tico en ~2 minutos---

**Soluci√≥n:**

- Verificar que `CORS_ORIGINS` en backend incluye la URL del frontend- **Render**: Deploy autom√°tico en ~5 minutos## API Reference

- En desarrollo: `http://localhost:5173`

- En producci√≥n: `https://sgts-farmashaio.vercel.app`



#### 3. Token JWT Inv√°lido---### Base URL



**S√≠ntoma:** `401 Unauthorized` en todas las peticiones```



**Soluci√≥n:**## API ReferenceDevelopment: http://localhost:5000/api

```javascript

// Limpiar localStorage en el navegadorProduction:  https://sgts-farmashaio-api.onrender.com/api

localStorage.clear();

### Base URL```

// Verificar que JWT_SECRET es el mismo en todos los ambientes

``````



#### 4. Error 500 en RenderDevelopment: http://localhost:5000/api### Autenticaci√≥n



**S√≠ntoma:** Backend no responde despu√©s del deployProduction:  https://sgts-farmashaio-api.onrender.com/api



**Soluci√≥n:**```Todos los endpoints (excepto `/auth/login`) requieren token JWT en el header:

1. Revisar logs: Dashboard ‚Üí Logs

2. Verificar variables de entorno configuradas```http

3. Confirmar que `DATABASE_URL` est√° conectado

4. Verificar que el puerto es `10000` o `process.env.PORT`### Autenticaci√≥nAuthorization: Bearer <token>



#### 5. Build Fallido en Vercel```



**S√≠ntoma:** `Build failed` durante el deployTodos los endpoints (excepto `/auth/login`) requieren token JWT en el header:



**Soluci√≥n:**```http#### Endpoints de Autenticaci√≥n

```bash

# Verificar build localmenteAuthorization: Bearer <token>

cd frontend

npm run build``````http



# Revisar que todas las dependencias est√°n en package.jsonPOST   /api/auth/login

npm install

#### Endpoints de Autenticaci√≥nPOST   /api/auth/logout

# Verificar que VITE_API_BASE_URL est√° configurado

```GET    /api/auth/profile



### Logs y Debugging```httpPUT    /api/auth/profile



**Backend Logs (Render):**POST   /api/auth/loginPOST   /api/auth/change-password

```bash

# Ver logs en tiempo realPOST   /api/auth/logout```

Dashboard ‚Üí Service ‚Üí Logs ‚Üí Live Logs

```GET    /api/auth/profile



**Frontend Logs (Vercel):**PUT    /api/auth/profile**Ejemplo: Login**

```bash

# Ver logs de buildPOST   /api/auth/change-password```bash

Dashboard ‚Üí Project ‚Üí Deployments ‚Üí [Select Deployment] ‚Üí Logs

``````curl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \



**Base de Datos (Render):**  -H "Content-Type: application/json" \

```bash

# Conectarse v√≠a PSQL**Ejemplo: Login**  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'

psql [Internal Database URL]

```bash```

# Ver tablas

\dtcurl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \



# Ver usuarios  -H "Content-Type: application/json" \### Gesti√≥n de Usuarios

SELECT * FROM users;

```  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'



---``````http



## RoadmapGET    /api/users              # Listar todos los usuarios



### Version 1.1 (Q1 2026)### Gesti√≥n de UsuariosPOST   /api/users              # Crear nuevo usuario

- [ ] Dashboard con gr√°ficos interactivos (Chart.js)

- [ ] Sistema de archivos adjuntos (AWS S3 / Cloudinary)GET    /api/users/:id          # Obtener usuario espec√≠fico

- [ ] Filtros avanzados de b√∫squeda

- [ ] Exportaci√≥n de reportes (PDF, Excel)```httpPUT    /api/users/:id          # Actualizar usuario



### Version 1.2 (Q2 2026)GET    /api/users              # Listar todos los usuariosDELETE /api/users/:id          # Eliminar usuario

- [ ] Notificaciones push en tiempo real (WebSockets)

- [ ] Sistema de SLA autom√°tico con alertasPOST   /api/users              # Crear nuevo usuarioGET    /api/users/technicians  # Listar solo t√©cnicos

- [ ] Integraci√≥n con Microsoft Teams

- [ ] API p√∫blica con documentaci√≥n SwaggerGET    /api/users/:id          # Obtener usuario espec√≠fico```



### Version 2.0 (Q3 2026)PUT    /api/users/:id          # Actualizar usuario

- [ ] App m√≥vil nativa (React Native)

- [ ] Integraci√≥n con WhatsApp BusinessDELETE /api/users/:id          # Eliminar usuario### Gesti√≥n de Tickets

- [ ] Sistema de conocimiento base (FAQ)

- [ ] Analytics avanzados con BIGET    /api/users/technicians  # Listar solo t√©cnicos



---``````http



## Contribuci√≥nGET    /api/tickets                  # Listar tickets (con filtros)



### C√≥mo Contribuir### Gesti√≥n de TicketsPOST   /api/tickets                  # Crear nuevo ticket



1. Fork el proyectoGET    /api/tickets/:id              # Obtener ticket espec√≠fico

2. Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)

3. Commit cambios (`git commit -m 'feat: agregar nueva funcionalidad'`)```httpPUT    /api/tickets/:id              # Actualizar ticket

4. Push a la rama (`git push origin feature/nueva-funcionalidad`)

5. Abrir Pull RequestGET    /api/tickets                  # Listar tickets (con filtros)DELETE /api/tickets/:id              # Eliminar ticket



### Convenciones de C√≥digoPOST   /api/tickets                  # Crear nuevo ticketPOST   /api/tickets/:id/assign       # Asignar t√©cnico



**Commits (Conventional Commits):**GET    /api/tickets/:id              # Obtener ticket espec√≠ficoPATCH  /api/tickets/:id/status       # Cambiar estado

```

feat: nueva funcionalidadPUT    /api/tickets/:id              # Actualizar ticketPOST   /api/tickets/:id/comments     # Agregar comentario

fix: correcci√≥n de bug

docs: cambios en documentaci√≥nDELETE /api/tickets/:id              # Eliminar ticketGET    /api/tickets/:id/history      # Obtener historial

style: formato, espacios, etc

refactor: refactorizaci√≥n de c√≥digoPOST   /api/tickets/:id/assign       # Asignar t√©cnico```

test: agregar o actualizar tests

chore: tareas de mantenimientoPATCH  /api/tickets/:id/status       # Cambiar estado

```

POST   /api/tickets/:id/comments     # Agregar comentario**Ejemplo: Crear Ticket**

**C√≥digo:**

- ESLint configurado para JavaScript/ReactGET    /api/tickets/:id/history      # Obtener historial```bash

- Prettier para formato consistente

- 2 espacios de indentaci√≥n```curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \

- Nombres descriptivos para variables y funciones

  -H "Authorization: Bearer <token>" \

---

**Ejemplo: Crear Ticket**  -H "Content-Type: application/json" \

## Licencia

```bash  -d '{

Este proyecto est√° licenciado bajo la **MIT License**.

curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \    "title": "Error en sistema de inventario",

```

MIT License  -H "Authorization: Bearer <token>" \    "description": "El sistema no permite actualizar existencias",



Copyright (c) 2025 FARMASHAIO  -H "Content-Type: application/json" \    "category_id": 1,



Permission is hereby granted, free of charge, to any person obtaining a copy  -d '{    "priority_id": 3

of this software and associated documentation files (the "Software"), to deal

in the Software without restriction, including without limitation the rights    "title": "Error en sistema de inventario",  }'

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell

copies of the Software, and to permit persons to whom the Software is    "description": "El sistema no permite actualizar existencias",```

furnished to do so, subject to the following conditions:

    "category_id": 1,

The above copyright notice and this permission notice shall be included in all

copies or substantial portions of the Software.    "priority_id": 3### Notificaciones



THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  }'

IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,

FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE``````http

AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER

LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,GET    /api/notifications           # Listar notificaciones del usuario

OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

SOFTWARE.### NotificacionesPUT    /api/notifications/:id/read  # Marcar como le√≠da

```

DELETE /api/notifications/:id       # Eliminar notificaci√≥n

---

```http```

## Contacto

GET    /api/notifications           # Listar notificaciones del usuario

**FARMASHAIO - Departamento de TI**

PUT    /api/notifications/:id/read  # Marcar como le√≠da### Cat√°logos

- **Website:** [https://sgts-farmashaio.vercel.app](https://sgts-farmashaio.vercel.app)

- **Repository:** [https://github.com/Julian-Enable/sgts-farmashaio](https://github.com/Julian-Enable/sgts-farmashaio)DELETE /api/notifications/:id       # Eliminar notificaci√≥n

- **Issues:** [GitHub Issues](https://github.com/Julian-Enable/sgts-farmashaio/issues)

``````http

---

GET    /api/categories              # Listar categor√≠as

<div align="center">

### Cat√°logosGET    /api/priorities              # Listar prioridades

**SGTS FARMASHAIO v1.0.0**

GET    /api/statuses                # Listar estados

Sistema de Gesti√≥n de Tickets de Soporte TI

```http```

Desarrollado por **Julian Merch√°n**

GET    /api/categories              # Listar categor√≠as

*Built with React, Node.js & PostgreSQL*

GET    /api/priorities              # Listar prioridades### C√≥digos de Respuesta

</div>

GET    /api/statuses                # Listar estados

```| C√≥digo | Descripci√≥n |

|--------|-------------|

### C√≥digos de Respuesta| `200` | OK - Solicitud exitosa |

| `201` | Created - Recurso creado |

| C√≥digo | Descripci√≥n || `400` | Bad Request - Datos inv√°lidos |

|--------|-------------|| `401` | Unauthorized - Token inv√°lido o faltante |

| `200` | OK - Solicitud exitosa || `403` | Forbidden - Sin permisos |

| `201` | Created - Recurso creado || `404` | Not Found - Recurso no encontrado |

| `400` | Bad Request - Datos inv√°lidos || `500` | Internal Server Error - Error del servidor |

| `401` | Unauthorized - Token inv√°lido o faltante |

| `403` | Forbidden - Sin permisos |---

| `404` | Not Found - Recurso no encontrado |

| `500` | Internal Server Error - Error del servidor |## Estructura del Proyecto



---```

sgts-farmashaio/

## Estructura del Proyecto‚îú‚îÄ‚îÄ frontend/

‚îÇ   ‚îú‚îÄ‚îÄ src/

```‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/              # Im√°genes y recursos est√°ticos

sgts-farmashaio/‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Componentes reutilizables

‚îú‚îÄ‚îÄ frontend/‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Componentes de autenticaci√≥n

‚îÇ   ‚îú‚îÄ‚îÄ src/‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/         # Componentes compartidos

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/              # Im√°genes y recursos est√°ticos‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tickets/        # Componentes de tickets

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Componentes reutilizables‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/          # Componentes de usuarios

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Componentes de autenticaci√≥n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/            # Context API (AuthContext)

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/         # Componentes compartidos‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # P√°ginas de la aplicaci√≥n

‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tickets/        # Componentes de tickets‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # Servicios API (axios)

‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/          # Componentes de usuarios‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme/              # Configuraci√≥n Material-UI

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/            # Context API (AuthContext)‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Funciones de utilidad

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # P√°ginas de la aplicaci√≥n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx             # Componente ra√≠z

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # Servicios API (axios)‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.jsx            # Entry point

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme/              # Configuraci√≥n Material-UI‚îÇ   ‚îú‚îÄ‚îÄ public/                 # Archivos p√∫blicos

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Funciones de utilidad‚îÇ   ‚îú‚îÄ‚îÄ index.html              # HTML template

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx             # Componente ra√≠z‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js          # Configuraci√≥n Vite

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.jsx            # Entry point‚îÇ   ‚îî‚îÄ‚îÄ package.json

‚îÇ   ‚îú‚îÄ‚îÄ public/                 # Archivos p√∫blicos‚îÇ

‚îÇ   ‚îú‚îÄ‚îÄ index.html              # HTML template‚îú‚îÄ‚îÄ backend/

‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js          # Configuraci√≥n Vite‚îÇ   ‚îú‚îÄ‚îÄ src/

‚îÇ   ‚îî‚îÄ‚îÄ package.json‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/             # Configuraci√≥n (database, jwt)

‚îÇ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Controladores de rutas

‚îú‚îÄ‚îÄ backend/‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware (auth, validation)

‚îÇ   ‚îú‚îÄ‚îÄ src/‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de datos

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/             # Configuraci√≥n (database, jwt)‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/             # Definici√≥n de rutas

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Controladores de rutas‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # L√≥gica de negocio

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware (auth, validation)‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utilidades (logger, email)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de datos‚îÇ   ‚îú‚îÄ‚îÄ scripts/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/             # Definici√≥n de rutas‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate.js          # Script de migraci√≥n DB

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # L√≥gica de negocio‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js             # Script de datos iniciales

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utilidades (logger, email)‚îÇ   ‚îú‚îÄ‚îÄ server.js               # Entry point del servidor

‚îÇ   ‚îú‚îÄ‚îÄ scripts/‚îÇ   ‚îî‚îÄ‚îÄ package.json

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate.js          # Script de migraci√≥n DB‚îÇ

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js             # Script de datos iniciales‚îú‚îÄ‚îÄ database/

‚îÇ   ‚îú‚îÄ‚îÄ server.js               # Entry point del servidor‚îÇ   ‚îú‚îÄ‚îÄ schema.sql              # Schema de PostgreSQL

‚îÇ   ‚îî‚îÄ‚îÄ package.json‚îÇ   ‚îî‚îÄ‚îÄ seed.sql                # Datos iniciales

‚îÇ‚îÇ

‚îú‚îÄ‚îÄ database/‚îú‚îÄ‚îÄ .github/

‚îÇ   ‚îú‚îÄ‚îÄ schema.sql              # Schema de PostgreSQL‚îÇ   ‚îî‚îÄ‚îÄ copilot-instructions.md # Instrucciones del proyecto

‚îÇ   ‚îî‚îÄ‚îÄ seed.sql                # Datos iniciales‚îÇ

‚îÇ‚îú‚îÄ‚îÄ render.yaml                 # Configuraci√≥n Render

‚îú‚îÄ‚îÄ .github/‚îú‚îÄ‚îÄ vercel.json                 # Configuraci√≥n Vercel

‚îÇ   ‚îî‚îÄ‚îÄ copilot-instructions.md # Instrucciones del proyecto‚îî‚îÄ‚îÄ README.md

‚îÇ```

‚îú‚îÄ‚îÄ render.yaml                 # Configuraci√≥n Render

‚îú‚îÄ‚îÄ vercel.json                 # Configuraci√≥n Vercel---

‚îî‚îÄ‚îÄ README.md

```## Seguridad



---### Implementaciones de Seguridad



## Base de Datos**Autenticaci√≥n**

- Tokens JWT con expiraci√≥n configurable

### Schema Principal- Refresh tokens para sesiones prolongadas

- Hashing de contrase√±as con bcrypt (12 rounds)

**Tablas del Sistema:**- Validaci√≥n de fuerza de contrase√±a



| Tabla | Descripci√≥n | Campos Principales |**Autorizaci√≥n**

|-------|-------------|-------------------|- Control de acceso basado en roles (RBAC)

| `users` | Usuarios del sistema | id, username, email, password_hash, role_id |- Middleware de verificaci√≥n de permisos

| `roles` | Roles de usuario | id, name (Empleado, T√©cnico, Admin) |- Protecci√≥n de endpoints seg√∫n rol de usuario

| `tickets` | Tickets de soporte | id, ticket_number, title, description, status_id |

| `ticket_comments` | Comentarios | id, ticket_id, user_id, comment, is_internal |**Validaci√≥n de Datos**

| `ticket_history` | Auditor√≠a de cambios | id, ticket_id, changed_by, field_changed, old_value, new_value |- Sanitizaci√≥n de inputs del usuario

| `categories` | Categor√≠as de tickets | id, name (Hardware, Software, Red, etc.) |- Validaci√≥n de tipos de datos

| `priorities` | Niveles de prioridad | id, name (Baja, Media, Alta, Cr√≠tica) |- Prevenci√≥n de SQL injection

| `ticket_statuses` | Estados del ticket | id, name (Abierto, En Proceso, Resuelto, Cerrado) |- Prevenci√≥n de XSS (Cross-Site Scripting)

| `notifications` | Notificaciones | id, user_id, type, message, is_read |

**Comunicaci√≥n**

### Diagrama de Relaciones- HTTPS enforced en producci√≥n

- CORS configurado con whitelist de or√≠genes

```- Headers de seguridad HTTP

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ    roles    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ    users     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ tickets     ‚îÇ**Base de Datos**

‚îÇ             ‚îÇ 1:N  ‚îÇ              ‚îÇ 1:N  ‚îÇ             ‚îÇ- Consultas parametrizadas (prepared statements)

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò- √çndices en campos sensibles

                            ‚îÇ                      ‚îÇ- Backups autom√°ticos diarios (Render)

                            ‚îÇ 1:N                  ‚îÇ N:1

                            ‚îÇ                      ‚îÇ### Variables de Entorno Sensibles

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

                     ‚îÇnotifications  ‚îÇ      ‚îÇcategories  ‚îÇ**Backend (.env)**

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò```env

                                                   ‚îÇJWT_SECRET=         # M√≠nimo 32 caracteres aleatorios

                                                   ‚îÇ N:1DATABASE_URL=       # Nunca compartir en p√∫blico

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îêEMAIL_PASSWORD=     # App password de email

‚îÇpriorities   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   tickets    ‚îÇ      ‚îÇ statuses   ‚îÇ```

‚îÇ             ‚îÇ N:1  ‚îÇ              ‚îÇ      ‚îÇ            ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò**Frontend (.env)**

                            ‚îÇ```env

                            ‚îÇ 1:NVITE_API_BASE_URL=  # URL p√∫blica del backend

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê```

                     ‚îÇticket_comments ‚îÇ

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò**Importante:** Los archivos `.env` est√°n en `.gitignore` y nunca se suben al repositorio.

                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

                     ‚îÇticket_history  ‚îÇ---

                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

```## Scripts Disponibles



### √çndices y Optimizaci√≥n### Backend



- Primary keys en todas las tablas```bash

- Foreign keys con `ON DELETE CASCADE`npm start          # Iniciar servidor de producci√≥n

- √çndices en campos de b√∫squeda frecuentenpm run dev        # Servidor de desarrollo con nodemon

- Timestamps autom√°ticos (`created_at`, `updated_at`)npm run migrate    # Ejecutar migraciones de base de datos

npm run seed       # Cargar datos iniciales

---npm test           # Ejecutar suite de tests

npm run lint       # Ejecutar ESLint

## Seguridad```



### Implementaciones de Seguridad### Frontend



**Autenticaci√≥n**```bash

- Tokens JWT con expiraci√≥n configurablenpm run dev        # Servidor de desarrollo (puerto 5173)

- Refresh tokens para sesiones prolongadasnpm run build      # Build de producci√≥n (carpeta dist/)

- Hashing de contrase√±as con bcrypt (12 rounds)npm run preview    # Preview del build de producci√≥n

- Validaci√≥n de fuerza de contrase√±anpm run lint       # Ejecutar ESLint

npm run format     # Formatear c√≥digo con Prettier

**Autorizaci√≥n**```

- Control de acceso basado en roles (RBAC)

- Middleware de verificaci√≥n de permisos---

- Protecci√≥n de endpoints seg√∫n rol de usuario

## Funcionalidades por Rol

**Validaci√≥n de Datos**

- Sanitizaci√≥n de inputs del usuario### Empleado (User)

- Validaci√≥n de tipos de datos

- Prevenci√≥n de SQL injection**Permisos:**

- Prevenci√≥n de XSS (Cross-Site Scripting)- Crear tickets de soporte

- Ver y gestionar sus propios tickets

**Comunicaci√≥n**- Agregar comentarios a sus tickets

- HTTPS enforced en producci√≥n- Actualizar su perfil personal

- CORS configurado con whitelist de or√≠genes- Recibir notificaciones de cambios

- Headers de seguridad HTTP

**Restricciones:**

**Base de Datos**- No puede ver tickets de otros usuarios

- Consultas parametrizadas (prepared statements)- No puede cambiar estados de tickets

- √çndices en campos sensibles- No puede acceder al panel de administraci√≥n

- Backups autom√°ticos diarios (Render)

### T√©cnico (Technician)

### Variables de Entorno Sensibles

**Permisos:**

**Backend (.env)**- Ver todos los tickets del sistema

```env- Recibir asignaciones autom√°ticas

JWT_SECRET=         # M√≠nimo 32 caracteres aleatorios- Cambiar estados de tickets asignados

DATABASE_URL=       # Nunca compartir en p√∫blico- Agregar comentarios p√∫blicos e internos

EMAIL_PASSWORD=     # App password de email- Registrar tiempo trabajado

```- Actualizar detalles t√©cnicos



**Frontend (.env)****Restricciones:**

```env- No puede gestionar usuarios

VITE_API_BASE_URL=  # URL p√∫blica del backend- No puede acceder a configuraci√≥n del sistema

```- No puede eliminar tickets



**Importante:** Los archivos `.env` est√°n en `.gitignore` y nunca se suben al repositorio.### Administrador (Admin)



---**Permisos:**

- Acceso completo al sistema

## Scripts Disponibles- CRUD de usuarios y roles

- Asignaci√≥n manual de tickets

### Backend- Ver reportes y estad√≠sticas

- Configuraci√≥n del sistema

```bash- Gesti√≥n de categor√≠as y prioridades

npm start          # Iniciar servidor de producci√≥n- Acceso a logs del sistema

npm run dev        # Servidor de desarrollo con nodemon

npm run migrate    # Ejecutar migraciones de base de datos**Sin restricciones**

npm run seed       # Cargar datos iniciales

npm test           # Ejecutar suite de tests---

npm run lint       # Ejecutar ESLint

```## üîß API Endpoints



### Frontend### Autenticaci√≥n

```

```bashPOST   /api/auth/login           # Iniciar sesi√≥n

npm run dev        # Servidor de desarrollo (puerto 5173)POST   /api/auth/logout          # Cerrar sesi√≥n

npm run build      # Build de producci√≥n (carpeta dist/)GET    /api/auth/profile         # Obtener perfil

npm run preview    # Preview del build de producci√≥nPUT    /api/auth/profile         # Actualizar perfil

npm run lint       # Ejecutar ESLintPOST   /api/auth/change-password # Cambiar contrase√±a

npm run format     # Formatear c√≥digo con Prettier```

```

### Usuarios

---```

GET    /api/users               # Listar usuarios

## Funcionalidades por RolPOST   /api/users               # Crear usuario

GET    /api/users/:id           # Obtener usuario

### Empleado (User)PUT    /api/users/:id           # Actualizar usuario

DELETE /api/users/:id           # Eliminar usuario

**Permisos:**GET    /api/users/technicians   # Listar t√©cnicos

- Crear tickets de soporte```

- Ver y gestionar sus propios tickets

- Agregar comentarios a sus tickets### Tickets

- Actualizar su perfil personal```

- Recibir notificaciones de cambiosGET    /api/tickets             # Listar tickets

POST   /api/tickets             # Crear ticket

**Restricciones:**GET    /api/tickets/:id         # Obtener ticket

- No puede ver tickets de otros usuariosPUT    /api/tickets/:id         # Actualizar ticket

- No puede cambiar estados de ticketsPOST   /api/tickets/:id/assign  # Asignar ticket

- No puede acceder al panel de administraci√≥nPATCH  /api/tickets/:id/status  # Cambiar estado

POST   /api/tickets/:id/comments # Agregar comentario

### T√©cnico (Technician)```



**Permisos:**## üåü Pr√≥ximas Mejoras

- Ver todos los tickets del sistema

- Recibir asignaciones autom√°ticas- [ ] Dashboard con gr√°ficos y m√©tricas

- Cambiar estados de tickets asignados- [ ] Sistema de archivos adjuntos

- Agregar comentarios p√∫blicos e internos- [ ] Notificaciones push en tiempo real

- Registrar tiempo trabajado- [ ] App m√≥vil nativa

- Actualizar detalles t√©cnicos- [ ] Integraci√≥n con WhatsApp

- [ ] Sistema de SLA autom√°tico

**Restricciones:**- [ ] Reportes avanzados y analytics

- No puede gestionar usuarios

- No puede acceder a configuraci√≥n del sistema## üêõ Soluci√≥n de Problemas

- No puede eliminar tickets

### Error de Conexi√≥n a Base de Datos

### Administrador (Admin)```bash

# Verificar variables de entorno

**Permisos:**echo $DATABASE_URL

- Acceso completo al sistema

- CRUD de usuarios y roles# Probar conexi√≥n

- Asignaci√≥n manual de ticketspsql $DATABASE_URL -c "SELECT version();"

- Ver reportes y estad√≠sticas```

- Configuraci√≥n del sistema

- Gesti√≥n de categor√≠as y prioridades### Error de CORS

- Acceso a logs del sistemaVerificar que `CLIENT_URL` en el backend coincida con el dominio del frontend.



**Sin restricciones**### Error 500 en Render

Revisar logs en el dashboard de Render y verificar variables de entorno.

---

## üìû Soporte

## Troubleshooting

Para soporte t√©cnico:

### Problemas Comunes- üìß **Email**: soporte@farmashaio.com

- üêõ **Issues**: [GitHub Issues](https://github.com/tu-usuario/sgts-farmashaio/issues)

#### 1. Error de Conexi√≥n a Base de Datos- üìñ **Wiki**: [Documentaci√≥n completa](https://github.com/tu-usuario/sgts-farmashaio/wiki)



**S√≠ntoma:** `Error: connect ECONNREFUSED` o `Database connection failed`## üìÑ Licencia



**Soluci√≥n:**Este proyecto est√° licenciado bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para m√°s detalles.

```bash

# Verificar que PostgreSQL est√° corriendo---

pg_isready

**Desarrollado con ‚ù§Ô∏è para FARMASHAIO**  

# Verificar variables de entorno*Sistema de Gesti√≥n de Tickets de Soporte TI v1.0.0*#


