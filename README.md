# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO# SGTS FARMASHAIO



**Sistema de GestiÃ³n de Tickets de Soporte TI** - Plataforma web empresarial para FARMASHAIO



[![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)](https://github.com/Julian-Enable/sgts-farmashaio)**Sistema de GestiÃ³n de Tickets de Soporte TI**

[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

[![Node](https://img.shields.io/badge/node-18.x-brightgreen.svg)](https://nodejs.org)

[![React](https://img.shields.io/badge/react-18.2.0-61dafb.svg)](https://reactjs.org)

Plataforma empresarial integral para la gestiÃ³n y seguimiento de solicitudes de soporte tÃ©cnico en FARMASHAIO.## Sistema de GestiÃ³n de Tickets de Soporte TI

---



## ğŸ“‹ DescripciÃ³n

---

SGTS FARMASHAIO es una aplicaciÃ³n web full-stack diseÃ±ada para centralizar y gestionar eficientemente las solicitudes de soporte tÃ©cnico en FARMASHAIO. El sistema permite a los empleados reportar incidencias tecnolÃ³gicas, al personal tÃ©cnico resolver problemas de manera organizada, y a los administradores supervisar toda la operaciÃ³n de TI.



### ProblemÃ¡tica que Resuelve

## DescripciÃ³n[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)## Sistema de GestiÃ³n de Tickets de Soporte TI

- **DesorganizaciÃ³n**: Solicitudes de soporte dispersas en emails, WhatsApp o llamadas telefÃ³nicas

- **PÃ©rdida de informaciÃ³n**: Sin registro centralizado de incidencias y soluciones

- **Falta de seguimiento**: Dificultad para monitorear el estado de tickets en tiempo real

- **Ineficiencia**: AsignaciÃ³n manual y no optimizada de tÃ©cnicosSGTS FARMASHAIO es una soluciÃ³n completa para la administraciÃ³n centralizada de tickets de soporte tÃ©cnico, diseÃ±ada para optimizar la comunicaciÃ³n entre empleados y el departamento de TI. El sistema proporciona un flujo de trabajo estructurado desde la creaciÃ³n hasta la resoluciÃ³n de incidencias, con seguimiento detallado y notificaciones en tiempo real.[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- **Falta de mÃ©tricas**: Ausencia de datos para mejorar tiempos de respuesta y calidad del servicio



### SoluciÃ³n Implementada

---[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)

Sistema web completo con arquitectura moderna que proporciona:



- âœ… **Panel unificado** para crear, asignar y resolver tickets

- âœ… **Notificaciones en tiempo real** mediante WebSockets## CaracterÃ­sticas Principales[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)

- âœ… **Dashboard analytics** con mÃ©tricas visuales de rendimiento

- âœ… **Sistema de roles y permisos** (Empleado, TÃ©cnico, Administrador)

- âœ… **GestiÃ³n de usuarios** con control de acceso

- âœ… **Historial completo** de cada ticket con comentarios y cambios de estado### GestiÃ³n de Tickets[![Status](https://img.shields.io/badge/Status-Production-success?style=flat-square)]()[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)### Sistema de GestiÃ³n de Tickets de Soporte TI### Sistema de GestiÃ³n de Tickets de Soporte TI

- âœ… **Notificaciones por email** automÃ¡ticas

- âœ… **Interfaz responsive** para uso en desktop, tablet y mÃ³vil- **CreaciÃ³n rÃ¡pida** de solicitudes con formularios intuitivos



---- **NumeraciÃ³n automÃ¡tica** con formato #TKT-YYYY-NNNNNN



## ğŸ¯ Funcionalidades Principales- **CategorizaciÃ³n** por tipo de problema (Hardware, Software, Red, etc.)



### Para Empleados- **PriorizaciÃ³n** en 5 niveles (Muy Baja, Baja, Media, Alta, CrÃ­tica)Sistema empresarial de gestiÃ³n de tickets de soporte tÃ©cnico para FARMASHAIO. Arquitectura de 3 capas con autenticaciÃ³n JWT, gestiÃ³n de roles y notificaciones en tiempo real.[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)

- Crear tickets de soporte con tÃ­tulo, descripciÃ³n, categorÃ­a y prioridad

- Ver todos sus tickets creados con filtros por estado y prioridad- **Estados del ciclo de vida** (Nuevo, Asignado, En Progreso, Resuelto, Cerrado)

- Agregar comentarios y seguimiento a sus tickets

- Recibir notificaciones cuando un tÃ©cnico es asignado o el ticket cambia de estado- **AsignaciÃ³n inteligente** a tÃ©cnicos especializados

- Visualizar estadÃ­sticas personales de tickets

- **Historial completo** de cambios y acciones

### Para TÃ©cnicos

- Visualizar todos los tickets asignados en un dashboard organizado**AplicaciÃ³n:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- Aceptar, trabajar y resolver tickets

- Cambiar estados de tickets: Nuevo â†’ Asignado â†’ En Progreso â†’ Resuelto â†’ Cerrado### Sistema de AutenticaciÃ³n

- Agregar comentarios internos y pÃºblicos

- Ver histÃ³rico completo de cada ticket- **AutenticaciÃ³n segura** con JSON Web Tokens (JWT)

- Recibir notificaciones en tiempo real cuando se les asigna un nuevo ticket

- **EncriptaciÃ³n de contraseÃ±as** con bcrypt (12 rounds)

### Para Administradores

- Dashboard con mÃ©tricas avanzadas y grÃ¡ficos:- **Sesiones persistentes** con renovaciÃ³n automÃ¡tica---[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)

  - DistribuciÃ³n de tickets por estado (Pie Chart)

  - Tickets por prioridad (Bar Chart)- **Cierre de sesiÃ³n** seguro en todos los dispositivos

  - Tickets por categorÃ­a (Bar Chart)

  - LÃ­nea de tiempo de creaciÃ³n de tickets (Line Chart)

- GestiÃ³n completa de usuarios (crear, editar, desactivar)

- Asignar y reasignar tickets a tÃ©cnicos### Control de Acceso por Roles

- Ver todas las operaciones del sistema

- Gestionar categorÃ­as, prioridades y estados de tickets- **Empleado**: Crear tickets y ver sus propias solicitudes## DescripciÃ³n[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)[![GitHub release](https://img.shields.io/github/v/release/Julian-Enable/sgts-farmashaio?style=flat-square)](https://github.com/Julian-Enable/sgts-farmashaio/releases)

- Exportar reportes y mÃ©tricas

- **TÃ©cnico**: Gestionar tickets asignados y actualizar estados

### Funcionalidades Transversales

- **Perfil de usuario**: Editar informaciÃ³n personal, cambiar contraseÃ±a, ver estadÃ­sticas- **Administrador**: Control total del sistema y gestiÃ³n de usuarios

- **Notificaciones**: Panel centralizado con notificaciones en tiempo real y persistencia en base de datos

- **Sistema de comentarios**: ComunicaciÃ³n fluida entre empleados y tÃ©cnicos

- **Historial de cambios**: AuditorÃ­a completa de todas las modificaciones de cada ticket

- **BÃºsqueda y filtrado**: BÃºsqueda por texto, filtros por estado, prioridad, categorÃ­a y tÃ©cnico asignado### NotificacionesSGTS FARMASHAIO es una soluciÃ³n integral para la gestiÃ³n de tickets de soporte tÃ©cnico interno, diseÃ±ada especÃ­ficamente para optimizar la comunicaciÃ³n entre empleados y el departamento de TI de FARMASHAIO.



---- **Notificaciones en tiempo real** vÃ­a WebSocket (Socket.IO)



## ğŸ—ï¸ Arquitectura del Sistema- **Alertas por email** en eventos importantes



### Stack TecnolÃ³gico- **Badge con contador** de notificaciones sin leer



#### Frontend- **Panel de notificaciones** con historial completo### CaracterÃ­sticas PrincipalesSistema integral de gestiÃ³n de tickets de soporte tÃ©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaciÃ³n JWT, gestiÃ³n de roles y notificaciones en tiempo real.[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)[![License](https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square)](LICENSE)

- **React 18.2** - Framework principal con Hooks y Context API

- **Material-UI 5.14** - LibrerÃ­a de componentes UI con diseÃ±o Material Design

- **Vite 4.4** - Build tool ultrarrÃ¡pido para desarrollo y producciÃ³n

- **React Router DOM 6.14** - NavegaciÃ³n y enrutamiento SPA### Dashboard y Reportes

- **Axios** - Cliente HTTP para comunicaciÃ³n con API REST

- **Socket.IO Client 4.8** - WebSocket para notificaciones en tiempo real- **GrÃ¡ficos interactivos** con Recharts:

- **Recharts 3.2** - LibrerÃ­a de grÃ¡ficos para visualizaciones analÃ­ticas

- **React Hook Form 7.45** - Manejo eficiente de formularios con validaciÃ³n  - DistribuciÃ³n de tickets por estado (grÃ¡fico de dona)**GestiÃ³n de Tickets**

- **Yup** - Esquemas de validaciÃ³n declarativos

- **date-fns** - Utilidades para formateo de fechas  - Tickets por prioridad (grÃ¡fico de barras)



#### Backend  - EvoluciÃ³n en los Ãºltimos 7 dÃ­as (grÃ¡fico de lÃ­nea)- Sistema de ticketing con numeraciÃ³n automÃ¡tica

- **Node.js 18.x** - Runtime JavaScript del lado del servidor

- **Express 4.18** - Framework web minimalista y robusto  - Tickets por categorÃ­a (grÃ¡fico de barras)

- **PostgreSQL 14.x** - Base de datos relacional principal

- **Socket.IO 4.8** - Servidor WebSocket para comunicaciÃ³n bidireccional en tiempo real- **EstadÃ­sticas en tiempo real** del sistema- CategorizaciÃ³n y priorizaciÃ³n de solicitudes**Production:** [https://sgts-farmashaio.vercel.app](https://sgts-farmashaio.vercel.app)  [![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)[![React](https://img.shields.io/badge/React-18.2-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)

- **JWT (jsonwebtoken 9.0)** - AutenticaciÃ³n stateless basada en tokens

- **bcryptjs** - Hashing seguro de contraseÃ±as (12 rounds)- **MÃ©tricas de desempeÃ±o** por tÃ©cnico

- **Nodemailer 6.9** - EnvÃ­o de notificaciones por email

- **express-validator 7.0** - ValidaciÃ³n y sanitizaciÃ³n de datos de entrada- Estados configurables del ciclo de vida

- **express-rate-limit 6.8** - ProtecciÃ³n contra ataques de fuerza bruta

- **Helmet** - Headers HTTP de seguridad### GestiÃ³n de Usuarios

- **Morgan** - Logger de peticiones HTTP

- **Compression** - CompresiÃ³n gzip de respuestas- **CRUD completo** de usuarios (solo administradores)- AsignaciÃ³n inteligente a tÃ©cnicos**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)



#### Infraestructura y Deployment- **Perfiles personalizables** con avatar e informaciÃ³n de contacto

- **Render** - Hosting de backend API (Web Service) y base de datos PostgreSQL

- **Vercel** - Hosting de frontend con CDN global- **GestiÃ³n de departamentos** y asignaciones- Historial completo de cambios con auditorÃ­a

- **GitHub** - Control de versiones con Git

- **GitHub Actions** - CI/CD (opcional, no configurado actualmente)- **ActivaciÃ³n/desactivaciÃ³n** de cuentas



### Arquitectura de 3 Capas- **Cambio de contraseÃ±a** con validaciÃ³n segura[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)[![Node.js](https://img.shields.io/badge/Node.js-18.x-339933?style=flat-square&logo=node.js)](https://nodejs.org/)



```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚                         FRONTEND (Vercel)                       â”‚### BÃºsqueda y Filtrado**Control de Acceso**

â”‚  https://farmatickets.vercel.app                                â”‚

â”‚                                                                 â”‚- **BÃºsqueda** por tÃ­tulo, nÃºmero o descripciÃ³n

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚

â”‚  â”‚   Pages      â”‚  â”‚  Components  â”‚  â”‚   Context    â”‚        â”‚- **Filtros avanzados** por estado, categorÃ­a, prioridad- AutenticaciÃ³n segura con JWT---

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - Dashboard  â”‚  â”‚ - Layout     â”‚  â”‚ - AuthContextâ”‚        â”‚- **Ordenamiento** personalizable

â”‚  â”‚ - Tickets    â”‚  â”‚ - TicketCard â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - Users      â”‚  â”‚ - NotifPanel â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚- **PaginaciÃ³n** eficiente- Tres niveles de usuario: Empleado, TÃ©cnico, Administrador

â”‚  â”‚ - Profile    â”‚  â”‚ - Logo       â”‚                          â”‚

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚

â”‚                                                                 â”‚

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚---- ProtecciÃ³n de rutas basada en roles[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14.x-316192?style=flat-square&logo=postgresql)](https://www.postgresql.org/)

â”‚  â”‚  Services    â”‚  â”‚    Hooks     â”‚  â”‚    Utils     â”‚        â”‚

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - api.js     â”‚  â”‚ - useNotifs  â”‚  â”‚ - constants  â”‚        â”‚

â”‚  â”‚ - authSvc    â”‚  â”‚              â”‚  â”‚ - formatters â”‚        â”‚## Arquitectura del Sistema- Sesiones persistentes

â”‚  â”‚ - ticketSvc  â”‚  â”‚              â”‚  â”‚ - theme      â”‚        â”‚

â”‚  â”‚ - socketSvc  â”‚  â”‚              â”‚  â”‚              â”‚        â”‚

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜### Stack TecnolÃ³gico## Tabla de Contenidos

                              â†• HTTPS + WebSocket

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚                     BACKEND API (Render)                        â”‚

â”‚  https://sgts-farmashaio-api.onrender.com                      â”‚**Frontend****Sistema de ComunicaciÃ³n**

â”‚                                                                 â”‚

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚- React 18.2 con Vite 4.4

â”‚  â”‚   Routes     â”‚  â”‚ Controllers  â”‚  â”‚  Middleware  â”‚        â”‚

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚- Material-UI 5.14 para diseÃ±o responsivo- Comentarios pÃºblicos e internos

â”‚  â”‚ - /api/auth  â”‚  â”‚ - auth       â”‚  â”‚ - auth       â”‚        â”‚

â”‚  â”‚ - /api/users â”‚  â”‚ - users      â”‚  â”‚ - error      â”‚        â”‚- React Router 6 para navegaciÃ³n

â”‚  â”‚ - /api/...   â”‚  â”‚ - tickets    â”‚  â”‚ - validator  â”‚        â”‚

â”‚  â”‚              â”‚  â”‚ - notifs     â”‚  â”‚ - rateLimiterâ”‚        â”‚- Recharts para visualizaciones- Notificaciones automÃ¡ticas por email

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

â”‚                                                                 â”‚- Socket.IO Client para WebSocket

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚

â”‚  â”‚   Models     â”‚  â”‚    Utils     â”‚  â”‚  WebSocket   â”‚        â”‚- Axios para comunicaciÃ³n HTTP- Notificaciones en tiempo real en la aplicaciÃ³n- [Arquitectura del Sistema](#arquitectura-del-sistema)

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - User       â”‚  â”‚ - database   â”‚  â”‚ - Socket.IO  â”‚        â”‚

â”‚  â”‚ - Ticket     â”‚  â”‚ - email      â”‚  â”‚ - emitToUser â”‚        â”‚

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ - emitToRole â”‚        â”‚**Backend**- Historial de interacciones

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜- Node.js 18.x con Express 4.18

                              â†• SQL

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”- PostgreSQL 14.x como base de datos- [CaracterÃ­sticas Principales](#caracterÃ­sticas-principales)Sistema integral de gestiÃ³n de tickets de soporte tÃ©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaciÃ³n JWT, gestiÃ³n de roles y notificaciones en tiempo real.Sistema integral de gestiÃ³n de tickets de soporte tÃ©cnico para FARMASHAIO. Arquitectura de 3 capas completamente desacoplada con autenticaciÃ³n JWT, gestiÃ³n de roles y notificaciones en tiempo real.

â”‚                   BASE DE DATOS (Render PostgreSQL)             â”‚

â”‚                                                                 â”‚- Socket.IO para notificaciones en tiempo real

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚

â”‚  â”‚    users     â”‚  â”‚   tickets    â”‚  â”‚ categories   â”‚        â”‚- JWT para autenticaciÃ³n**Panel de AdministraciÃ³n**

â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - id (UUID)  â”‚  â”‚ - id (UUID)  â”‚  â”‚ - id (UUID)  â”‚        â”‚- bcrypt para encriptaciÃ³n

â”‚  â”‚ - username   â”‚  â”‚ - title      â”‚  â”‚ - name       â”‚        â”‚

â”‚  â”‚ - email      â”‚  â”‚ - descriptionâ”‚  â”‚ - descriptionâ”‚        â”‚- Nodemailer para emails- GestiÃ³n completa de usuarios- [TecnologÃ­as Utilizadas](#tecnologÃ­as-utilizadas)

â”‚  â”‚ - password   â”‚  â”‚ - requester  â”‚  â”‚ - color      â”‚        â”‚

â”‚  â”‚ - role       â”‚  â”‚ - assigned   â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - department â”‚  â”‚ - category   â”‚  â”‚              â”‚        â”‚

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - priority   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚**Infraestructura**- Reportes y estadÃ­sticas

â”‚                    â”‚ - status     â”‚                           â”‚

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ - created_at â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚- Frontend: Vercel (Edge Network)

â”‚  â”‚ priorities   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   statuses   â”‚        â”‚

â”‚  â”‚              â”‚                    â”‚              â”‚        â”‚- Backend: Render (Web Service)- ConfiguraciÃ³n de categorÃ­as y prioridades- [InstalaciÃ³n Local](#instalaciÃ³n-local)

â”‚  â”‚ - id         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ - id         â”‚        â”‚

â”‚  â”‚ - name       â”‚  â”‚notifications â”‚  â”‚ - name       â”‚        â”‚- Base de Datos: Render PostgreSQL

â”‚  â”‚ - level      â”‚  â”‚              â”‚  â”‚ - color      â”‚        â”‚

â”‚  â”‚ - color      â”‚  â”‚ - user_id    â”‚  â”‚ - is_final   â”‚        â”‚- SSL/TLS para comunicaciÃ³n segura- Monitoreo del sistema

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - ticket_id  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

â”‚                    â”‚ - type       â”‚                           â”‚

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ - message    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚

â”‚  â”‚   comments   â”‚  â”‚ - is_read    â”‚  â”‚   history    â”‚        â”‚### Arquitectura de 3 Capas- [Deployment en ProducciÃ³n](#deployment-en-producciÃ³n)

â”‚  â”‚              â”‚  â”‚ - created_at â”‚  â”‚              â”‚        â”‚

â”‚  â”‚ - ticket_id  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - ticket_id  â”‚        â”‚

â”‚  â”‚ - user_id    â”‚                    â”‚ - user_id    â”‚        â”‚

â”‚  â”‚ - content    â”‚                    â”‚ - field      â”‚        â”‚```---

â”‚  â”‚ - created_at â”‚                    â”‚ - old_value  â”‚        â”‚

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ - new_value  â”‚        â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                     CAPA DE PRESENTACIÃ“N                    â”‚- [API Reference](#api-reference)**Production:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)  **Production:** [https://sgts-farmashaio-3pj5.vercel.app/](https://sgts-farmashaio-3pj5.vercel.app/)  

```

â”‚                     React + Material-UI                     â”‚

### Flujo de Datos

â”‚                  https://farmatickets.vercel.app            â”‚## Arquitectura TÃ©cnica

#### 1. AutenticaciÃ³n

1. Usuario ingresa credenciales en `/login`â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Frontend envÃ­a `POST /api/auth/login` con email y password

3. Backend valida credenciales contra `users` table                            â†• HTTPS- [Estructura del Proyecto](#estructura-del-proyecto)

4. Si es vÃ¡lido, backend genera JWT token con bcrypt hash

5. Frontend almacena token en localStorageâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

6. Todas las peticiones subsecuentes incluyen token en header `Authorization: Bearer <token>`

â”‚                      CAPA DE NEGOCIO                        â”‚### Stack TecnolÃ³gico

#### 2. CreaciÃ³n de Ticket

1. Empleado completa formulario en `/tickets/new`â”‚                    Node.js + Express API                    â”‚

2. Frontend envÃ­a `POST /api/tickets` con datos validados

3. Backend crea registro en tabla `tickets` con estado "Nuevo"â”‚            https://sgts-farmashaio-api.onrender.com         â”‚- [Base de Datos](#base-de-datos)**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)**API:** [https://sgts-farmashaio-api.onrender.com](https://sgts-farmashaio-api.onrender.com)

4. Backend crea entrada en `ticket_history` 

5. Backend emite evento WebSocket a todos los administradoresâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. Backend envÃ­a email de notificaciÃ³n a administradores

7. Frontend recibe respuesta y redirige a `/tickets/:id`                            â†• SQL| Capa | TecnologÃ­a | VersiÃ³n |



#### 3. Notificaciones en Tiempo Realâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

1. Frontend se conecta a WebSocket al hacer login: `socketService.connect(userId)`

2. Backend registra socket en sala: `socket.join('user_${userId}')`â”‚                      CAPA DE DATOS                          â”‚|------|-----------|---------|- [Seguridad](#seguridad)

3. Cuando ocurre evento (asignaciÃ³n, cambio estado, comentario):

   - Backend guarda notificaciÃ³n en tabla `notifications`â”‚                   PostgreSQL Database                       â”‚

   - Backend emite evento WebSocket: `emitToUser(userId, 'ticket:assigned', data)`

4. Frontend recibe evento en `useNotifications` hookâ”‚                    Render PostgreSQL                        â”‚| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 |

5. Frontend muestra notificaciÃ³n en badge del icono de campana

6. Frontend puede mostrar browser notification nativaâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



---```| **Backend** | Node.js + Express | 18.x / 4.18 |- [Troubleshooting](#troubleshooting)



## ğŸ—„ï¸ Modelo de Datos



### Entidades Principales---| **Database** | PostgreSQL | 14.x |



#### users

Usuario del sistema con roles diferenciados

```sql## Modelo de Datos| **Auth** | JWT + bcrypt | - |- [Roadmap](#roadmap)

id              UUID PRIMARY KEY

username        VARCHAR(50) UNIQUE

email           VARCHAR(100) UNIQUE

password_hash   VARCHAR(255)### Entidades Principales| **Email** | NodeMailer | 6.9 |

first_name      VARCHAR(50)

last_name       VARCHAR(50)

role            ENUM('empleado', 'tecnico', 'administrador')

department      VARCHAR(100)**users**- [Licencia](#licencia)------

is_active       BOOLEAN

created_at      TIMESTAMP- InformaciÃ³n de empleados y tÃ©cnicos

updated_at      TIMESTAMP

last_login      TIMESTAMP- Roles y permisos### Diagrama de Arquitectura

```

- Credenciales encriptadas

#### tickets

Ticket de soporte con informaciÃ³n completa

```sql

id              UUID PRIMARY KEY**tickets**

title           VARCHAR(200)

description     TEXT- Solicitudes de soporte```

ticket_number   VARCHAR(20) UNIQUE (formato: TKT-YYYY-NNNNNN)

requester_id    UUID â†’ users(id)- Estado y seguimiento

assigned_to     UUID â†’ users(id) NULLABLE

category_id     UUID â†’ categories(id)- Asignaciones y fechasâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”---

priority_id     UUID â†’ priorities(id)

status_id       UUID â†’ ticket_statuses(id)

created_at      TIMESTAMP

updated_at      TIMESTAMP**categories**â”‚          PRESENTATION LAYER                     â”‚

resolved_at     TIMESTAMP NULLABLE

due_date        TIMESTAMP NULLABLE- ClasificaciÃ³n de problemas

estimated_hours DECIMAL(5,2)

actual_hours    DECIMAL(5,2)- Colores identificadoresâ”‚  React 18 + Material-UI + Vite                 â”‚

```



#### categories

CategorÃ­as predefinidas de tickets**priorities**â”‚  Vercel Edge Network                           â”‚

```sql

id              UUID PRIMARY KEY- Niveles de urgencia (1-5)

name            VARCHAR(100) UNIQUE

description     TEXT- Tiempos de respuesta sugeridosâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜## Arquitectura del Sistema## Tabla de Contenidos## Tabla de Contenidos

color           VARCHAR(7) (hex color)

is_active       BOOLEAN

created_at      TIMESTAMP

**ticket_statuses**                   â”‚ REST API (HTTPS)

Valores: Hardware, Software, Red, Acceso, Email, Impresoras, TelÃ©fonos, Otros

```- Estados del flujo de trabajo



#### priorities- ConfiguraciÃ³n de ordenâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

Niveles de prioridad del 1 al 5

```sql

id              UUID PRIMARY KEY

name            VARCHAR(50) UNIQUE**notifications**â”‚          APPLICATION LAYER                      â”‚

level           INTEGER (1-5)

color           VARCHAR(7)- Historial de notificaciones

description     TEXT

is_active       BOOLEAN- Estado de lecturaâ”‚  Node.js + Express.js                          â”‚### Stack Completo



Valores: Muy Baja(1), Baja(2), Media(3), Alta(4), CrÃ­tica(5)

```

**ticket_comments**â”‚  Render Cloud Platform                         â”‚

#### ticket_statuses

Estados del ciclo de vida de un ticket- ComunicaciÃ³n del ticket

```sql

id              UUID PRIMARY KEY- Visibilidad pÃºblica/internaâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

name            VARCHAR(50) UNIQUE

description     TEXT

color           VARCHAR(7)

is_final        BOOLEAN---                   â”‚ SQL Queries

order_index     INTEGER

is_active       BOOLEAN



Valores: Nuevo, Asignado, En Progreso, Esperando Usuario, Resuelto, Cerrado, Cancelado## Seguridadâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”| Capa | TecnologÃ­a | VersiÃ³n | Hosting |- [Arquitectura del Sistema](#arquitectura-del-sistema)- [Arquitectura del Sistema](#arquitectura-del-sistema)

```



#### notifications

Notificaciones persistentes del sistema### Medidas Implementadasâ”‚          DATA LAYER                             â”‚

```sql

id              UUID PRIMARY KEY

user_id         UUID â†’ users(id)

ticket_id       UUID â†’ tickets(id) NULLABLE- **HTTPS obligatorio** en todas las comunicacionesâ”‚  PostgreSQL 14.x                               â”‚|------|-----------|---------|---------|

type            VARCHAR(50)

title           VARCHAR(200)- **Tokens JWT** con expiraciÃ³n de 24 horas

message         TEXT

is_read         BOOLEAN- **Passwords hasheados** con bcrypt (12 rounds)â”‚  Render Managed Database                       â”‚

sent_via_email  BOOLEAN

email_sent_at   TIMESTAMP- **Consultas parametrizadas** para prevenir SQL injection

created_at      TIMESTAMP

```- **ValidaciÃ³n de entrada** en frontend y backendâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel |- [CaracterÃ­sticas Principales](#caracterÃ­sticas-principales)- [CaracterÃ­sticas Principales](#caracterÃ­sticas-principales)



#### ticket_comments- **CORS configurado** con whitelist de orÃ­genes

Comentarios en tickets

```sql- **Rate limiting** (5000 req/15min por IP)```

id              UUID PRIMARY KEY

ticket_id       UUID â†’ tickets(id)- **Helmet.js** para headers de seguridad HTTP

user_id         UUID â†’ users(id)

content         TEXT- **SanitizaciÃ³n** de datos del usuario| **Backend** | Node.js + Express | 18.x / 4.18 | Render |

is_internal     BOOLEAN (comentarios solo para tÃ©cnicos)

created_at      TIMESTAMP- **Control de acceso** basado en roles (RBAC)

updated_at      TIMESTAMP

```---



#### ticket_history---

Historial completo de cambios

```sql| **Database** | PostgreSQL | 14.x | Render |- [TecnologÃ­as Utilizadas](#tecnologÃ­as-utilizadas)- [TecnologÃ­as Utilizadas](#tecnologÃ­as-utilizadas)

id              UUID PRIMARY KEY

ticket_id       UUID â†’ tickets(id)## Funcionalidades por Rol

user_id         UUID â†’ users(id)

field_name      VARCHAR(50)## Seguridad

old_value       TEXT

new_value       TEXT### Empleado

change_type     ENUM('created', 'updated', 'assigned', 'status_change', 'comment')

created_at      TIMESTAMP- âœ“ Crear tickets de soporte| **Auth** | JWT + bcrypt | - | - |

```

- âœ“ Ver sus propios tickets

### Relaciones

- âœ“ Agregar comentarios### Medidas Implementadas

- Un **user** puede crear muchos **tickets** (1:N - requester)

- Un **user** puede ser asignado a muchos **tickets** (1:N - assigned_to)- âœ“ Recibir notificaciones de actualizaciones

- Un **ticket** tiene una **category**, **priority**, y **status** (N:1)

- Un **ticket** puede tener muchos **comments** (1:N)- âœ“ Editar perfil personal| **Email** | NodeMailer | 6.9 | - |- [InstalaciÃ³n Local](#instalaciÃ³n-local)- [InstalaciÃ³n Local](#instalaciÃ³n-local)

- Un **ticket** puede tener muchas entradas de **history** (1:N)

- Un **user** puede tener muchas **notifications** (1:N)



---### TÃ©cnico**AutenticaciÃ³n y AutorizaciÃ³n**



## ğŸ” Seguridad- âœ“ Ver tickets asignados



### AutenticaciÃ³n y AutorizaciÃ³n- âœ“ Actualizar estado de tickets- Tokens JWT con expiraciÃ³n configurable

- **JWT Tokens**: Tokens firmados con secret key, expiraciÃ³n configurable

- **Bcrypt**: Hashing de passwords con 12 rounds (factor de costo)- âœ“ Agregar comentarios (pÃºblicos e internos)

- **Middleware de autenticaciÃ³n**: Valida token en cada peticiÃ³n protegida

- **Control de roles**: Endpoints restringidos segÃºn rol del usuario- âœ“ Cambiar prioridad- ContraseÃ±as hasheadas con bcrypt (12 rounds)

- **Refresh token**: Sistema de renovaciÃ³n automÃ¡tica de tokens (opcional, no implementado aÃºn)

- âœ“ Resolver y cerrar tickets

### Protecciones Implementadas

- **Rate Limiting**: 5000 requests por IP cada 15 minutos (configurable)- âœ“ Ver dashboard de estadÃ­sticas- Control de acceso basado en roles (RBAC)### Arquitectura de 3 Capas- [Deployment en ProducciÃ³n](#deployment-en-producciÃ³n)- [Deployment en ProducciÃ³n](#deployment-en-producciÃ³n)

- **Helmet**: Headers HTTP de seguridad (CSP, HSTS, XSS Protection)

- **CORS**: Configurado para permitir solo orÃ­genes autorizados

- **SQL Injection**: PrevenciÃ³n mediante prepared statements (pg library)

- **XSS**: SanitizaciÃ³n de inputs con express-validator### Administrador- ProtecciÃ³n de rutas en frontend y backend

- **ValidaciÃ³n de datos**: Esquemas Yup en frontend y express-validator en backend

- **HTTPS**: ComunicaciÃ³n cifrada en producciÃ³n- âœ“ Todas las funciones de TÃ©cnico



### Variables de Entorno Sensibles- âœ“ Ver todos los tickets del sistema

```bash

# Backend- âœ“ Asignar tickets a tÃ©cnicos

JWT_SECRET              # Secret key para firmar tokens JWT

DATABASE_URL            # Connection string de PostgreSQL- âœ“ Gestionar usuarios (crear, editar, eliminar)**ProtecciÃ³n de Datos**

EMAIL_USER              # Usuario de cuenta de email

EMAIL_PASS              # ContraseÃ±a de cuenta de email- âœ“ Gestionar categorÃ­as y prioridades

CORS_ORIGINS            # Dominios autorizados para CORS

- âœ“ Acceso a reportes completos- ValidaciÃ³n y sanitizaciÃ³n de inputs```- [API Reference](#api-reference)- [API Reference](#api-reference)

# Frontend

VITE_API_URL            # URL de backend API- âœ“ ConfiguraciÃ³n del sistema

```

- PrevenciÃ³n de SQL injection mediante consultas parametrizadas

---

---

## ğŸ‘¥ Roles y Permisos

- PrevenciÃ³n de XSS (Cross-Site Scripting)â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

### Empleado (Role: 'empleado')

**Permisos:**## Flujo de Trabajo

- âœ… Crear tickets de soporte

- âœ… Ver sus propios tickets- CORS configurado con whitelist de orÃ­genes

- âœ… Agregar comentarios a sus tickets

- âœ… Ver dashboard personal con estadÃ­sticas1. **CreaciÃ³n**: Empleado crea ticket describiendo el problema

- âœ… Editar su perfil y cambiar contraseÃ±a

- âœ… Recibir notificaciones2. **NotificaciÃ³n**: Admin y tÃ©cnicos reciben notificaciÃ³n en tiempo realâ”‚                    PRESENTATION LAYER                        â”‚- [Estructura del Proyecto](#estructura-del-proyecto)- [Estructura del Proyecto](#estructura-del-proyecto)



**Restricciones:**3. **AsignaciÃ³n**: Admin o tÃ©cnico asigna el ticket

- âŒ No puede ver tickets de otros empleados

- âŒ No puede asignar o cambiar estados de tickets4. **Trabajo**: TÃ©cnico trabaja en la soluciÃ³n**ComunicaciÃ³n Segura**

- âŒ No puede acceder al panel de usuarios

- âŒ No puede ver tickets no relacionados con Ã©l5. **ActualizaciÃ³n**: TÃ©cnico actualiza el estado y agrega comentarios



### TÃ©cnico (Role: 'tecnico')6. **ResoluciÃ³n**: TÃ©cnico marca como resuelto- HTTPS enforced en producciÃ³nâ”‚  React 18 + Material-UI + Vite                              â”‚

**Permisos:**

- âœ… Ver todos los tickets asignados a Ã©l7. **ValidaciÃ³n**: Empleado valida la soluciÃ³n

- âœ… Cambiar estados de tickets asignados

- âœ… Agregar comentarios pÃºblicos e internos8. **Cierre**: Ticket se cierra automÃ¡ticamente o manualmente- Headers de seguridad HTTP

- âœ… Ver historial completo de tickets

- âœ… Dashboard con mÃ©tricas de sus tickets

- âœ… Recibir notificaciones de asignaciones

---- EncriptaciÃ³n de datos en trÃ¡nsitoâ”‚  https://sgts-farmashaio-3pj5.vercel.app/                         â”‚- [Base de Datos](#base-de-datos)- [Seguridad](#seguridad)

**Restricciones:**

- âŒ No puede crear tickets (solo resuelven)

- âŒ No puede asignarse tickets a sÃ­ mismo

- âŒ No puede acceder al panel de usuarios## URLs del Sistema

- âŒ No puede modificar categorÃ­as, prioridades o estados del sistema



### Administrador (Role: 'administrador')

**Permisos:****ProducciÃ³n****Base de Datos**â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- âœ… Acceso completo a todos los tickets

- âœ… Crear, editar y eliminar usuarios- Frontend: https://farmatickets.vercel.app

- âœ… Asignar y reasignar tickets a tÃ©cnicos

- âœ… Cambiar cualquier estado de ticket- API: https://sgts-farmashaio-api.onrender.com- Backups automÃ¡ticos diarios

- âœ… Ver dashboard avanzado con grÃ¡ficos analÃ­ticos

- âœ… Gestionar categorÃ­as, prioridades y estados- Base de Datos: Render PostgreSQL (privada)

- âœ… Exportar reportes (futuro)

- âœ… Ver logs de auditorÃ­a completos- Ãndices optimizados para performance                       â”‚ REST API (HTTPS)- [Seguridad](#seguridad)- [Licencia](#licencia)



**Sin restricciones** dentro del sistema.---



---- Foreign keys con integridad referencial



## ğŸ”„ Flujo de Trabajo TÃ­pico## Desarrollado por



### Escenario: Computadora no enciendeâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”



#### 1. Empleado reporta problema**Julian MenchÃ©n**  

- MarÃ­a GarcÃ­a (Empleado, Depto. Farmacia) accede a https://farmatickets.vercel.app

- Navega a "Crear Ticket" y completa:Desarrollador Full Stack  ---

  - **TÃ­tulo**: "Computadora de caja 3 no enciende"

  - **DescripciÃ³n**: "Al llegar esta maÃ±ana, la computadora de la caja 3 no enciende. La luz del monitor estÃ¡ encendida pero la CPU no responde"2025

  - **CategorÃ­a**: Hardware

  - **Prioridad**: Altaâ”‚                    APPLICATION LAYER                         â”‚- [Troubleshooting](#troubleshooting)

  - **Fecha lÃ­mite**: 2024-10-16 14:00

- Hace clic en "Crear Ticket"---

- Sistema genera ticket **TKT-2024-000142**

## Estructura del Sistema

#### 2. Administrador recibe notificaciÃ³n

- Juan PÃ©rez (Administrador TI) recibe:## Licencia

  - NotificaciÃ³n en tiempo real (badge rojo en icono de campana)

  - Email automÃ¡tico: "Nuevo ticket creado - TKT-2024-000142"â”‚  Node.js + Express.js                                       â”‚

- Abre el dashboard y ve el ticket en estado "Nuevo"

- Revisa prioridad y disponibilidad de tÃ©cnicosSistema propietario de FARMASHAIO.  



#### 3. AsignaciÃ³n de tÃ©cnicoTodos los derechos reservados.### Base de Datos

- Juan asigna ticket a Carlos LÃ³pez (TÃ©cnico)

- Sistema automÃ¡ticamente:

  - Cambia estado a "Asignado"â”‚  https://sgts-farmashaio-api.onrender.com                  â”‚- [Roadmap](#roadmap)---

  - Registra cambio en `ticket_history`

  - EnvÃ­a notificaciÃ³n WebSocket a Carlos**Tablas Principales:**

  - EnvÃ­a email a Carlos

  - EnvÃ­a notificaciÃ³n a MarÃ­a informando asignaciÃ³nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



#### 4. TÃ©cnico trabaja en el ticket| Tabla | FunciÃ³n |

- Carlos recibe notificaciÃ³n y abre ticket

- Cambia estado a "En Progreso"|-------|---------|                       â”‚ SQL Queries- [Licencia](#licencia)

- Agrega comentario: "Revisando hardware en sitio, verificando conexiones"

- 30 minutos despuÃ©s agrega: "Problema identificado: cable de poder defectuoso. Reemplazando cable"| `users` | Usuarios del sistema con roles |

- MarÃ­a recibe notificaciones de cada actualizaciÃ³n

| `tickets` | Tickets de soporte con estados |â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

#### 5. ResoluciÃ³n

- Carlos cambia estado a "Resuelto"| `ticket_comments` | ComunicaciÃ³n en tickets |

- Agrega comentario final: "Cable de poder reemplazado. Computadora funcionando correctamente. Favor confirmar"

- Sistema envÃ­a notificaciÃ³n a MarÃ­a| `ticket_history` | AuditorÃ­a de cambios |â”‚                    DATA LAYER                                â”‚## Arquitectura del Sistema

- MarÃ­a verifica, agrega comentario: "Confirmado, funciona perfectamente. Gracias!"

| `categories` | CategorÃ­as de tickets |

#### 6. Cierre

- Juan o Carlos cambia estado a "Cerrado"| `priorities` | Niveles de prioridad |â”‚  PostgreSQL 14.x                                            â”‚

- Sistema registra:

  - `resolved_at`: Timestamp de resoluciÃ³n| `ticket_statuses` | Estados del workflow |

  - `actual_hours`: 1.5 horas

- Ticket cerrado y archivado| `notifications` | Notificaciones del usuario |â”‚  Render Managed Database                                    â”‚---

- MÃ©tricas actualizadas en dashboard



#### 7. Analytics

- Dashboard de administrador muestra:### API Endpointsâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  - Tiempo de resoluciÃ³n: 1.5 horas

  - Estado: Cerrado âœ…

  - GrÃ¡fico de prioridad actualizado

  - CategorÃ­a Hardware incrementada en stats**AutenticaciÃ³n**```### Stack Completo



---```



## ğŸŒ URLs del SistemaPOST   /api/auth/login              # Login de usuario



### ProducciÃ³nGET    /api/auth/profile            # Perfil actual

- **Frontend**: https://farmatickets.vercel.app

- **Backend API**: https://sgts-farmashaio-api.onrender.comPOST   /api/auth/change-password    # Cambio de contraseÃ±a---## Arquitectura del Sistema

- **Database**: Render PostgreSQL (interno)

```

### Endpoints Principales del API



#### AutenticaciÃ³n

```**GestiÃ³n de Tickets**

POST   /api/auth/login              # Iniciar sesiÃ³n

GET    /api/auth/profile            # Obtener perfil actual```## CaracterÃ­sticas Principales| Capa | TecnologÃ­a | VersiÃ³n | Hosting |

PUT    /api/auth/change-password    # Cambiar contraseÃ±a

POST   /api/auth/logout             # Cerrar sesiÃ³nGET    /api/tickets                 # Listar tickets

GET    /api/auth/verify-token       # Verificar validez de token

```POST   /api/tickets                 # Crear ticket



#### UsuariosGET    /api/tickets/:id             # Detalle de ticket

```

GET    /api/users                   # Listar usuarios (admin)PUT    /api/tickets/:id             # Actualizar ticket### AutenticaciÃ³n y AutorizaciÃ³n### Stack Completo|------|-----------|---------|---------|

POST   /api/users                   # Crear usuario (admin)

GET    /api/users/:id               # Obtener usuario especÃ­ficoPOST   /api/tickets/:id/assign      # Asignar tÃ©cnico

PUT    /api/users/:id               # Actualizar usuario (admin)

DELETE /api/users/:id               # Eliminar usuario (admin)POST   /api/tickets/:id/comments    # Agregar comentario- Login seguro con JWT (JSON Web Tokens)

GET    /api/users/technicians       # Listar tÃ©cnicos

GET    /api/users/stats             # EstadÃ­sticas de usuario actual```

```

- Hash de contraseÃ±as con bcrypt (12 rounds)| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel |

#### Tickets

```**AdministraciÃ³n** (Solo Admin)

GET    /api/tickets                 # Listar tickets (filtrado por rol)

POST   /api/tickets                 # Crear ticket```- GestiÃ³n de roles: **Empleado**, **TÃ©cnico**, **Administrador**

GET    /api/tickets/:id             # Obtener ticket especÃ­fico

PUT    /api/tickets/:id             # Actualizar ticketGET    /api/users                   # Listar usuarios

DELETE /api/tickets/:id             # Eliminar ticket (admin)

PUT    /api/tickets/:id/assign      # Asignar tÃ©cnicoPOST   /api/users                   # Crear usuario- ProtecciÃ³n de rutas basada en roles| Capa | TecnologÃ­a | VersiÃ³n | Hosting || **Backend** | Node.js + Express | 18.x / 4.18 | Render |

PUT    /api/tickets/:id/status      # Cambiar estado

GET    /api/tickets/stats           # EstadÃ­sticas globalesPUT    /api/users/:id               # Actualizar usuario

POST   /api/tickets/:id/comments    # Agregar comentario

```DELETE /api/users/:id               # Eliminar usuario- Sesiones persistentes con refresh tokens



#### Notificaciones```

```

GET    /api/notifications           # Listar notificaciones|------|-----------|---------|---------|| **Database** | PostgreSQL | 14.x | Render |

GET    /api/notifications/unread-count  # Contador no leÃ­das

PUT    /api/notifications/:id/read  # Marcar como leÃ­da---

PUT    /api/notifications/mark-all-read # Marcar todas leÃ­das

DELETE /api/notifications/:id       # Eliminar notificaciÃ³n### GestiÃ³n de Tickets

```

## Roles y Permisos

#### CatÃ¡logos

```- CreaciÃ³n y asignaciÃ³n automÃ¡tica de nÃºmeros de ticket| **Frontend** | React + Vite + Material-UI | 18.2 / 4.4 / 5.14 | Vercel || **Auth** | JWT + bcrypt | - | - |

GET    /api/categories              # Listar categorÃ­as

GET    /api/priorities              # Listar prioridades### Empleado

GET    /api/ticket-statuses         # Listar estados

```- Sistema de categorÃ­as configurables



### Health Check**Capacidades:**

```

GET    /health                      # Estado del servidor- Crear nuevos tickets de soporte- Niveles de prioridad (Baja, Media, Alta, CrÃ­tica)| **Backend** | Node.js + Express | 18.x / 4.18 | Render || **Email** | NodeMailer | 6.9 | - |

GET    /debug/users                 # Debug endpoint (solo desarrollo)

```- Ver y gestionar sus propios tickets



---- Agregar comentarios a sus tickets- Estados personalizables del ciclo de vida



## ğŸ“Š CaracterÃ­sticas TÃ©cnicas Destacadas- Recibir notificaciones de actualizaciones



### Dashboard con GrÃ¡ficos AnalÃ­ticos- AsignaciÃ³n inteligente a tÃ©cnicos| **Database** | PostgreSQL | 14.x | Render |

El dashboard de administrador incluye visualizaciones interactivas con **Recharts**:

**Limitaciones:**

1. **Pie Chart - Estado de Tickets**

   - DistribuciÃ³n de tickets por estado (Nuevo, Asignado, En Progreso, etc.)- No puede ver tickets de otros empleados- Sistema de comentarios pÃºblicos e internos

   - Colores diferenciados por estado

   - Tooltip con cantidad y porcentaje- No puede cambiar estados de tickets



2. **Bar Chart - Tickets por Prioridad**- Sin acceso a panel de administraciÃ³n- Historial completo de cambios con auditorÃ­a| **Auth** | JWT + bcrypt | - | - |### Arquitectura de 3 Capas

   - Barras horizontales mostrando cantidad por prioridad

   - Colores segÃºn criticidad (verde a rojo)

   - Hover con detalles

### TÃ©cnico

3. **Bar Chart - Tickets por CategorÃ­a**

   - ComparaciÃ³n de volumen entre categorÃ­as

   - IdentificaciÃ³n rÃ¡pida de Ã¡reas mÃ¡s problemÃ¡ticas

**Capacidades:**### GestiÃ³n de Usuarios| **Email** | NodeMailer | 6.9 | - |

4. **Line Chart - LÃ­nea de Tiempo**

   - EvoluciÃ³n de tickets creados en Ãºltimos 7 dÃ­as- Ver todos los tickets del sistema

   - IdentificaciÃ³n de picos de demanda

   - Ayuda a planificar recursos- Recibir asignaciones automÃ¡ticas- CRUD completo de usuarios (Solo administradores)



### Sistema de Notificaciones HÃ­brido- Cambiar estados de tickets asignados



**Persistencia + Tiempo Real**:- Agregar comentarios pÃºblicos e internos- GestiÃ³n avanzada de roles y permisos```

- Notificaciones guardadas en PostgreSQL para historial

- WebSocket (Socket.IO) para entrega instantÃ¡nea- Registrar tiempo y soluciones

- Al conectarse, se cargan notificaciones existentes de DB

- Nuevas notificaciones llegan via WebSocket sin refresh- ActivaciÃ³n y desactivaciÃ³n de cuentas

- Badge numÃ©rico se actualiza automÃ¡ticamente

- Click en notificaciÃ³n navega directamente al ticket**Limitaciones:**



**Tipos de Notificaciones**:- No puede gestionar usuarios- Perfiles personalizables### Arquitectura de 3 Capasâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

- `ticket:created` - Nuevo ticket creado

- `ticket:assigned` - Ticket asignado a tÃ©cnico- No puede eliminar tickets

- `ticket:updated` - Cambio en ticket

- `ticket:status_changed` - Cambio de estado- Sin acceso a configuraciÃ³n global- Cambio de contraseÃ±a con validaciÃ³n

- `ticket:commented` - Nuevo comentario



### Perfil de Usuario Completo

PÃ¡gina de perfil incluye:### Administradorâ”‚                    PRESENTATION LAYER                        â”‚

- Avatar con iniciales generadas automÃ¡ticamente

- InformaciÃ³n personal editable

- Dropdown de departamento con 15 opciones predefinidas

- Cambio de contraseÃ±a con validaciÃ³n de seguridad**Capacidades:**### Sistema de Notificaciones

- EstadÃ­sticas personalizadas:

  - Total de tickets creados- Acceso completo al sistema

  - Tickets resueltos

  - Tickets pendientes- GestiÃ³n de usuarios y roles- Notificaciones automÃ¡ticas por email```â”‚  React 18 + Material-UI + Vite                              â”‚

  - GrÃ¡ficos de actividad

- AsignaciÃ³n manual de tickets

### Responsive Design

- Layout adaptativo con Material-UI Grid y Flexbox- ConfiguraciÃ³n de categorÃ­as y prioridades- Notificaciones en tiempo real en la aplicaciÃ³n

- Drawer lateral colapsable en mÃ³vil

- Tablas con scroll horizontal en pantallas pequeÃ±as- Acceso a reportes y estadÃ­sticas

- Formularios optimizados para touch

- Media queries para tablet y mobile- ConfiguraciÃ³n del sistema- Plantillas de email HTML profesionalesâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  https://sgts-farmashaio.vercel.app                         â”‚



---



## ğŸ“ˆ MÃ©tricas y KPIs**Sin restricciones**- ConfiguraciÃ³n de preferencias de notificaciÃ³n



El sistema calcula automÃ¡ticamente:



### MÃ©tricas de Tickets---- Historial de notificaciones enviadasâ”‚                    PRESENTATION LAYER                        â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- Tiempo promedio de primera respuesta

- Tiempo promedio de resoluciÃ³n

- Tickets creados vs resueltos (por periodo)

- DistribuciÃ³n por prioridad## Componentes del Frontend

- DistribuciÃ³n por categorÃ­a

- DistribuciÃ³n por estado

- Tasa de resoluciÃ³n (%)

### PÃ¡ginas Principales---â”‚  React 18 + Material-UI + Vite                              â”‚                       â”‚ REST API (HTTPS)

### MÃ©tricas de Usuarios

- Tickets creados por usuario

- Tickets asignados por tÃ©cnico

- Tickets resueltos por tÃ©cnico- **Dashboard** - Vista general con estadÃ­sticas

- Tickets activos por tÃ©cnico

- Carga de trabajo actual- **Tickets** - Lista y filtrado de tickets



### MÃ©tricas del Sistema- **Detalle de Ticket** - InformaciÃ³n completa y comentarios## TecnologÃ­as Utilizadasâ”‚  https://sgts-farmashaio.vercel.app                         â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

- Total de usuarios activos

- Total de tickets en sistema- **Crear Ticket** - Formulario de nueva solicitud

- Tickets creados Ãºltimos 7 dÃ­as

- Tickets por departamento- **Usuarios** - GestiÃ³n de usuarios (Admin)

- CategorÃ­as mÃ¡s frecuentes

- **Notificaciones** - Centro de notificaciones

---

- **Perfil** - ConfiguraciÃ³n del usuario### Frontendâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                    APPLICATION LAYER                         â”‚

## ğŸš€ Estado del Proyecto



**VersiÃ³n Actual**: 1.0.0 (MVP Completo)  

**Estado**: âœ… ProducciÃ³n - Desplegado y funcional  ### TecnologÃ­as Frontend- **React 18.2** - LibrerÃ­a UI con hooks

**Ãšltima ActualizaciÃ³n**: Octubre 2024



### Completado âœ…

- [x] AutenticaciÃ³n JWT con roles- **React 18.2** - Hooks y Context API- **Vite 4.4** - Build tool de Ãºltima generaciÃ³n                       â”‚ REST API (HTTPS)â”‚  Node.js + Express.js                                       â”‚

- [x] CRUD completo de usuarios (admin)

- [x] CRUD completo de tickets- **Material-UI 5.14** - Design system

- [x] Sistema de comentarios

- [x] AsignaciÃ³n de tickets a tÃ©cnicos- **React Router 6** - NavegaciÃ³n SPA- **Material-UI 5.14** - Componentes UI

- [x] Cambio de estados con workflow

- [x] Notificaciones en tiempo real (WebSocket)- **Axios** - Cliente HTTP

- [x] Notificaciones por email

- [x] Dashboard con grÃ¡ficos analÃ­ticos- **Vite** - Build tool optimizado- **React Router 6** - NavegaciÃ³n SPAâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  https://sgts-farmashaio-api.onrender.com                  â”‚

- [x] Perfil de usuario con estadÃ­sticas

- [x] Sistema de roles y permisos

- [x] Historial de cambios completo

- [x] Filtros y bÃºsqueda avanzada---- **Axios** - Cliente HTTP

- [x] Responsive design

- [x] Rate limiting y seguridad

- [x] Deploy en Render + Vercel

- [x] Base de datos PostgreSQL en producciÃ³n## InformaciÃ³n TÃ©cnica- **Context API** - State managementâ”‚                    APPLICATION LAYER                         â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



### Roadmap Futuro ğŸ”®

- [ ] Adjuntar archivos a tickets

- [ ] ExportaciÃ³n de reportes en PDF/Excel### Performance

- [ ] Sistema de SLA (Service Level Agreement)

- [ ] IntegraciÃ³n con Active Directory/LDAP

- [ ] API pÃºblica con documentaciÃ³n Swagger

- [ ] AplicaciÃ³n mÃ³vil nativa (React Native)- **Frontend:** Edge deployment en Vercel### Backendâ”‚  Node.js + Express.js                                       â”‚                       â”‚ SQL Queries

- [ ] Chatbot de soporte con IA

- [ ] Panel de mÃ©tricas avanzadas (BI)- **Backend:** Auto-scaling en Render

- [ ] Sistema de encuestas de satisfacciÃ³n

- [ ] IntegraciÃ³n con Microsoft Teams/Slack- **Database:** Connection pooling optimizado- **Node.js 18.x** - Runtime JavaScript



---- **Cache:** Estrategias de cache en mÃºltiples capas



## ğŸ‘¨â€ğŸ’» InformaciÃ³n del Desarrollador- **Express 4.18** - Framework webâ”‚  https://sgts-farmashaio-api.onrender.com                  â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”



**Proyecto desarrollado para**: FARMASHAIO  ### Monitoreo

**Desarrollado por**: Julian-Enable  

**Repositorio**: https://github.com/Julian-Enable/sgts-farmashaio  - **PostgreSQL 14.x** - Base de datos relacional

**Licencia**: MIT  

**AÃ±o**: 2024- Logs centralizados en Render



---- Error tracking en tiempo real- **JWT** - AutenticaciÃ³n statelessâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                    DATA LAYER                                â”‚



## ğŸ“ Soporte- MÃ©tricas de performance



Para soporte tÃ©cnico o consultas sobre el sistema:- Uptime monitoring- **bcrypt** - Hash de contraseÃ±as



- **Email**: admin@farmashaio.com

- **Sistema**: Crear ticket dentro de la plataforma

- **DocumentaciÃ³n**: Este README### Mantenimiento- **NodeMailer** - EnvÃ­o de emails                       â”‚ SQL Queriesâ”‚  PostgreSQL 14.x                                            â”‚



---



## ğŸ“„ Licencia- Auto-deploy desde GitHub- **Winston** - Logging system



Este proyecto estÃ¡ bajo la Licencia MIT. Ver archivo `LICENSE` para mÃ¡s detalles.- Backups diarios automÃ¡ticos



---- Migraciones de base de datos versionadasâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  Render Managed Database                                    â”‚



**SGTS FARMASHAIO** - *Transformando el soporte tÃ©cnico en FARMASHAIO* ğŸš€- Pruebas automatizadas


### DevOps & Deployment

---

- **Git & GitHub** - Control de versionesâ”‚                    DATA LAYER                                â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Soporte y Contacto

- **Vercel** - Hosting frontend

**Departamento de TI - FARMASHAIO**

- **Render** - Hosting backend y databaseâ”‚  PostgreSQL 14.x                                            â”‚```

Para soporte tÃ©cnico o consultas sobre el sistema, contactar al departamento de TI interno.

- **ESLint** - Linter JavaScript

**Repositorio:** [https://github.com/Julian-Enable/sgts-farmashaio](https://github.com/Julian-Enable/sgts-farmashaio)

- **Prettier** - Code formatterâ”‚  Render Managed Database                                    â”‚

---



## TecnologÃ­as y Herramientas

---â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜---

**Lenguajes:**

- JavaScript (ES6+)

- SQL (PostgreSQL)

- HTML5 / CSS3## InstalaciÃ³n Local```



**Frameworks y LibrerÃ­as:**

- React 18

- Express.js### Prerrequisitos## CaracterÃ­sticas Principales

- Material-UI



**Base de Datos:**

- PostgreSQL 14.x```bash---

- Migrations con scripts SQL

node --version  # >= 18.0.0

**DevOps:**

- Git & GitHubnpm --version   # >= 9.0.0### AutenticaciÃ³n y AutorizaciÃ³n

- Vercel (Frontend hosting)

- Render (Backend & Database hosting)psql --version  # >= 12.0

- ESLint + Prettier (Code quality)

```## CaracterÃ­sticas Principales- Login seguro con JWT (JSON Web Tokens)

**Seguridad:**

- JWT (JSON Web Tokens)

- bcrypt (Password hashing)

- Helmet.js (HTTP headers)### 1. Clonar Repositorio- Hash de contraseÃ±as con bcrypt (12 rounds)

- CORS configuration



---

```bash### AutenticaciÃ³n y AutorizaciÃ³n- GestiÃ³n de roles: **Empleado**, **TÃ©cnico**, **Administrador**

## Licencia

git clone https://github.com/Julian-Enable/sgts-farmashaio.git

MIT License - Copyright (c) 2025 FARMASHAIO

cd sgts-farmashaio- Login seguro con JWT (JSON Web Tokens)- ProtecciÃ³n de rutas basada en roles

---

```

<div align="center">

- Hash de contraseÃ±as con bcrypt (12 rounds)- Sesiones persistentes con refresh tokens

**SGTS FARMASHAIO v1.0.0**

### 2. Configurar Base de Datos

Sistema de GestiÃ³n de Tickets de Soporte TI

- GestiÃ³n de roles: **Empleado**, **TÃ©cnico**, **Administrador**

Desarrollado por **Julian MerchÃ¡n**

```bash

*Enterprise Solution - Built with React, Node.js & PostgreSQL*

# Crear base de datos PostgreSQL- ProtecciÃ³n de rutas basada en roles### GestiÃ³n de Tickets

</div>

createdb sgts_farmashaio

- Sesiones persistentes con refresh tokens- CreaciÃ³n y asignaciÃ³n automÃ¡tica de nÃºmeros de ticket

# Ejecutar schema

psql sgts_farmashaio < database/schema.sql- Sistema de categorÃ­as configurables



# Cargar datos iniciales### GestiÃ³n de Tickets- Niveles de prioridad (Baja, Media, Alta, CrÃ­tica)

psql sgts_farmashaio < database/seed.sql

```- CreaciÃ³n y asignaciÃ³n automÃ¡tica de nÃºmeros de ticket- Estados personalizables del ciclo de vida



### 3. Configurar Backend- Sistema de categorÃ­as configurables- AsignaciÃ³n inteligente a tÃ©cnicos



```bash- Niveles de prioridad (Baja, Media, Alta, CrÃ­tica)- Sistema de comentarios pÃºblicos e internos

cd backend

npm install- Estados personalizables del ciclo de vida- Historial completo de cambios con auditorÃ­a



# Crear archivo .env- AsignaciÃ³n inteligente a tÃ©cnicos

cat > .env << EOF

NODE_ENV=development- Sistema de comentarios pÃºblicos e internos### GestiÃ³n de Usuarios

PORT=5000

DATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaio- Historial completo de cambios con auditorÃ­a- CRUD completo de usuarios (Solo administradores)

JWT_SECRET=your-secret-key-min-32-characters

CORS_ORIGINS=http://localhost:5173- GestiÃ³n avanzada de roles y permisos

EOF

### GestiÃ³n de Usuarios- ActivaciÃ³n y desactivaciÃ³n de cuentas

# Iniciar servidor de desarrollo

npm run dev- CRUD completo de usuarios (Solo administradores)- Perfiles personalizables

```

- GestiÃ³n avanzada de roles y permisos- Cambio de contraseÃ±a con validaciÃ³n

El servidor estarÃ¡ disponible en `http://localhost:5000`

- ActivaciÃ³n y desactivaciÃ³n de cuentas

### 4. Configurar Frontend

- Perfiles personalizables### Sistema de Notificaciones

```bash

cd frontend- Cambio de contraseÃ±a con validaciÃ³n- Notificaciones automÃ¡ticas por email

npm install

- Notificaciones en tiempo real en la aplicaciÃ³n

# Crear archivo .env

cat > .env << EOF### Sistema de Notificaciones- Plantillas de email HTML profesionales

VITE_API_BASE_URL=http://localhost:5000/api

EOF- Notificaciones automÃ¡ticas por email- ConfiguraciÃ³n de preferencias de notificaciÃ³n



# Iniciar servidor de desarrollo- Notificaciones en tiempo real en la aplicaciÃ³n- Historial de notificaciones enviadas

npm run dev

```- Plantillas de email HTML profesionales



El frontend estarÃ¡ disponible en `http://localhost:5173`- ConfiguraciÃ³n de preferencias de notificaciÃ³n---



### 5. Credenciales de Prueba- Historial de notificaciones enviadas



| Rol | Email | ContraseÃ±a | DescripciÃ³n |## TecnologÃ­as Utilizadas

|-----|-------|-----------|-------------|

| **Admin** | admin@farmashaio.com | admin123 | Acceso completo al sistema |---

| **TÃ©cnico** | tecnico1@farmashaio.com | tecnico123 | GestiÃ³n de tickets |

| **Empleado** | empleado1@farmashaio.com | empleado123 | CreaciÃ³n de tickets |### Frontend



---## TecnologÃ­as Utilizadas- **React 18.2** - LibrerÃ­a UI con hooks



## Deployment en ProducciÃ³n- **Vite 4.4** - Build tool de Ãºltima generaciÃ³n



### Stack de Hosting Gratuito### Frontend- **Material-UI 5.14** - Componentes UI



| Servicio | Proveedor | Plan | Recursos |- **React 18.2** - LibrerÃ­a UI con hooks- **React Router 6** - NavegaciÃ³n SPA

|----------|-----------|------|----------|

| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |- **Vite 4.4** - Build tool de Ãºltima generaciÃ³n- **Axios** - Cliente HTTP

| **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |

| **Frontend** | Vercel | Free | Edge Network Global |- **Material-UI 5.14** - Componentes UI- **Context API** - State management



**Costo total:** $0/mes- **React Router 6** - NavegaciÃ³n SPA



### GuÃ­a de Deployment- **Axios** - Cliente HTTP### Backend



#### 1. Preparar Repositorio- **Context API** - State management- **Node.js 18.x** - Runtime JavaScript



```bash- **Express 4.18** - Framework web

# Verificar que todo estÃ¡ commiteado

git status### Backend- **PostgreSQL 14.x** - Base de datos relacional



# Push a GitHub- **Node.js 18.x** - Runtime JavaScript- **JWT** - AutenticaciÃ³n stateless

git push origin main

```- **Express 4.18** - Framework web- **bcrypt** - Hash de contraseÃ±as



#### 2. PostgreSQL Database en Render- **PostgreSQL 14.x** - Base de datos relacional- **NodeMailer** - EnvÃ­o de emails



**a) Crear cuenta y conectar GitHub**- **JWT** - AutenticaciÃ³n stateless- **Winston** - Logging system

- Visitar [render.com](https://render.com)

- Sign up with GitHub- **bcrypt** - Hash de contraseÃ±as

- Autorizar acceso al repositorio

- **NodeMailer** - EnvÃ­o de emails### DevOps & Deployment

**b) Crear PostgreSQL Database**

```- **Winston** - Logging system- **Git & GitHub** - Control de versiones

Dashboard â†’ New â†’ PostgreSQL

Name: sgts-farmashaio-db- **Vercel** - Hosting frontend

Database: sgts_farmashaio

User: sgts_user### DevOps & Deployment- **Render** - Hosting backend y database

Region: Oregon (US West)

Plan: Free- **Git & GitHub** - Control de versiones- **ESLint** - Linter JavaScript

```

- **Vercel** - Hosting frontend- **Prettier** - Code formatter

**c) Ejecutar Schema**

- Copiar contenido de `database/schema.sql`- **Render** - Hosting backend y database

- Dashboard â†’ Connect â†’ PSQL Command

- Pegar y ejecutar- **ESLint** - Linter JavaScript---

- Repetir con `database/seed.sql`

- **Prettier** - Code formatter

**d) Guardar DATABASE_URL**

```## InstalaciÃ³n Local

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio

```---



#### 3. Backend API en Render### Prerrequisitos



**a) Crear Web Service**## InstalaciÃ³n Local

```

Dashboard â†’ New â†’ Web Service```bash

Repository: Julian-Enable/sgts-farmashaio

Name: sgts-farmashaio-api### Prerrequisitosnode --version  # >= 18.0.0

Region: Oregon (US West)

Branch: mainnpm --version   # >= 9.0.0

Root Directory: backend

Runtime: Node```bashpsql --version  # >= 12.0

Build Command: npm install

Start Command: npm startnode --version  # >= 18.0.0```

Plan: Free

```npm --version   # >= 9.0.0



**b) Configurar Variables de Entorno**psql --version  # >= 12.0### 1. Clonar Repositorio

```env

NODE_ENV=production```

DATABASE_URL=<Copiar Internal Database URL>

JWT_SECRET=<Generar string aleatorio de 32+ caracteres>```bash

CORS_ORIGINS=https://sgts-farmashaio-3pj5.vercel.app/

PORT=10000### 1. Clonar Repositoriogit clone https://github.com/Julian-Enable/sgts-farmashaio.git

```

cd sgts-farmashaio

**c) Conectar Database**

- En el Web Service: Environment â†’ Add Environment Group```bash```

- Seleccionar la base de datos creada

git clone https://github.com/Julian-Enable/sgts-farmashaio.git

**d) Deploy**

- Click "Create Web Service"cd sgts-farmashaio### 2. Configurar Base de Datos

- Esperar ~5 minutos para el primer deploy

- Verificar: `https://sgts-farmashaio-api.onrender.com/health````



#### 4. Frontend en Vercel```bash



**a) Importar Proyecto**### 2. Configurar Base de Datos# Crear base de datos PostgreSQL

```

Dashboard â†’ Add New â†’ Projectcreatedb sgts_farmashaio

Import Git Repository: Julian-Enable/sgts-farmashaio

Framework Preset: Vite```bash

Root Directory: frontend

Build Command: npm run build# Crear base de datos PostgreSQL# Ejecutar schema

Output Directory: dist

Install Command: npm installcreatedb sgts_farmashaiopsql sgts_farmashaio < database/schema.sql

```



**b) Configurar Variables de Entorno**

```env# Ejecutar schema# Cargar datos iniciales

VITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api

```psql sgts_farmashaio < database/schema.sqlpsql sgts_farmashaio < database/seed.sql



**c) Deploy**```

- Click "Deploy"

- Esperar ~2 minutos# Cargar datos iniciales

- Verificar: `https://sgts-farmashaio-3pj5.vercel.app/`

psql sgts_farmashaio < database/seed.sql### 3. Configurar Backend

#### 5. VerificaciÃ³n Post-Deployment

```

**Checklist de ValidaciÃ³n:**

```bash

- [ ] Database responde correctamente

  ```bash### 3. Configurar Backendcd backend

  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"

  ```npm install



- [ ] Backend API funcional```bash

  ```bash

  curl https://sgts-farmashaio-api.onrender.com/healthcd backend# Crear archivo .env

  # Expected: {"status": "ok"}

  ```npm installcat > .env << EOF



- [ ] Frontend accesibleNODE_ENV=development

  - Abrir `https://sgts-farmashaio-3pj5.vercel.app/`

  - Verificar que carga sin errores# Crear archivo .envPORT=5000



- [ ] Login funcionalcat > .env << EOFDATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaio

  - Email: `admin@farmashaio.com`

  - Password: `admin123`NODE_ENV=developmentJWT_SECRET=your-secret-key-min-32-characters

  - Verificar acceso al dashboard

PORT=5000CORS_ORIGINS=http://localhost:5173

- [ ] CORS configurado

  - Verificar que las llamadas API funcionanDATABASE_URL=postgresql://postgres:password@localhost:5432/sgts_farmashaioEOF

  - Revisar Network tab (sin errores CORS)

JWT_SECRET=your-secret-key-min-32-characters

### ActualizaciÃ³n Continua

CORS_ORIGINS=http://localhost:5173# Iniciar servidor de desarrollo

Ambos servicios estÃ¡n configurados con **auto-deploy**:

EOFnpm run dev

```bash

git add .```

git commit -m "feat: nueva funcionalidad"

git push origin main# Iniciar servidor de desarrollo

```

npm run devEl servidor estarÃ¡ disponible en `http://localhost:5000`

- **Vercel**: Deploy automÃ¡tico en ~2 minutos

- **Render**: Deploy automÃ¡tico en ~5 minutos```



---### 4. Configurar Frontend



## API ReferenceEl servidor estarÃ¡ disponible en `http://localhost:5000`



### Base URL```bash

```

Development: http://localhost:5000/api### 4. Configurar Frontendcd frontend

Production:  https://sgts-farmashaio-api.onrender.com/api

```npm install



### AutenticaciÃ³n```bash



Todos los endpoints (excepto `/auth/login`) requieren token JWT en el header:cd frontend# Crear archivo .env

```http

Authorization: Bearer <token>npm installcat > .env << EOF

```

VITE_API_BASE_URL=http://localhost:5000/api

#### Endpoints de AutenticaciÃ³n

# Crear archivo .envEOF

```http

POST   /api/auth/logincat > .env << EOF

POST   /api/auth/logout

GET    /api/auth/profileVITE_API_BASE_URL=http://localhost:5000/api# Iniciar servidor de desarrollo

PUT    /api/auth/profile

POST   /api/auth/change-passwordEOFnpm run dev

```

```

**Ejemplo: Login**

```bash# Iniciar servidor de desarrollo

curl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \

  -H "Content-Type: application/json" \npm run devEl frontend estarÃ¡ disponible en `http://localhost:5173`

  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'

``````



### GestiÃ³n de Usuarios### 5. Credenciales de Prueba



```httpEl frontend estarÃ¡ disponible en `http://localhost:5173`

GET    /api/users              # Listar todos los usuarios

POST   /api/users              # Crear nuevo usuario| Rol | Email | ContraseÃ±a | DescripciÃ³n |

GET    /api/users/:id          # Obtener usuario especÃ­fico

PUT    /api/users/:id          # Actualizar usuario### 5. Credenciales de Prueba|-----|-------|-----------|-------------|

DELETE /api/users/:id          # Eliminar usuario

GET    /api/users/technicians  # Listar solo tÃ©cnicos| **Admin** | `admin@farmashaio.com` | `admin123` | Acceso completo al sistema |

```

| Rol | Email | ContraseÃ±a | DescripciÃ³n || **TÃ©cnico** | `tecnico1@farmashaio.com` | `tecnico123` | GestiÃ³n de tickets |

### GestiÃ³n de Tickets

|-----|-------|-----------|-------------|| **Empleado** | `empleado1@farmashaio.com` | `empleado123` | CreaciÃ³n de tickets |

```http

GET    /api/tickets                  # Listar tickets (con filtros)| **Admin** | `admin@farmashaio.com` | `admin123` | Acceso completo al sistema |

POST   /api/tickets                  # Crear nuevo ticket

GET    /api/tickets/:id              # Obtener ticket especÃ­fico| **TÃ©cnico** | `tecnico1@farmashaio.com` | `tecnico123` | GestiÃ³n de tickets |---

PUT    /api/tickets/:id              # Actualizar ticket

DELETE /api/tickets/:id              # Eliminar ticket| **Empleado** | `empleado1@farmashaio.com` | `empleado123` | CreaciÃ³n de tickets |

POST   /api/tickets/:id/assign       # Asignar tÃ©cnico

PATCH  /api/tickets/:id/status       # Cambiar estado## Deployment en ProducciÃ³n

POST   /api/tickets/:id/comments     # Agregar comentario

GET    /api/tickets/:id/history      # Obtener historial---

```

### Stack de Hosting Gratuito

**Ejemplo: Crear Ticket**

```bash## Deployment en ProducciÃ³n

curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \

  -H "Authorization: Bearer <token>" \| Servicio | Proveedor | Plan | Recursos |

  -H "Content-Type: application/json" \

  -d '{### Stack de Hosting Gratuito|----------|-----------|------|----------|

    "title": "Error en sistema de inventario",

    "description": "El sistema no permite actualizar existencias",| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |

    "category_id": 1,

    "priority_id": 3| Servicio | Proveedor | Plan | Recursos || **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |

  }'

```|----------|-----------|------|----------|| **Frontend** | Vercel | Free | Edge Network Global |



### Notificaciones| **Database** | Render | Free | 0.1 CPU, 256 MB RAM |



```http| **Backend API** | Render | Free | 0.1 CPU, 512 MB RAM |**Costo total:** $0/mes

GET    /api/notifications           # Listar notificaciones del usuario

PUT    /api/notifications/:id/read  # Marcar como leÃ­da| **Frontend** | Vercel | Free | Edge Network Global |

DELETE /api/notifications/:id       # Eliminar notificaciÃ³n

```### GuÃ­a de Deployment



### CatÃ¡logos**Costo total:** $0/mes



```http#### 1. Preparar Repositorio

GET    /api/categories              # Listar categorÃ­as

GET    /api/priorities              # Listar prioridades### GuÃ­a de Deployment

GET    /api/statuses                # Listar estados

``````bash



### CÃ³digos de Respuesta#### 1. Preparar Repositorio# Verificar que todo estÃ¡ commiteado



| CÃ³digo | DescripciÃ³n |git status

|--------|-------------|

| `200` | OK - Solicitud exitosa |```bash

| `201` | Created - Recurso creado |

| `400` | Bad Request - Datos invÃ¡lidos |# Verificar que todo estÃ¡ commiteado# Push a GitHub

| `401` | Unauthorized - Token invÃ¡lido o faltante |

| `403` | Forbidden - Sin permisos |git statusgit push origin main

| `404` | Not Found - Recurso no encontrado |

| `500` | Internal Server Error - Error del servidor |```



---# Push a GitHub



## Estructura del Proyectogit push origin main#### 2. PostgreSQL Database en Render



``````

sgts-farmashaio/

â”œâ”€â”€ frontend/**a) Crear cuenta y conectar GitHub**

â”‚   â”œâ”€â”€ src/

â”‚   â”‚   â”œâ”€â”€ assets/              # ImÃ¡genes y recursos estÃ¡ticos#### 2. PostgreSQL Database en Render- Visitar [render.com](https://render.com)

â”‚   â”‚   â”œâ”€â”€ components/          # Componentes reutilizables

â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # Componentes de autenticaciÃ³n- Sign up with GitHub

â”‚   â”‚   â”‚   â”œâ”€â”€ common/         # Componentes compartidos

â”‚   â”‚   â”‚   â”œâ”€â”€ tickets/        # Componentes de tickets**a) Crear cuenta y conectar GitHub**- Autorizar acceso al repositorio

â”‚   â”‚   â”‚   â””â”€â”€ users/          # Componentes de usuarios

â”‚   â”‚   â”œâ”€â”€ contexts/            # Context API (AuthContext)- Visitar [render.com](https://render.com)

â”‚   â”‚   â”œâ”€â”€ pages/              # PÃ¡ginas de la aplicaciÃ³n

â”‚   â”‚   â”œâ”€â”€ services/           # Servicios API (axios)- Sign up with GitHub**b) Crear PostgreSQL Database**

â”‚   â”‚   â”œâ”€â”€ theme/              # ConfiguraciÃ³n Material-UI

â”‚   â”‚   â”œâ”€â”€ utils/              # Funciones de utilidad- Autorizar acceso al repositorio```

â”‚   â”‚   â”œâ”€â”€ App.jsx             # Componente raÃ­z

â”‚   â”‚   â””â”€â”€ main.jsx            # Entry pointDashboard â†’ New â†’ PostgreSQL

â”‚   â”œâ”€â”€ public/                 # Archivos pÃºblicos

â”‚   â”œâ”€â”€ index.html              # HTML template**b) Crear PostgreSQL Database**Name: sgts-farmashaio-db

â”‚   â”œâ”€â”€ vite.config.js          # ConfiguraciÃ³n Vite

â”‚   â””â”€â”€ package.json```Database: sgts_farmashaio

â”‚

â”œâ”€â”€ backend/Dashboard â†’ New â†’ PostgreSQLUser: sgts_user

â”‚   â”œâ”€â”€ src/

â”‚   â”‚   â”œâ”€â”€ config/             # ConfiguraciÃ³n (database, jwt)Name: sgts-farmashaio-dbRegion: Oregon (US West)

â”‚   â”‚   â”œâ”€â”€ controllers/        # Controladores de rutas

â”‚   â”‚   â”œâ”€â”€ middleware/         # Middleware (auth, validation)Database: sgts_farmashaioPlan: Free

â”‚   â”‚   â”œâ”€â”€ models/             # Modelos de datos

â”‚   â”‚   â”œâ”€â”€ routes/             # DefiniciÃ³n de rutasUser: sgts_user```

â”‚   â”‚   â”œâ”€â”€ services/           # LÃ³gica de negocio

â”‚   â”‚   â””â”€â”€ utils/              # Utilidades (logger, email)Region: Oregon (US West)

â”‚   â”œâ”€â”€ scripts/

â”‚   â”‚   â”œâ”€â”€ migrate.js          # Script de migraciÃ³n DBPlan: Free**c) Ejecutar Schema**

â”‚   â”‚   â””â”€â”€ seed.js             # Script de datos iniciales

â”‚   â”œâ”€â”€ server.js               # Entry point del servidor```- Copiar contenido de `database/schema.sql`

â”‚   â””â”€â”€ package.json

â”‚- Dashboard â†’ Connect â†’ PSQL Command

â”œâ”€â”€ database/

â”‚   â”œâ”€â”€ schema.sql              # Schema de PostgreSQL**c) Ejecutar Schema**- Pegar y ejecutar

â”‚   â””â”€â”€ seed.sql                # Datos iniciales

â”‚- Copiar contenido de `database/schema.sql`- Repetir con `database/seed.sql`

â”œâ”€â”€ .github/

â”‚   â””â”€â”€ copilot-instructions.md # Instrucciones del proyecto- Dashboard â†’ Connect â†’ PSQL Command

â”‚

â”œâ”€â”€ render.yaml                 # ConfiguraciÃ³n Render- Pegar y ejecutar**d) Guardar DATABASE_URL**

â”œâ”€â”€ vercel.json                 # ConfiguraciÃ³n Vercel

â””â”€â”€ README.md- Repetir con `database/seed.sql````

```

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio

---

**d) Guardar DATABASE_URL**```

## Base de Datos

```

### Schema Principal

Internal Database URL: postgresql://sgts_user:****@****/sgts_farmashaio#### 3. Backend API en Render

**Tablas del Sistema:**

```

| Tabla | DescripciÃ³n | Campos Principales |

|-------|-------------|-------------------|**a) Crear Web Service**

| `users` | Usuarios del sistema | id, username, email, password_hash, role_id |

| `roles` | Roles de usuario | id, name (Empleado, TÃ©cnico, Admin) |#### 3. Backend API en Render```

| `tickets` | Tickets de soporte | id, ticket_number, title, description, status_id |

| `ticket_comments` | Comentarios | id, ticket_id, user_id, comment, is_internal |Dashboard â†’ New â†’ Web Service

| `ticket_history` | AuditorÃ­a de cambios | id, ticket_id, changed_by, field_changed, old_value, new_value |

| `categories` | CategorÃ­as de tickets | id, name (Hardware, Software, Red, etc.) |**a) Crear Web Service**Repository: Julian-Enable/sgts-farmashaio

| `priorities` | Niveles de prioridad | id, name (Baja, Media, Alta, CrÃ­tica) |

| `ticket_statuses` | Estados del ticket | id, name (Abierto, En Proceso, Resuelto, Cerrado) |```Name: sgts-farmashaio-api

| `notifications` | Notificaciones | id, user_id, type, message, is_read |

Dashboard â†’ New â†’ Web ServiceRegion: Oregon (US West)

### Diagrama de Relaciones

Repository: Julian-Enable/sgts-farmashaioBranch: main

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”Name: sgts-farmashaio-apiRoot Directory: backend

â”‚    roles    â”‚â”€â”€â”€â”€â”€â”€â”‚    users     â”‚â”€â”€â”€â”€â”€â”€â”‚ tickets     â”‚

â”‚             â”‚ 1:N  â”‚              â”‚ 1:N  â”‚             â”‚Region: Oregon (US West)Runtime: Node

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”‚                      â”‚Branch: mainBuild Command: npm install

                            â”‚ 1:N                  â”‚ N:1

                            â”‚                      â”‚Root Directory: backendStart Command: npm start

                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”

                     â”‚notifications  â”‚      â”‚categories  â”‚Runtime: NodePlan: Free

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                                   â”‚Build Command: npm install```

                                                   â”‚ N:1

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”Start Command: npm start

â”‚priorities   â”‚â”€â”€â”€â”€â”€â”€â”‚   tickets    â”‚      â”‚ statuses   â”‚

â”‚             â”‚ N:1  â”‚              â”‚      â”‚            â”‚Plan: Free**b) Configurar Variables de Entorno**

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”‚``````env

                            â”‚ 1:N

                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”NODE_ENV=production

                     â”‚ticket_comments â”‚

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜**b) Configurar Variables de Entorno**DATABASE_URL=<Copiar Internal Database URL>

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

                     â”‚ticket_history  â”‚```envJWT_SECRET=<Generar string aleatorio de 32+ caracteres>

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```NODE_ENV=productionCORS_ORIGINS=https://sgts-farmashaio-3pj5.vercel.app/



### Ãndices y OptimizaciÃ³nDATABASE_URL=<Copiar Internal Database URL>PORT=10000



- Primary keys en todas las tablasJWT_SECRET=<Generar string aleatorio de 32+ caracteres>```

- Foreign keys con `ON DELETE CASCADE`

- Ãndices en campos de bÃºsqueda frecuenteCORS_ORIGINS=https://sgts-farmashaio.vercel.app

- Timestamps automÃ¡ticos (`created_at`, `updated_at`)

PORT=10000**c) Conectar Database**

---

```- En el Web Service: Environment â†’ Add Environment Group

## Seguridad

- Seleccionar la base de datos creada

### Implementaciones de Seguridad

**c) Conectar Database**

**AutenticaciÃ³n**

- Tokens JWT con expiraciÃ³n configurable- En el Web Service: Environment â†’ Add Environment Group**d) Deploy**

- Refresh tokens para sesiones prolongadas

- Hashing de contraseÃ±as con bcrypt (12 rounds)- Seleccionar la base de datos creada- Click "Create Web Service"

- ValidaciÃ³n de fuerza de contraseÃ±a

- Esperar ~5 minutos para el primer deploy

**AutorizaciÃ³n**

- Control de acceso basado en roles (RBAC)**d) Deploy**- Verificar: `https://sgts-farmashaio-api.onrender.com/health`

- Middleware de verificaciÃ³n de permisos

- ProtecciÃ³n de endpoints segÃºn rol de usuario- Click "Create Web Service"



**ValidaciÃ³n de Datos**- Esperar ~5 minutos para el primer deploy#### 4. Frontend en Vercel

- SanitizaciÃ³n de inputs del usuario

- ValidaciÃ³n de tipos de datos- Verificar: `https://sgts-farmashaio-api.onrender.com/health`

- PrevenciÃ³n de SQL injection

- PrevenciÃ³n de XSS (Cross-Site Scripting)**a) Importar Proyecto**



**ComunicaciÃ³n**#### 4. Frontend en Vercel```

- HTTPS enforced en producciÃ³n

- CORS configurado con whitelist de orÃ­genesDashboard â†’ Add New â†’ Project

- Headers de seguridad HTTP

**a) Importar Proyecto**Import Git Repository: Julian-Enable/sgts-farmashaio

**Base de Datos**

- Consultas parametrizadas (prepared statements)```Framework Preset: Vite

- Ãndices en campos sensibles

- Backups automÃ¡ticos diarios (Render)Dashboard â†’ Add New â†’ ProjectRoot Directory: frontend



### Variables de Entorno SensiblesImport Git Repository: Julian-Enable/sgts-farmashaioBuild Command: npm run build



**Backend (.env)**Framework Preset: ViteOutput Directory: dist

```env

JWT_SECRET=         # MÃ­nimo 32 caracteres aleatoriosRoot Directory: frontendInstall Command: npm install

DATABASE_URL=       # Nunca compartir en pÃºblico

EMAIL_PASSWORD=     # App password de emailBuild Command: npm run build```

```

Output Directory: dist

**Frontend (.env)**

```envInstall Command: npm install**b) Configurar Variables de Entorno**

VITE_API_BASE_URL=  # URL pÃºblica del backend

`````````env



**Importante:** Los archivos `.env` estÃ¡n en `.gitignore` y nunca se suben al repositorio.VITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api



---**b) Configurar Variables de Entorno**```



## Scripts Disponibles```env



### BackendVITE_API_BASE_URL=https://sgts-farmashaio-api.onrender.com/api**c) Deploy**



```bash```- Click "Deploy"

npm start          # Iniciar servidor de producciÃ³n

npm run dev        # Servidor de desarrollo con nodemon- Esperar ~2 minutos

npm run migrate    # Ejecutar migraciones de base de datos

npm run seed       # Cargar datos iniciales**c) Deploy**- Verificar: `https://sgts-farmashaio.vercel.app`

npm test           # Ejecutar suite de tests

npm run lint       # Ejecutar ESLint- Click "Deploy"

```

- Esperar ~2 minutos#### 5. VerificaciÃ³n Post-Deployment

### Frontend

- Verificar: `https://sgts-farmashaio.vercel.app`

```bash

npm run dev        # Servidor de desarrollo (puerto 5173)**Checklist de ValidaciÃ³n:**

npm run build      # Build de producciÃ³n (carpeta dist/)

npm run preview    # Preview del build de producciÃ³n#### 5. VerificaciÃ³n Post-Deployment

npm run lint       # Ejecutar ESLint

npm run format     # Formatear cÃ³digo con Prettier- [ ] Database responde correctamente

```

**Checklist de ValidaciÃ³n:**  ```bash

---

  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"

## Funcionalidades por Rol

- [ ] Database responde correctamente  ```

### Empleado (User)

  ```bash

**Permisos:**

- Crear tickets de soporte  psql <DATABASE_URL> -c "SELECT COUNT(*) FROM users;"- [ ] Backend API funcional

- Ver y gestionar sus propios tickets

- Agregar comentarios a sus tickets  ```  ```bash

- Actualizar su perfil personal

- Recibir notificaciones de cambios  curl https://sgts-farmashaio-api.onrender.com/health



**Restricciones:**- [ ] Backend API funcional  # Expected: {"status": "ok"}

- No puede ver tickets de otros usuarios

- No puede cambiar estados de tickets  ```bash  ```

- No puede acceder al panel de administraciÃ³n

  curl https://sgts-farmashaio-api.onrender.com/health

### TÃ©cnico (Technician)

  # Expected: {"status": "ok"}- [ ] Frontend accesible

**Permisos:**

- Ver todos los tickets del sistema  ```  - Abrir `https://sgts-farmashaio.vercel.app`

- Recibir asignaciones automÃ¡ticas

- Cambiar estados de tickets asignados  - Verificar que carga sin errores

- Agregar comentarios pÃºblicos e internos

- Registrar tiempo trabajado- [ ] Frontend accesible

- Actualizar detalles tÃ©cnicos

  - Abrir `https://sgts-farmashaio.vercel.app`- [ ] Login funcional

**Restricciones:**

- No puede gestionar usuarios  - Verificar que carga sin errores  - Email: `admin@farmashaio.com`

- No puede acceder a configuraciÃ³n del sistema

- No puede eliminar tickets  - Password: `admin123`



### Administrador (Admin)- [ ] Login funcional  - Verificar acceso al dashboard



**Permisos:**  - Email: `admin@farmashaio.com`

- Acceso completo al sistema

- CRUD de usuarios y roles  - Password: `admin123`- [ ] CORS configurado

- AsignaciÃ³n manual de tickets

- Ver reportes y estadÃ­sticas  - Verificar acceso al dashboard  - Verificar que las llamadas API funcionan

- ConfiguraciÃ³n del sistema

- GestiÃ³n de categorÃ­as y prioridades  - Revisar Network tab (sin errores CORS)

- Acceso a logs del sistema

- [ ] CORS configurado

**Sin restricciones**

  - Verificar que las llamadas API funcionan### ActualizaciÃ³n Continua

---

  - Revisar Network tab (sin errores CORS)

## Troubleshooting

Ambos servicios estÃ¡n configurados con **auto-deploy**:

### Problemas Comunes

### ActualizaciÃ³n Continua

#### 1. Error de ConexiÃ³n a Base de Datos

```bash

**SÃ­ntoma:** `Error: connect ECONNREFUSED` o `Database connection failed`

Ambos servicios estÃ¡n configurados con **auto-deploy**:git add .

**SoluciÃ³n:**

```bashgit commit -m "feat: nueva funcionalidad"

# Verificar que PostgreSQL estÃ¡ corriendo

pg_isready```bashgit push origin main



# Verificar variables de entornogit add .```

echo $DATABASE_URL

git commit -m "feat: nueva funcionalidad"

# Probar conexiÃ³n manual

psql $DATABASE_URL -c "SELECT version();"git push origin main- **Vercel**: Deploy automÃ¡tico en ~2 minutos

```

```- **Render**: Deploy automÃ¡tico en ~5 minutos

#### 2. Error de CORS



**SÃ­ntoma:** `Access to fetch blocked by CORS policy`

- **Vercel**: Deploy automÃ¡tico en ~2 minutos---

**SoluciÃ³n:**

- Verificar que `CORS_ORIGINS` en backend incluye la URL del frontend- **Render**: Deploy automÃ¡tico en ~5 minutos## API Reference

- En desarrollo: `http://localhost:5173`

- En producciÃ³n: `https://sgts-farmashaio.vercel.app`



#### 3. Token JWT InvÃ¡lido---### Base URL



**SÃ­ntoma:** `401 Unauthorized` en todas las peticiones```



**SoluciÃ³n:**## API ReferenceDevelopment: http://localhost:5000/api

```javascript

// Limpiar localStorage en el navegadorProduction:  https://sgts-farmashaio-api.onrender.com/api

localStorage.clear();

### Base URL```

// Verificar que JWT_SECRET es el mismo en todos los ambientes

``````



#### 4. Error 500 en RenderDevelopment: http://localhost:5000/api### AutenticaciÃ³n



**SÃ­ntoma:** Backend no responde despuÃ©s del deployProduction:  https://sgts-farmashaio-api.onrender.com/api



**SoluciÃ³n:**```Todos los endpoints (excepto `/auth/login`) requieren token JWT en el header:

1. Revisar logs: Dashboard â†’ Logs

2. Verificar variables de entorno configuradas```http

3. Confirmar que `DATABASE_URL` estÃ¡ conectado

4. Verificar que el puerto es `10000` o `process.env.PORT`### AutenticaciÃ³nAuthorization: Bearer <token>



#### 5. Build Fallido en Vercel```



**SÃ­ntoma:** `Build failed` durante el deployTodos los endpoints (excepto `/auth/login`) requieren token JWT en el header:



**SoluciÃ³n:**```http#### Endpoints de AutenticaciÃ³n

```bash

# Verificar build localmenteAuthorization: Bearer <token>

cd frontend

npm run build``````http



# Revisar que todas las dependencias estÃ¡n en package.jsonPOST   /api/auth/login

npm install

#### Endpoints de AutenticaciÃ³nPOST   /api/auth/logout

# Verificar que VITE_API_BASE_URL estÃ¡ configurado

```GET    /api/auth/profile



### Logs y Debugging```httpPUT    /api/auth/profile



**Backend Logs (Render):**POST   /api/auth/loginPOST   /api/auth/change-password

```bash

# Ver logs en tiempo realPOST   /api/auth/logout```

Dashboard â†’ Service â†’ Logs â†’ Live Logs

```GET    /api/auth/profile



**Frontend Logs (Vercel):**PUT    /api/auth/profile**Ejemplo: Login**

```bash

# Ver logs de buildPOST   /api/auth/change-password```bash

Dashboard â†’ Project â†’ Deployments â†’ [Select Deployment] â†’ Logs

``````curl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \



**Base de Datos (Render):**  -H "Content-Type: application/json" \

```bash

# Conectarse vÃ­a PSQL**Ejemplo: Login**  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'

psql [Internal Database URL]

```bash```

# Ver tablas

\dtcurl -X POST https://sgts-farmashaio-api.onrender.com/api/auth/login \



# Ver usuarios  -H "Content-Type: application/json" \### GestiÃ³n de Usuarios

SELECT * FROM users;

```  -d '{"email": "admin@farmashaio.com", "password": "admin123"}'



---``````http



## RoadmapGET    /api/users              # Listar todos los usuarios



### Version 1.1 (Q1 2026)### GestiÃ³n de UsuariosPOST   /api/users              # Crear nuevo usuario

- [ ] Dashboard con grÃ¡ficos interactivos (Chart.js)

- [ ] Sistema de archivos adjuntos (AWS S3 / Cloudinary)GET    /api/users/:id          # Obtener usuario especÃ­fico

- [ ] Filtros avanzados de bÃºsqueda

- [ ] ExportaciÃ³n de reportes (PDF, Excel)```httpPUT    /api/users/:id          # Actualizar usuario



### Version 1.2 (Q2 2026)GET    /api/users              # Listar todos los usuariosDELETE /api/users/:id          # Eliminar usuario

- [ ] Notificaciones push en tiempo real (WebSockets)

- [ ] Sistema de SLA automÃ¡tico con alertasPOST   /api/users              # Crear nuevo usuarioGET    /api/users/technicians  # Listar solo tÃ©cnicos

- [ ] IntegraciÃ³n con Microsoft Teams

- [ ] API pÃºblica con documentaciÃ³n SwaggerGET    /api/users/:id          # Obtener usuario especÃ­fico```



### Version 2.0 (Q3 2026)PUT    /api/users/:id          # Actualizar usuario

- [ ] App mÃ³vil nativa (React Native)

- [ ] IntegraciÃ³n con WhatsApp BusinessDELETE /api/users/:id          # Eliminar usuario### GestiÃ³n de Tickets

- [ ] Sistema de conocimiento base (FAQ)

- [ ] Analytics avanzados con BIGET    /api/users/technicians  # Listar solo tÃ©cnicos



---``````http



## ContribuciÃ³nGET    /api/tickets                  # Listar tickets (con filtros)



### CÃ³mo Contribuir### GestiÃ³n de TicketsPOST   /api/tickets                  # Crear nuevo ticket



1. Fork el proyectoGET    /api/tickets/:id              # Obtener ticket especÃ­fico

2. Crear rama feature (`git checkout -b feature/nueva-funcionalidad`)

3. Commit cambios (`git commit -m 'feat: agregar nueva funcionalidad'`)```httpPUT    /api/tickets/:id              # Actualizar ticket

4. Push a la rama (`git push origin feature/nueva-funcionalidad`)

5. Abrir Pull RequestGET    /api/tickets                  # Listar tickets (con filtros)DELETE /api/tickets/:id              # Eliminar ticket



### Convenciones de CÃ³digoPOST   /api/tickets                  # Crear nuevo ticketPOST   /api/tickets/:id/assign       # Asignar tÃ©cnico



**Commits (Conventional Commits):**GET    /api/tickets/:id              # Obtener ticket especÃ­ficoPATCH  /api/tickets/:id/status       # Cambiar estado

```

feat: nueva funcionalidadPUT    /api/tickets/:id              # Actualizar ticketPOST   /api/tickets/:id/comments     # Agregar comentario

fix: correcciÃ³n de bug

docs: cambios en documentaciÃ³nDELETE /api/tickets/:id              # Eliminar ticketGET    /api/tickets/:id/history      # Obtener historial

style: formato, espacios, etc

refactor: refactorizaciÃ³n de cÃ³digoPOST   /api/tickets/:id/assign       # Asignar tÃ©cnico```

test: agregar o actualizar tests

chore: tareas de mantenimientoPATCH  /api/tickets/:id/status       # Cambiar estado

```

POST   /api/tickets/:id/comments     # Agregar comentario**Ejemplo: Crear Ticket**

**CÃ³digo:**

- ESLint configurado para JavaScript/ReactGET    /api/tickets/:id/history      # Obtener historial```bash

- Prettier para formato consistente

- 2 espacios de indentaciÃ³n```curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \

- Nombres descriptivos para variables y funciones

  -H "Authorization: Bearer <token>" \

---

**Ejemplo: Crear Ticket**  -H "Content-Type: application/json" \

## Licencia

```bash  -d '{

Este proyecto estÃ¡ licenciado bajo la **MIT License**.

curl -X POST https://sgts-farmashaio-api.onrender.com/api/tickets \    "title": "Error en sistema de inventario",

```

MIT License  -H "Authorization: Bearer <token>" \    "description": "El sistema no permite actualizar existencias",



Copyright (c) 2025 FARMASHAIO  -H "Content-Type: application/json" \    "category_id": 1,



Permission is hereby granted, free of charge, to any person obtaining a copy  -d '{    "priority_id": 3

of this software and associated documentation files (the "Software"), to deal

in the Software without restriction, including without limitation the rights    "title": "Error en sistema de inventario",  }'

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell

copies of the Software, and to permit persons to whom the Software is    "description": "El sistema no permite actualizar existencias",```

furnished to do so, subject to the following conditions:

    "category_id": 1,

The above copyright notice and this permission notice shall be included in all

copies or substantial portions of the Software.    "priority_id": 3### Notificaciones



THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  }'

IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,

FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE``````http

AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER

LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,GET    /api/notifications           # Listar notificaciones del usuario

OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

SOFTWARE.### NotificacionesPUT    /api/notifications/:id/read  # Marcar como leÃ­da

```

DELETE /api/notifications/:id       # Eliminar notificaciÃ³n

---

```http```

## Contacto

GET    /api/notifications           # Listar notificaciones del usuario

**FARMASHAIO - Departamento de TI**

PUT    /api/notifications/:id/read  # Marcar como leÃ­da### CatÃ¡logos

- **Website:** [https://sgts-farmashaio.vercel.app](https://sgts-farmashaio.vercel.app)

- **Repository:** [https://github.com/Julian-Enable/sgts-farmashaio](https://github.com/Julian-Enable/sgts-farmashaio)DELETE /api/notifications/:id       # Eliminar notificaciÃ³n

- **Issues:** [GitHub Issues](https://github.com/Julian-Enable/sgts-farmashaio/issues)

``````http

---

GET    /api/categories              # Listar categorÃ­as

<div align="center">

### CatÃ¡logosGET    /api/priorities              # Listar prioridades

**SGTS FARMASHAIO v1.0.0**

GET    /api/statuses                # Listar estados

Sistema de GestiÃ³n de Tickets de Soporte TI

```http```

Desarrollado por **Julian MerchÃ¡n**

GET    /api/categories              # Listar categorÃ­as

*Built with React, Node.js & PostgreSQL*

GET    /api/priorities              # Listar prioridades### CÃ³digos de Respuesta

</div>

GET    /api/statuses                # Listar estados

```| CÃ³digo | DescripciÃ³n |

|--------|-------------|

### CÃ³digos de Respuesta| `200` | OK - Solicitud exitosa |

| `201` | Created - Recurso creado |

| CÃ³digo | DescripciÃ³n || `400` | Bad Request - Datos invÃ¡lidos |

|--------|-------------|| `401` | Unauthorized - Token invÃ¡lido o faltante |

| `200` | OK - Solicitud exitosa || `403` | Forbidden - Sin permisos |

| `201` | Created - Recurso creado || `404` | Not Found - Recurso no encontrado |

| `400` | Bad Request - Datos invÃ¡lidos || `500` | Internal Server Error - Error del servidor |

| `401` | Unauthorized - Token invÃ¡lido o faltante |

| `403` | Forbidden - Sin permisos |---

| `404` | Not Found - Recurso no encontrado |

| `500` | Internal Server Error - Error del servidor |## Estructura del Proyecto



---```

sgts-farmashaio/

## Estructura del Proyectoâ”œâ”€â”€ frontend/

â”‚   â”œâ”€â”€ src/

```â”‚   â”‚   â”œâ”€â”€ assets/              # ImÃ¡genes y recursos estÃ¡ticos

sgts-farmashaio/â”‚   â”‚   â”œâ”€â”€ components/          # Componentes reutilizables

â”œâ”€â”€ frontend/â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # Componentes de autenticaciÃ³n

â”‚   â”œâ”€â”€ src/â”‚   â”‚   â”‚   â”œâ”€â”€ common/         # Componentes compartidos

â”‚   â”‚   â”œâ”€â”€ assets/              # ImÃ¡genes y recursos estÃ¡ticosâ”‚   â”‚   â”‚   â”œâ”€â”€ tickets/        # Componentes de tickets

â”‚   â”‚   â”œâ”€â”€ components/          # Componentes reutilizablesâ”‚   â”‚   â”‚   â””â”€â”€ users/          # Componentes de usuarios

â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # Componentes de autenticaciÃ³nâ”‚   â”‚   â”œâ”€â”€ contexts/            # Context API (AuthContext)

â”‚   â”‚   â”‚   â”œâ”€â”€ common/         # Componentes compartidosâ”‚   â”‚   â”œâ”€â”€ pages/              # PÃ¡ginas de la aplicaciÃ³n

â”‚   â”‚   â”‚   â”œâ”€â”€ tickets/        # Componentes de ticketsâ”‚   â”‚   â”œâ”€â”€ services/           # Servicios API (axios)

â”‚   â”‚   â”‚   â””â”€â”€ users/          # Componentes de usuariosâ”‚   â”‚   â”œâ”€â”€ theme/              # ConfiguraciÃ³n Material-UI

â”‚   â”‚   â”œâ”€â”€ contexts/            # Context API (AuthContext)â”‚   â”‚   â”œâ”€â”€ utils/              # Funciones de utilidad

â”‚   â”‚   â”œâ”€â”€ pages/              # PÃ¡ginas de la aplicaciÃ³nâ”‚   â”‚   â”œâ”€â”€ App.jsx             # Componente raÃ­z

â”‚   â”‚   â”œâ”€â”€ services/           # Servicios API (axios)â”‚   â”‚   â””â”€â”€ main.jsx            # Entry point

â”‚   â”‚   â”œâ”€â”€ theme/              # ConfiguraciÃ³n Material-UIâ”‚   â”œâ”€â”€ public/                 # Archivos pÃºblicos

â”‚   â”‚   â”œâ”€â”€ utils/              # Funciones de utilidadâ”‚   â”œâ”€â”€ index.html              # HTML template

â”‚   â”‚   â”œâ”€â”€ App.jsx             # Componente raÃ­zâ”‚   â”œâ”€â”€ vite.config.js          # ConfiguraciÃ³n Vite

â”‚   â”‚   â””â”€â”€ main.jsx            # Entry pointâ”‚   â””â”€â”€ package.json

â”‚   â”œâ”€â”€ public/                 # Archivos pÃºblicosâ”‚

â”‚   â”œâ”€â”€ index.html              # HTML templateâ”œâ”€â”€ backend/

â”‚   â”œâ”€â”€ vite.config.js          # ConfiguraciÃ³n Viteâ”‚   â”œâ”€â”€ src/

â”‚   â””â”€â”€ package.jsonâ”‚   â”‚   â”œâ”€â”€ config/             # ConfiguraciÃ³n (database, jwt)

â”‚â”‚   â”‚   â”œâ”€â”€ controllers/        # Controladores de rutas

â”œâ”€â”€ backend/â”‚   â”‚   â”œâ”€â”€ middleware/         # Middleware (auth, validation)

â”‚   â”œâ”€â”€ src/â”‚   â”‚   â”œâ”€â”€ models/             # Modelos de datos

â”‚   â”‚   â”œâ”€â”€ config/             # ConfiguraciÃ³n (database, jwt)â”‚   â”‚   â”œâ”€â”€ routes/             # DefiniciÃ³n de rutas

â”‚   â”‚   â”œâ”€â”€ controllers/        # Controladores de rutasâ”‚   â”‚   â”œâ”€â”€ services/           # LÃ³gica de negocio

â”‚   â”‚   â”œâ”€â”€ middleware/         # Middleware (auth, validation)â”‚   â”‚   â””â”€â”€ utils/              # Utilidades (logger, email)

â”‚   â”‚   â”œâ”€â”€ models/             # Modelos de datosâ”‚   â”œâ”€â”€ scripts/

â”‚   â”‚   â”œâ”€â”€ routes/             # DefiniciÃ³n de rutasâ”‚   â”‚   â”œâ”€â”€ migrate.js          # Script de migraciÃ³n DB

â”‚   â”‚   â”œâ”€â”€ services/           # LÃ³gica de negocioâ”‚   â”‚   â””â”€â”€ seed.js             # Script de datos iniciales

â”‚   â”‚   â””â”€â”€ utils/              # Utilidades (logger, email)â”‚   â”œâ”€â”€ server.js               # Entry point del servidor

â”‚   â”œâ”€â”€ scripts/â”‚   â””â”€â”€ package.json

â”‚   â”‚   â”œâ”€â”€ migrate.js          # Script de migraciÃ³n DBâ”‚

â”‚   â”‚   â””â”€â”€ seed.js             # Script de datos inicialesâ”œâ”€â”€ database/

â”‚   â”œâ”€â”€ server.js               # Entry point del servidorâ”‚   â”œâ”€â”€ schema.sql              # Schema de PostgreSQL

â”‚   â””â”€â”€ package.jsonâ”‚   â””â”€â”€ seed.sql                # Datos iniciales

â”‚â”‚

â”œâ”€â”€ database/â”œâ”€â”€ .github/

â”‚   â”œâ”€â”€ schema.sql              # Schema de PostgreSQLâ”‚   â””â”€â”€ copilot-instructions.md # Instrucciones del proyecto

â”‚   â””â”€â”€ seed.sql                # Datos inicialesâ”‚

â”‚â”œâ”€â”€ render.yaml                 # ConfiguraciÃ³n Render

â”œâ”€â”€ .github/â”œâ”€â”€ vercel.json                 # ConfiguraciÃ³n Vercel

â”‚   â””â”€â”€ copilot-instructions.md # Instrucciones del proyectoâ””â”€â”€ README.md

â”‚```

â”œâ”€â”€ render.yaml                 # ConfiguraciÃ³n Render

â”œâ”€â”€ vercel.json                 # ConfiguraciÃ³n Vercel---

â””â”€â”€ README.md

```## Seguridad



---### Implementaciones de Seguridad



## Base de Datos**AutenticaciÃ³n**

- Tokens JWT con expiraciÃ³n configurable

### Schema Principal- Refresh tokens para sesiones prolongadas

- Hashing de contraseÃ±as con bcrypt (12 rounds)

**Tablas del Sistema:**- ValidaciÃ³n de fuerza de contraseÃ±a



| Tabla | DescripciÃ³n | Campos Principales |**AutorizaciÃ³n**

|-------|-------------|-------------------|- Control de acceso basado en roles (RBAC)

| `users` | Usuarios del sistema | id, username, email, password_hash, role_id |- Middleware de verificaciÃ³n de permisos

| `roles` | Roles de usuario | id, name (Empleado, TÃ©cnico, Admin) |- ProtecciÃ³n de endpoints segÃºn rol de usuario

| `tickets` | Tickets de soporte | id, ticket_number, title, description, status_id |

| `ticket_comments` | Comentarios | id, ticket_id, user_id, comment, is_internal |**ValidaciÃ³n de Datos**

| `ticket_history` | AuditorÃ­a de cambios | id, ticket_id, changed_by, field_changed, old_value, new_value |- SanitizaciÃ³n de inputs del usuario

| `categories` | CategorÃ­as de tickets | id, name (Hardware, Software, Red, etc.) |- ValidaciÃ³n de tipos de datos

| `priorities` | Niveles de prioridad | id, name (Baja, Media, Alta, CrÃ­tica) |- PrevenciÃ³n de SQL injection

| `ticket_statuses` | Estados del ticket | id, name (Abierto, En Proceso, Resuelto, Cerrado) |- PrevenciÃ³n de XSS (Cross-Site Scripting)

| `notifications` | Notificaciones | id, user_id, type, message, is_read |

**ComunicaciÃ³n**

### Diagrama de Relaciones- HTTPS enforced en producciÃ³n

- CORS configurado con whitelist de orÃ­genes

```- Headers de seguridad HTTP

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚    roles    â”‚â”€â”€â”€â”€â”€â”€â”‚    users     â”‚â”€â”€â”€â”€â”€â”€â”‚ tickets     â”‚**Base de Datos**

â”‚             â”‚ 1:N  â”‚              â”‚ 1:N  â”‚             â”‚- Consultas parametrizadas (prepared statements)

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜- Ãndices en campos sensibles

                            â”‚                      â”‚- Backups automÃ¡ticos diarios (Render)

                            â”‚ 1:N                  â”‚ N:1

                            â”‚                      â”‚### Variables de Entorno Sensibles

                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”

                     â”‚notifications  â”‚      â”‚categories  â”‚**Backend (.env)**

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜```env

                                                   â”‚JWT_SECRET=         # MÃ­nimo 32 caracteres aleatorios

                                                   â”‚ N:1DATABASE_URL=       # Nunca compartir en pÃºblico

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”EMAIL_PASSWORD=     # App password de email

â”‚priorities   â”‚â”€â”€â”€â”€â”€â”€â”‚   tickets    â”‚      â”‚ statuses   â”‚```

â”‚             â”‚ N:1  â”‚              â”‚      â”‚            â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜**Frontend (.env)**

                            â”‚```env

                            â”‚ 1:NVITE_API_BASE_URL=  # URL pÃºblica del backend

                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”```

                     â”‚ticket_comments â”‚

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜**Importante:** Los archivos `.env` estÃ¡n en `.gitignore` y nunca se suben al repositorio.

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

                     â”‚ticket_history  â”‚---

                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```## Scripts Disponibles



### Ãndices y OptimizaciÃ³n### Backend



- Primary keys en todas las tablas```bash

- Foreign keys con `ON DELETE CASCADE`npm start          # Iniciar servidor de producciÃ³n

- Ãndices en campos de bÃºsqueda frecuentenpm run dev        # Servidor de desarrollo con nodemon

- Timestamps automÃ¡ticos (`created_at`, `updated_at`)npm run migrate    # Ejecutar migraciones de base de datos

npm run seed       # Cargar datos iniciales

---npm test           # Ejecutar suite de tests

npm run lint       # Ejecutar ESLint

## Seguridad```



### Implementaciones de Seguridad### Frontend



**AutenticaciÃ³n**```bash

- Tokens JWT con expiraciÃ³n configurablenpm run dev        # Servidor de desarrollo (puerto 5173)

- Refresh tokens para sesiones prolongadasnpm run build      # Build de producciÃ³n (carpeta dist/)

- Hashing de contraseÃ±as con bcrypt (12 rounds)npm run preview    # Preview del build de producciÃ³n

- ValidaciÃ³n de fuerza de contraseÃ±anpm run lint       # Ejecutar ESLint

npm run format     # Formatear cÃ³digo con Prettier

**AutorizaciÃ³n**```

- Control de acceso basado en roles (RBAC)

- Middleware de verificaciÃ³n de permisos---

- ProtecciÃ³n de endpoints segÃºn rol de usuario

## Funcionalidades por Rol

**ValidaciÃ³n de Datos**

- SanitizaciÃ³n de inputs del usuario### Empleado (User)

- ValidaciÃ³n de tipos de datos

- PrevenciÃ³n de SQL injection**Permisos:**

- PrevenciÃ³n de XSS (Cross-Site Scripting)- Crear tickets de soporte

- Ver y gestionar sus propios tickets

**ComunicaciÃ³n**- Agregar comentarios a sus tickets

- HTTPS enforced en producciÃ³n- Actualizar su perfil personal

- CORS configurado con whitelist de orÃ­genes- Recibir notificaciones de cambios

- Headers de seguridad HTTP

**Restricciones:**

**Base de Datos**- No puede ver tickets de otros usuarios

- Consultas parametrizadas (prepared statements)- No puede cambiar estados de tickets

- Ãndices en campos sensibles- No puede acceder al panel de administraciÃ³n

- Backups automÃ¡ticos diarios (Render)

### TÃ©cnico (Technician)

### Variables de Entorno Sensibles

**Permisos:**

**Backend (.env)**- Ver todos los tickets del sistema

```env- Recibir asignaciones automÃ¡ticas

JWT_SECRET=         # MÃ­nimo 32 caracteres aleatorios- Cambiar estados de tickets asignados

DATABASE_URL=       # Nunca compartir en pÃºblico- Agregar comentarios pÃºblicos e internos

EMAIL_PASSWORD=     # App password de email- Registrar tiempo trabajado

```- Actualizar detalles tÃ©cnicos



**Frontend (.env)****Restricciones:**

```env- No puede gestionar usuarios

VITE_API_BASE_URL=  # URL pÃºblica del backend- No puede acceder a configuraciÃ³n del sistema

```- No puede eliminar tickets



**Importante:** Los archivos `.env` estÃ¡n en `.gitignore` y nunca se suben al repositorio.### Administrador (Admin)



---**Permisos:**

- Acceso completo al sistema

## Scripts Disponibles- CRUD de usuarios y roles

- AsignaciÃ³n manual de tickets

### Backend- Ver reportes y estadÃ­sticas

- ConfiguraciÃ³n del sistema

```bash- GestiÃ³n de categorÃ­as y prioridades

npm start          # Iniciar servidor de producciÃ³n- Acceso a logs del sistema

npm run dev        # Servidor de desarrollo con nodemon

npm run migrate    # Ejecutar migraciones de base de datos**Sin restricciones**

npm run seed       # Cargar datos iniciales

npm test           # Ejecutar suite de tests---

npm run lint       # Ejecutar ESLint

```## ğŸ”§ API Endpoints



### Frontend### AutenticaciÃ³n

```

```bashPOST   /api/auth/login           # Iniciar sesiÃ³n

npm run dev        # Servidor de desarrollo (puerto 5173)POST   /api/auth/logout          # Cerrar sesiÃ³n

npm run build      # Build de producciÃ³n (carpeta dist/)GET    /api/auth/profile         # Obtener perfil

npm run preview    # Preview del build de producciÃ³nPUT    /api/auth/profile         # Actualizar perfil

npm run lint       # Ejecutar ESLintPOST   /api/auth/change-password # Cambiar contraseÃ±a

npm run format     # Formatear cÃ³digo con Prettier```

```

### Usuarios

---```

GET    /api/users               # Listar usuarios

## Funcionalidades por RolPOST   /api/users               # Crear usuario

GET    /api/users/:id           # Obtener usuario

### Empleado (User)PUT    /api/users/:id           # Actualizar usuario

DELETE /api/users/:id           # Eliminar usuario

**Permisos:**GET    /api/users/technicians   # Listar tÃ©cnicos

- Crear tickets de soporte```

- Ver y gestionar sus propios tickets

- Agregar comentarios a sus tickets### Tickets

- Actualizar su perfil personal```

- Recibir notificaciones de cambiosGET    /api/tickets             # Listar tickets

POST   /api/tickets             # Crear ticket

**Restricciones:**GET    /api/tickets/:id         # Obtener ticket

- No puede ver tickets de otros usuariosPUT    /api/tickets/:id         # Actualizar ticket

- No puede cambiar estados de ticketsPOST   /api/tickets/:id/assign  # Asignar ticket

- No puede acceder al panel de administraciÃ³nPATCH  /api/tickets/:id/status  # Cambiar estado

POST   /api/tickets/:id/comments # Agregar comentario

### TÃ©cnico (Technician)```



**Permisos:**## ğŸŒŸ PrÃ³ximas Mejoras

- Ver todos los tickets del sistema

- Recibir asignaciones automÃ¡ticas- [ ] Dashboard con grÃ¡ficos y mÃ©tricas

- Cambiar estados de tickets asignados- [ ] Sistema de archivos adjuntos

- Agregar comentarios pÃºblicos e internos- [ ] Notificaciones push en tiempo real

- Registrar tiempo trabajado- [ ] App mÃ³vil nativa

- Actualizar detalles tÃ©cnicos- [ ] IntegraciÃ³n con WhatsApp

- [ ] Sistema de SLA automÃ¡tico

**Restricciones:**- [ ] Reportes avanzados y analytics

- No puede gestionar usuarios

- No puede acceder a configuraciÃ³n del sistema## ğŸ› SoluciÃ³n de Problemas

- No puede eliminar tickets

### Error de ConexiÃ³n a Base de Datos

### Administrador (Admin)```bash

# Verificar variables de entorno

**Permisos:**echo $DATABASE_URL

- Acceso completo al sistema

- CRUD de usuarios y roles# Probar conexiÃ³n

- AsignaciÃ³n manual de ticketspsql $DATABASE_URL -c "SELECT version();"

- Ver reportes y estadÃ­sticas```

- ConfiguraciÃ³n del sistema

- GestiÃ³n de categorÃ­as y prioridades### Error de CORS

- Acceso a logs del sistemaVerificar que `CLIENT_URL` en el backend coincida con el dominio del frontend.



**Sin restricciones**### Error 500 en Render

Revisar logs en el dashboard de Render y verificar variables de entorno.

---

## ğŸ“ Soporte

## Troubleshooting

Para soporte tÃ©cnico:

### Problemas Comunes- ğŸ“§ **Email**: soporte@farmashaio.com

- ğŸ› **Issues**: [GitHub Issues](https://github.com/tu-usuario/sgts-farmashaio/issues)

#### 1. Error de ConexiÃ³n a Base de Datos- ğŸ“– **Wiki**: [DocumentaciÃ³n completa](https://github.com/tu-usuario/sgts-farmashaio/wiki)



**SÃ­ntoma:** `Error: connect ECONNREFUSED` o `Database connection failed`## ğŸ“„ Licencia



**SoluciÃ³n:**Este proyecto estÃ¡ licenciado bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para mÃ¡s detalles.

```bash

# Verificar que PostgreSQL estÃ¡ corriendo---

pg_isready

**Desarrollado con â¤ï¸ para FARMASHAIO**  

# Verificar variables de entorno*Sistema de GestiÃ³n de Tickets de Soporte TI v1.0.0*#


